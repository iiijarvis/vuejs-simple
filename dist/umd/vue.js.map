{"version":3,"file":"vue.js","sources":["../../src/core/util/index.js","../../src/core/observer/array.js","../../src/core/observer/dep.js","../../src/core/observer/index.js","../../src/core/observer/scheduler.js","../../src/core/observer/watcher.js","../../src/core/instance/state.js","../../src/compiler/directives/model.js","../../src/compiler/parser-html.js","../../src/compiler/codegen/index.js","../../src/compiler/index.js","../../src/core/vdom/create-element.js","../../src/core/vdom/patch.js","../../src/core/instance/lifecycle.js","../../src/core/instance/init.js","../../src/core/instance/render.js","../../src/core/instance/index.js"],"sourcesContent":["export function isObject (obj) {\r\n  return obj !== null && typeof obj === 'object';\r\n}\r\n\r\nexport function def (data, key, value, enumerable) {\r\n  Object.defineProperty(data, key, {\r\n    value: value,\r\n    enumerable: !!enumerable,\r\n    configurable: true\r\n  })\r\n}\r\n\r\nexport function bind (fn, ctx) {\r\n  return function (a) {\r\n    var l = arguments.length\r\n    return l\r\n      ? l > 1\r\n        ? fn.apply(ctx, arguments)\r\n        : fn.call(ctx, a)\r\n      : fn.call(ctx)\r\n  }\r\n}\r\n\r\nexport const unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/\r\n\r\nconst bailRE = new RegExp(`[^${unicodeRegExp.source}.$_\\\\d]`)\r\nexport function parsePath (path) {\r\n  if (bailRE.test(path)) {\r\n    return\r\n  }\r\n  const segments = path.split('.')\r\n  return function (obj) {\r\n    for (let i = 0; i < segments.length; i++) {\r\n      if (!obj) return\r\n      obj = obj[segments[i]]\r\n    }\r\n    return obj\r\n  }\r\n}\r\n\r\nexport function remove (arr, item) {\r\n  if (arr.length) {\r\n    const index = arr.indexOf(item);\r\n    if (index > -1) {\r\n      return arr.splice(index, 1);\r\n    }\r\n  }\r\n}\r\n","const oldArrayMethods = Array.prototype;\r\nexport const arrayMethods = Object.create(oldArrayMethods)\r\n\r\nconst methods = ['push', 'shift', 'unshift', 'pop', 'reverse', 'sort', 'splice'];\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[method] = function (...args) {\r\n    const result = oldArrayMethods[method].apply(this, args); // 调用原生数组方法\r\n    let inserted;\r\n    const ob = this.__ob__;\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args;\r\n        break;\r\n      case 'splice':\r\n        inserted = args.slice(2);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (inserted) {\r\n      ob.observeArray(inserted);\r\n    }\r\n    return result;\r\n  }\r\n});\r\n","import { remove } from '../util/index'\r\n\r\nlet uid = 0;\r\n\r\nexport default class Dep {\r\n  constructor() {\r\n    this.id = uid++;\r\n    this.subs = [];\r\n  }\r\n\r\n  addSub (sub) {\r\n    this.subs.push(sub);\r\n  }\r\n\r\n  removeSub (sub) {\r\n    remove(this.subs, sub);\r\n  }\r\n\r\n  depend () {\r\n    if (Dep.target) {\r\n      Dep.target.addDep(this);\r\n    }\r\n  }\r\n\r\n  notify () {\r\n    const subs = this.subs.slice();\r\n    for (let i = 0; i < subs.length; i++) {\r\n      subs[i].update();\r\n    }\r\n  }\r\n}\r\n\r\nDep.target = null\r\nconst targetStack = []\r\n\r\nexport function pushTarget (target) {\r\n  targetStack.push(target);\r\n  Dep.target = target;\r\n}\r\n\r\nexport function popTarget () {\r\n  targetStack.pop();\r\n  Dep.target = targetStack[targetStack.length - 1];\r\n}\r\n","import { isObject, def } from '../util/index';\r\nimport { arrayMethods } from './array';\r\nimport Dep from './dep';\r\n\r\nexport function observe (data) {\r\n  if (!isObject(data)) return;\r\n  return new Observer(data);\r\n}\r\n\r\nexport class Observer {\r\n  constructor(data) {\r\n    // 给 data 挂载 Observer 实例\r\n    // 这里的作用是方便数组操作时调用 Observer 实例的 observeArray 方法\r\n    def(data, '__ob__', this, false);\r\n\r\n    if (Array.isArray(data)) {\r\n      this.observeArray(data);\r\n      data.__proto__ = arrayMethods;\r\n    } else {\r\n      this.walk(data);\r\n    }\r\n  }\r\n  walk (data) {\r\n    Object.keys(data).forEach(key => {\r\n      let value = data[key];\r\n      defineReactive(data, key, value);\r\n    });\r\n  }\r\n  observeArray (data) {\r\n    for (let i = 0; i < data.length; i++) {\r\n      observe(data[i]);\r\n    }\r\n  }\r\n}\r\n\r\nfunction defineReactive (data, key, value) {\r\n  const dep = new Dep();\r\n  observe(value); // 递归调用\r\n  Object.defineProperty(data, key, {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get () {\r\n      if (Dep.target) {\r\n        dep.depend();\r\n      }\r\n      return value;\r\n    },\r\n    set (newVal) {\r\n      if (newVal === value) return;\r\n      value = newVal;\r\n      dep.notify();\r\n    }\r\n  })\r\n}\r\n","let has = {};\r\nlet flushing = false;\r\nlet queue = [];\r\nlet index = 0;\r\nlet waiting = false;\r\n\r\nexport function queueWatcher (watcher) {\r\n  let id = watcher.id;\r\n  if (!has[id]) {\r\n    has[id] = true;\r\n    if (!flushing) {\r\n      queue.push(watcher);\r\n    } else {\r\n      // 执行 flushSchedulerQueue 过程中插入 watcher\r\n      let i = queue.length - 1;\r\n      // 按从小到大排列 插入id\r\n      while (i > index && queue[index].id > id) i--;\r\n      queue.splice(i + 1, 0, watcher);\r\n    }\r\n    if (!waiting) {\r\n      waiting = true;\r\n      setTimeout(flushSchedulerQueue, 0);\r\n    }\r\n  }\r\n}\r\n\r\nfunction flushSchedulerQueue () {\r\n  flushing = true;\r\n  queue.sort((a, b) => a.id - b.id);\r\n  for (index = 0; index < queue.length; index++) {\r\n    let watcher = queue[index];\r\n    has[watcher.id] = null;\r\n    watcher.run();\r\n  }\r\n  index = queue.length = 0;\r\n  has = {};\r\n  flushing = waiting = false;\r\n}\r\n","import Dep, { pushTarget, popTarget } from './dep';\r\nimport { parsePath } from '../util/index'\r\nimport { queueWatcher } from './scheduler'\r\n\r\nlet uid = 0\r\n\r\nclass Watcher {\r\n  constructor(vm, exprOrFn, callback, options) {\r\n    this.vm = vm;\r\n    this.callback = callback;\r\n    this.options = options;\r\n    this.deps = [];\r\n    this.depIds = new Set();\r\n    this.id = ++uid;\r\n\r\n    if (typeof exprOrFn === 'function') {\r\n      this.getter = exprOrFn\r\n    } else {\r\n      this.getter = parsePath(exprOrFn)\r\n    }\r\n\r\n    this.value = this.get();\r\n  }\r\n  get () {\r\n    Dep.target = this;\r\n    let value = '';\r\n    try {\r\n      value = this.getter.call(this.vm, this.vm);\r\n    } catch (e) {\r\n\r\n    } finally {\r\n      Dep.target = null;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  addDep (dep) {\r\n    if (!this.depIds.has(dep.id)) {\r\n      dep.addSub(this);\r\n      this.depIds.add(dep.id);\r\n      this.deps.push(dep);\r\n    }\r\n  }\r\n\r\n  run () {\r\n    let value = this.getter.call(this.vm, this.vm);\r\n    if (value !== this.value) {\r\n      let oldValue = this.value;\r\n      this.value = value;\r\n      this.callback.call(this.vm, this.value, oldValue);\r\n    }\r\n  }\r\n\r\n  update () {\r\n    queueWatcher(this);\r\n  }\r\n\r\n  teardown () {\r\n    let i = this.deps.length;\r\n    while (i--) {\r\n      this.deps[i].removeSub(this);\r\n    }\r\n  }\r\n}\r\n\r\nexport default Watcher","import { observe } from '../observer/index'\r\nimport { bind } from '../util/index'\r\nimport Watcher from '../observer/watcher'\r\n\r\nfunction initState (vm) {\r\n  const options = vm.$options;\r\n  if (options.props) {\r\n    initProps();\r\n  }\r\n  if (options.methods) {\r\n    initMethods(vm);\r\n  }\r\n  if (options.data) {\r\n    initData(vm);\r\n  }\r\n  if (options.computed) {\r\n    initComputed();\r\n  }\r\n  if (options.watch) {\r\n    initWatch();\r\n  }\r\n}\r\n\r\nfunction initProps () { }\r\n\r\nfunction initMethods (vm) {\r\n  const methods = vm.$options.methods;\r\n  if (methods) {\r\n    for (let key in methods) {\r\n      vm[key] = bind(methods[key], vm);\r\n    }\r\n  }\r\n}\r\n\r\nfunction initData (vm) {\r\n  let data = vm.$options.data;\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data || {};\r\n\r\n  Object.keys(data).forEach((key) => {\r\n    proxy(vm, '_data', key);\r\n  });\r\n  observe(data);\r\n}\r\n\r\nfunction proxy (vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    configurable: true,\r\n    enumerable: true,\r\n    get () {\r\n      return vm[source][key];\r\n    },\r\n    set (newValue) {\r\n      vm[source][key] = newValue;\r\n    }\r\n  })\r\n}\r\n\r\nfunction initComputed () { }\r\n\r\nfunction initWatch () { }\r\n\r\nexport function stateMixin (Vue) {\r\n  Vue.prototype.$watch = function (expOrFn, cb, options) {\r\n    const vm = this;\r\n    options = options || {};\r\n    const watcher = new Watcher(vm, expOrFn, cb);\r\n    if (options.immediate) {\r\n      cb.call(vm, watcher.value);\r\n    }\r\n    return function unwatchFn () {\r\n      watcher.teardown();\r\n    }\r\n  }\r\n}\r\n\r\nexport { initState };","export function genAssignmentCode (value, assignment) {\r\n\r\n  return (value + \"=\" + assignment);\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst doctype = /^<!DOCTYPE [^>]+>/i;\r\nconst dirRE = /^v-|^@/;\r\n\r\nimport { genAssignmentCode } from './directives/model.js';\r\n\r\nlet root = null;\r\nlet currentParent = null;\r\nlet stack = [];\r\n\r\nfunction createASTElement (tagName, attrs) {\r\n  return {\r\n    tag: tagName,\r\n    type: 1,\r\n    children: [],\r\n    attrsList: attrs,\r\n    attrsMap: makeAttrsMap(attrs),\r\n    parent: null\r\n  }\r\n}\r\n\r\nfunction makeAttrsMap (attrs) {\r\n  let map = {};\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    map[attrs[i].name] = attrs[i].value;\r\n  }\r\n  return map;\r\n}\r\n\r\nexport function parseHtml (html) {\r\n  while (html) {\r\n    let textEnd = html.indexOf('<');\r\n    if (textEnd === 0) {\r\n      let startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n      } else {\r\n        let endTagMatch = html.match(endTag);\r\n        if (endTagMatch) {\r\n          advance(endTagMatch[0].length);\r\n          end(endTagMatch[1]);\r\n        }\r\n      }\r\n    }\r\n    let text;\r\n    if (textEnd >= 0) {\r\n      text = html.substring(0, textEnd);\r\n    }\r\n    if (text) {\r\n      advance(text.length);\r\n      chars(text);\r\n    }\r\n  }\r\n\r\n  function parseStartTag () {\r\n    let start = html.match(startTagOpen);\r\n    if (start) {\r\n      const match = { tagName: start[1], attrs: [] };\r\n      advance(start[0].length);\r\n\r\n      let end, attr;\r\n      // 获取标签属性\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        advance(attr[0].length);\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5]\r\n        });\r\n      }\r\n      if (end) {\r\n        advance(end[0].length);\r\n      }\r\n\r\n      return match;\r\n    }\r\n  }\r\n\r\n  function advance (n) {\r\n    html = html.substring(n);\r\n  }\r\n\r\n  return root;\r\n}\r\n\r\nfunction processAttrs (el) {\r\n  let list = el.attrsList;\r\n  el.attrs = el.attrs ? el.attrs : [];\r\n  el.directives = el.directives ? el.directives : [];\r\n  el.props = el.props ? el.props : [];\r\n  el.events = el.events ? el.events : {};\r\n\r\n  for (let i = 0; i < list.length; i++) {\r\n    let name = list[i].name;\r\n    let value = list[i].value;\r\n    if (dirRE.test(name)) {\r\n      if (/v-model/.test(name) && el.tag === 'input') {\r\n        el.directives.push({ name: 'model', rawName: 'v-model', value: value });\r\n        el.events['input'] = genAssignmentCode(value, '$event.target.value');\r\n        el.props.push({ name: 'value', value: value });\r\n      }\r\n      if (/@click/.test(name)) {\r\n        el.events['click'] = value;\r\n      }\r\n    } else {\r\n      el.attrs.push({ name: name, value: value });\r\n    }\r\n  }\r\n}\r\n\r\n// 处理开始标签\r\nfunction start (tagName, attrs) {\r\n  let element = createASTElement(tagName, attrs);\r\n  processAttrs(element);\r\n  if (!root) {\r\n    root = element;\r\n  }\r\n  currentParent = element;\r\n  stack.push(element);\r\n  if (tagName === 'input') {\r\n    end(tagName);\r\n  }\r\n}\r\n\r\n// 处理文本\r\nfunction chars (text) {\r\n  text = text.replace(/\\s/g, '');\r\n  if (text) {\r\n    currentParent.children.push({\r\n      text: text,\r\n      type: 3\r\n    });\r\n  }\r\n}\r\n\r\n// 处理结束标签\r\nfunction end (tagName) {\r\n  let element = stack.pop();\r\n  currentParent = stack[stack.length - 1];\r\n  if (currentParent) {\r\n    element.parent = currentParent;\r\n    currentParent.children.push(element);\r\n  }\r\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\nconst fnExpRE = /^([\\w$_]+|\\([^)]*?\\))\\s*=>|^function(?:\\s+[\\w$]+)?\\s*\\(/;\r\nconst fnInvokeRE = /\\([^)]*?\\);*$/;\r\nconst simplePathRE = /^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['[^']*?']|\\[\"[^\"]*?\"]|\\[\\d+]|\\[[A-Za-z_$][\\w$]*])*$/;\r\n\r\nexport function generate (ast) {\r\n  let children = genChildren(ast);\r\n  let code = `_c(\"${ast.tag}\",\r\n  ${ast.attrsList.length ? genData(ast) : 'undefined'}\r\n  ${children ? `,${children}` : ''}\r\n  )`;\r\n\r\n  return code;\r\n}\r\n\r\nfunction genData (ast) {\r\n  let data = '{';\r\n  if (ast.attrs) {\r\n    data += \"attrs:\" + genProps(ast.attrs) + \",\";\r\n  }\r\n  if (ast.events) {\r\n    data += \"on:\" + genHandlers(ast.events) + \",\";\r\n  }\r\n  if (ast.props) {\r\n    data += \"domProps:\" + genDomProps(ast.props) + \",\";\r\n  }\r\n\r\n  data = data.replace(/,$/, '');\r\n  // data += \"attrs:\" + genProps(attrs.filter(item => !item.name.startsWith('@'))) + \",\";\r\n  // let events = attrs.filter(item => item.name.startsWith('@'));\r\n  // if (events && events.length) {\r\n  //   data += \"on:\" + genHandlers(events);\r\n  // }\r\n  data += '}';\r\n  return data;\r\n}\r\n\r\nfunction genHandlers (events) {\r\n  let data = '';\r\n  Object.keys(events).forEach(key => {\r\n\r\n    let isMethodPath = simplePathRE.test(events[key]);\r\n    let isFunctionExpression = fnExpRE.test(events[key]);\r\n    // let isFunctionInvocation = simplePathRE.test(handler.value.replace(fnInvokeRE, ''));\r\n\r\n    if (isMethodPath || isFunctionExpression) {\r\n      data += `\"${key}\":${events[key]},`;\r\n    } else {\r\n      data += `\"${key}\":function ($event){ ${events[key]} },`;\r\n    }\r\n  })\r\n  data = data.replace(/,$/, '');\r\n\r\n  return `{${data}}`;\r\n}\r\n\r\nfunction genDomProps (props) {\r\n  let data = '{';\r\n  for (var i = 0; i < props.length; i++) {\r\n    data += `\"${props[i].name}\":${props[i].value},`;\r\n    // if (ast.elm) {\r\n    //   ast.elm[ast.props[i].name] = ast.props[i].value;\r\n    // }\r\n  }\r\n\r\n  data = data.replace(/,$/, '');\r\n  data += '}';\r\n  return data;\r\n}\r\n\r\nfunction genProps (attrs) {\r\n  let str = '';\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i];\r\n    if (attr.name === \"style\") {\r\n      let obj = {};\r\n      attr.value.split(\";\").forEach(item => {\r\n        let [key, value] = item.split(\":\");\r\n        obj[key] = value;\r\n      });\r\n      attr.value = obj;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\nfunction genChildren (ast) {\r\n  let children = ast.children;\r\n  if (children && children.length > 0) {\r\n    return `${children.map(c => gen(c)).join(',')}`;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction gen (node) {\r\n  if (node.type === 1) {\r\n    return generate(node);\r\n  } else {\r\n    let text = node.text;\r\n    let tokens = [];\r\n    let match, index;\r\n    let lastIndex = defaultTagRE.lastIndex = 0;\r\n    while (match = defaultTagRE.exec(text)) {\r\n      index = match.index;\r\n      if (index > lastIndex) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n      }\r\n      tokens.push(`_s(${match[1].trim()})`);\r\n      lastIndex = index + match[0].length;\r\n    }\r\n    if (lastIndex < text.length) {\r\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n    }\r\n    return `_v(${tokens.join('+')})`;\r\n  }\r\n}","import { parseHtml } from './parser-html';\r\nimport { generate } from './codegen/index';\r\n\r\nexport function compileToFunctions (template) {\r\n  let root = parseHtml(template);\r\n  let code = generate(root);\r\n\r\n  let renderFn = new Function(`with(this){return ${code}}`);\r\n\r\n  return renderFn;\r\n}","export function createElement (tag, data = {}, ...children) {\r\n  let key = data.key;\r\n  if (key) {\r\n    delete data.key;\r\n  }\r\n  return VNode(tag, data, key, children, undefined);\r\n}\r\n\r\nexport function createTextNode (text) {\r\n  return VNode(undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\nexport function VNode (tag, data, key, children, text, elm) {\r\n  return {\r\n    tag: tag,\r\n    data: data,\r\n    key: key,\r\n    children: children,\r\n    text: text,\r\n    elm: elm\r\n  };\r\n}","import { VNode } from './create-element'\r\n\r\nexport function createPatchFunction (oldVnode, vnode) {\r\n  const vm = this;\r\n  return patch(oldVnode, vnode);\r\n\r\n  function patch (oldVnode, vnode) {\r\n    const isRealElement = oldVnode.nodeType; // 虚拟dom没有nodeType属性，真实dom才有\r\n    // let parent = vm.$el.parentNode;\r\n    // const oldElm = oldVnode;\r\n    // const parentElm = oldElm.parentNode;\r\n\r\n    // let el = createElm(vnode);\r\n    // parent.appendChild(el);\r\n    // if (isRealElement) {\r\n    //   parentElm.removeChild(oldElm);\r\n    // }\r\n    if (!isRealElement && sameVnode(oldVnode, vnode)) {\r\n      patchVnode(oldVnode, vnode);\r\n    } else {\r\n      if (isRealElement) {\r\n        oldVnode = emptyNodeAt(oldVnode);\r\n      }\r\n      let elm = oldVnode.elm;\r\n      let parent = elm.parentNode;\r\n      createElm(vnode);\r\n      parent.insertBefore(vnode.elm, elm);\r\n      parent.removeChild(elm);\r\n    }\r\n    return vnode.elm;\r\n  }\r\n\r\n  function createElm (vnode) {\r\n    let { tag, data, key, children, text } = vnode;\r\n\r\n    if (typeof tag === 'string') {\r\n      vnode.elm = document.createElement(tag);\r\n      children.forEach(child => {\r\n        return vnode.elm.appendChild(createElm(child));\r\n      })\r\n      updateProperties(vnode);\r\n    } else {\r\n      vnode.elm = document.createTextNode(text);\r\n    }\r\n    return vnode.elm;\r\n  }\r\n\r\n  function patchVnode (oldVnode, vnode) {\r\n    if (oldVnode === vnode) return;\r\n\r\n    const elm = vnode.elm = oldVnode.elm;\r\n    const oldCh = oldVnode.children;\r\n    const ch = vnode.children;\r\n\r\n    if (!vnode.text) { // 判断是否为文本\r\n      if (oldCh && ch) { // 是否有子节点\r\n        updateChildren(elm, oldCh, ch);\r\n      } else if (ch) {\r\n        if (oldCh.text) {\r\n          elm.textContent = '';\r\n        }\r\n        addVnodes(elm, null, ch, 0, ch.length - 1);\r\n      } else if (oldCh) {\r\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\r\n      } else {\r\n        elm.textContent = '';\r\n      }\r\n      updateDOMProps(oldVnode, vnode);\r\n    } else {\r\n      if (oldCh) {\r\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\r\n      }\r\n      elm.textContent = vnode.text;\r\n    }\r\n  }\r\n\r\n  function emptyNodeAt (elm) {\r\n    return new VNode(elm.tagName.toLowerCase(), {}, [], undefined, undefined, elm);\r\n  }\r\n\r\n  function sameVnode (oldVnode, vnode) {\r\n    return oldVnode.key === vnode.key && oldVnode.tag === vnode.tag;\r\n  }\r\n\r\n  function removeVnodes (parent, vnodes, startIdx, endIdx) {\r\n    for (let i = startIdx; i <= endIdx; i++) {\r\n      let vnode = vnodes[i];\r\n      let elm = vnode.elm;\r\n      parent.removeChild(elm);\r\n    }\r\n  }\r\n\r\n  function addVnodes (parent, before, vnodes, startIdx, endIdx) {\r\n    for (; startIdx <= endIdx; ++startIdx) {\r\n      let vnode = vnodes[startIdx];\r\n      if (vnode) {\r\n        parent.insertBefore(createElm(vnode), before);\r\n      }\r\n    }\r\n  }\r\n\r\n  function updateChildren (parentElm, oldCh, newCh) {\r\n    if (oldCh === newCh) return;\r\n    let oldStartIdx = 0,\r\n      oldEndIdx = oldCh.length - 1,\r\n      oldStartVnode = oldCh[0],\r\n      oldEndVnode = oldCh[oldEndIdx],\r\n      newStartIdx = 0,\r\n      newEndIdx = newCh.length - 1,\r\n      newStartVnode = newCh[0],\r\n      newEndVnode = newCh[newEndIdx],\r\n      oldKeyToIdx,\r\n      idxInold;\r\n\r\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\r\n      if (oldStartVnode == null) {\r\n        oldStartVnode = oldCh[++oldStartIdx];\r\n      } else if (oldEndVnode == null) {\r\n        oldEndVnode = oldCh[--oldEndIdx];\r\n      } else if (newStartVnode == null) {\r\n        newStartVnode = newCh[++newStartIdx];\r\n      } else if (newEndVnode == null) {\r\n        newEndVnode = newCh[--newEndIdx];\r\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\r\n        patchVnode(oldStartVnode, newStartVnode);\r\n        oldStartVnode = oldCh[++oldStartIdx];\r\n        newStartVnode = newCh[++newStartIdx];\r\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\r\n        patchVnode(oldEndVnode, newEndVnode);\r\n        oldEndVnode = oldCh[--oldEndIdx];\r\n        newEndVnode = newCh[--newEndIdx];\r\n      } else if (sameVnode(oldStartVnode, newEndVnode)) {\r\n        patchVnode(oldStartVnode, newEndVnode);\r\n        parentElm.insertBefore(oldStartVnode.elm, oldEndVnode.elm.nextSibling);\r\n        oldStartVnode = oldCh[++oldStartIdx];\r\n        newEndVnode = newCh[--newEndIdx];\r\n      } else if (sameVnode(oldEndVnode, newStartVnode)) {\r\n        patchVnode(oldEndVnode, newStartVnode);\r\n        parentElm.insertBefore(oldEndVnode.elm, oldStartVnode.elm);\r\n        oldEndVnode = oldCh[--oldEndIdx];\r\n        newStartVnode = newCh[++newStartIdx];\r\n      } else {\r\n        if (oldKeyToIdx === undefined) {\r\n          oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\r\n        }\r\n        idxInold = oldKeyToIdx[newStartVnode.key];\r\n        if (idxInold === undefined) {\r\n          parentElm.insertBefore(createElm(newStartVnode), oldStartVnode.elm);\r\n        } else {\r\n          let moveVnode = oldCh[idxInold];\r\n          if (!sameVnode(moveVnode, newStartVnode)) {\r\n            parentElm.insertBefore(createElm(newStartVnode), oldStartVnode.elm);\r\n          } else {\r\n            patchVnode(moveVnode, newStartVnode);\r\n            parentElm.insertBefore(moveVnode.elm, oldStartVnode.elm);\r\n            oldCh[idxInold] = null;\r\n          }\r\n        }\r\n        newStartVnode = newCh[++newStartIdx];\r\n      }\r\n    }\r\n\r\n    if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\r\n      if (oldStartIdx > oldEndIdx) {\r\n        // 插入剩余新增的子节点\r\n        let before = newCh[newEndIdx + 1] ? newCh[newEndIdx + 1].elm : null;\r\n        addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx);\r\n      } else {\r\n        // 删除废弃的子节点\r\n        removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\r\n      }\r\n    }\r\n  }\r\n\r\n  function createKeyToOldIdx (children, startIdx, endIdx) {\r\n    let map = {};\r\n    for (let i = startIdx; i <= endIdx; i++) {\r\n      let key = children[i].key;\r\n      if (key) {\r\n        map[key] = i;\r\n      }\r\n    }\r\n    return map;\r\n  }\r\n\r\n  function updateProperties (vnode) {\r\n    let props = vnode.data;\r\n    let elm = vnode.elm;\r\n    if (props) {\r\n      if (props.attrs) {\r\n        for (let attr in props.attrs) {\r\n          if (attr === 'style') {\r\n            for (let styleName in props.attrs.style) {\r\n              elm.style[styleName] = props.attrs.style[styleName];\r\n            }\r\n          } else if (attr === 'class') {\r\n            elm.className = props.attrs[attr];\r\n          } else {\r\n            elm.setAttribute(attr, props.attrs[attr]);\r\n          }\r\n        }\r\n      }\r\n      if (props.on) {\r\n        for (let event in props.on) {\r\n          elm.addEventListener(event, props.on[event].bind(vm));\r\n        }\r\n      }\r\n      if (props.domProps) {\r\n        for (let prop in props.domProps) {\r\n          // elm.prop=props.domProps[prop]\r\n          elm.setAttribute(prop, props.domProps[prop]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function updateDOMProps (oldVnode, vnode) {\r\n    if (!oldVnode.data.domProps && !vnode.data.domProps)\r\n      return;\r\n    const elm = vnode.elm;\r\n    let oldProps = oldVnode.data.domProps || {};\r\n    let props = vnode.data.domProps || {};\r\n\r\n    // 清空不在新 VNode 里在老 VNode 的 domProps\r\n    for (let key in oldProps) {\r\n      if (!props[key]) {\r\n        elm[key] = '';\r\n      }\r\n    }\r\n\r\n    for (let key in props) {\r\n      let cur = props[key];\r\n      if (key === 'value') {\r\n        elm[key] = cur;\r\n      } else {\r\n        elm[key] = cur;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Watcher from '../observer/watcher'\r\nimport { patch } from '../vdom/patch'\r\n\r\nexport function mountComponent (vm, el) {\r\n  // const option=vm.$options;\r\n  vm.$el = el;\r\n\r\n  let updateComponent = () => {\r\n    // _render 创建虚拟dom\r\n    // _update 解析虚拟dom并创建真实dom\r\n    let vnode = vm._render();\r\n    vm._update(vnode);\r\n  }\r\n  new Watcher(vm, updateComponent, () => { }, true);\r\n}\r\n\r\nexport function lifecycleMixin (Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this;\r\n    let prevVnode = vm._vnode;\r\n    vm._vnode = vnode;\r\n    if (!prevVnode) {\r\n      vm.$el = vm.__patch__(vm.$el, vnode);\r\n    } else {\r\n      vm.$el = vm.__patch__(prevVnode, vnode);\r\n    }\r\n  }\r\n}","import { initState } from './state'\r\nimport { compileToFunctions } from '../../compiler/index'\r\nimport { mountComponent } from './lifecycle'\r\nimport { createPatchFunction } from '../vdom/patch'\r\n\r\nexport function initMixin (Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this;\r\n    vm.$options = options;\r\n\r\n    initState(this);\r\n\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  }\r\n\r\n  Vue.prototype.__patch__ = createPatchFunction;\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this;\r\n    const options = vm.$options;\r\n    el = document.querySelector(el);\r\n    // options.el = el;\r\n\r\n    if (!options.render) {\r\n      let template = options.template;\r\n      if (!template && el) {\r\n        template = el.outerHTML;\r\n      }\r\n      options.render = compileToFunctions(template);\r\n    }\r\n    mountComponent(vm, el);\r\n  }\r\n}","import { createElement, createTextNode } from '../vdom/create-element'\r\n\r\nexport function renderMixin (Vue) {\r\n\r\n  // _c 创建元素的虚拟节点\r\n  // _v 创建文本的虚拟节点\r\n  // _s 文本变量\r\n  Vue.prototype._c = function (tag, data = {}, ...children) {\r\n    return createElement(tag, data, ...children);\r\n  }\r\n  Vue.prototype._v = function (text) {\r\n    return createTextNode(text);\r\n  }\r\n  Vue.prototype._s = function (val) {\r\n    return val == null ? '' : (typeof val === \"object\" ? JSON.stringify(val) : val);\r\n  }\r\n\r\n  Vue.prototype._render = function () {\r\n    const vm = this;\r\n    const { render } = vm.$options;\r\n\r\n    let vnode = render.call(vm);\r\n    return vnode;\r\n  }\r\n}","import { initMixin } from './init'\r\nimport { renderMixin } from './render'\r\nimport { lifecycleMixin } from './lifecycle'\r\nimport { stateMixin } from './state'\r\n\r\nexport default function Vue (options) {\r\n  this._init(options);\r\n}\r\n\r\ninitMixin(Vue);\r\nstateMixin(Vue);\r\nrenderMixin(Vue);\r\nlifecycleMixin(Vue);"],"names":["isObject","obj","def","data","key","value","enumerable","Object","defineProperty","configurable","bind","fn","ctx","a","l","arguments","length","apply","call","unicodeRegExp","bailRE","RegExp","source","parsePath","path","test","segments","split","i","remove","arr","item","index","indexOf","splice","oldArrayMethods","Array","prototype","arrayMethods","create","methods","forEach","method","args","result","inserted","ob","__ob__","slice","observeArray","uid","Dep","id","subs","sub","push","target","addDep","update","observe","Observer","isArray","__proto__","walk","keys","defineReactive","dep","get","depend","set","newVal","notify","has","flushing","queue","waiting","queueWatcher","watcher","setTimeout","flushSchedulerQueue","sort","b","run","Watcher","vm","exprOrFn","callback","options","deps","depIds","Set","getter","e","addSub","add","oldValue","removeSub","initState","$options","props","initMethods","initData","computed","watch","_data","proxy","newValue","stateMixin","Vue","$watch","expOrFn","cb","immediate","unwatchFn","teardown","genAssignmentCode","assignment","ncname","qnameCapture","startTagOpen","startTagClose","endTag","attribute","dirRE","root","currentParent","stack","createASTElement","tagName","attrs","tag","type","children","attrsList","attrsMap","makeAttrsMap","parent","map","name","parseHtml","html","textEnd","startTagMatch","parseStartTag","start","endTagMatch","match","advance","end","text","substring","chars","attr","n","processAttrs","el","list","directives","events","rawName","element","replace","pop","defaultTagRE","fnExpRE","simplePathRE","generate","ast","genChildren","code","genData","genProps","genHandlers","genDomProps","isMethodPath","isFunctionExpression","str","JSON","stringify","c","gen","join","node","tokens","lastIndex","exec","trim","compileToFunctions","template","renderFn","Function","createElement","VNode","undefined","createTextNode","elm","createPatchFunction","oldVnode","vnode","patch","isRealElement","nodeType","sameVnode","patchVnode","emptyNodeAt","parentNode","createElm","insertBefore","removeChild","document","child","appendChild","updateProperties","oldCh","ch","updateChildren","textContent","addVnodes","removeVnodes","updateDOMProps","toLowerCase","vnodes","startIdx","endIdx","before","parentElm","newCh","oldStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newStartIdx","newEndIdx","newStartVnode","newEndVnode","oldKeyToIdx","idxInold","nextSibling","createKeyToOldIdx","moveVnode","styleName","style","className","setAttribute","on","event","addEventListener","domProps","prop","oldProps","cur","mountComponent","$el","updateComponent","_render","_update","lifecycleMixin","prevVnode","_vnode","__patch__","initMixin","_init","$mount","querySelector","render","outerHTML","renderMixin","_c","_v","_s","val"],"mappings":"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"}
{"version":3,"file":"vue.js","sources":["../../src/core/util/index.js","../../src/core/observer/array.js","../../src/core/observer/dep.js","../../src/core/observer/index.js","../../src/core/instance/state.js","../../src/compiler/directives/model.js","../../src/compiler/parser-html.js","../../src/compiler/codegen/index.js","../../src/compiler/index.js","../../src/core/observer/scheduler.js","../../src/core/observer/watcher.js","../../src/core/vdom/create-element.js","../../src/core/vdom/patch.js","../../src/core/instance/lifecycle.js","../../src/core/instance/init.js","../../src/core/instance/render.js","../../src/core/instance/index.js"],"sourcesContent":["export function isObject (obj) {\r\n  return obj !== null && typeof obj === 'object';\r\n}\r\n\r\nexport function def (data, key, value, enumerable) {\r\n  Object.defineProperty(data, key, {\r\n    value: value,\r\n    enumerable: !!enumerable,\r\n    configurable: true\r\n  })\r\n}\r\n\r\nexport function bind (fn, ctx) {\r\n  return function (a) {\r\n    var l = arguments.length\r\n    return l\r\n      ? l > 1\r\n        ? fn.apply(ctx, arguments)\r\n        : fn.call(ctx, a)\r\n      : fn.call(ctx)\r\n  }\r\n}\r\n\r\nexport const unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/\r\n\r\nconst bailRE = new RegExp(`[^${unicodeRegExp.source}.$_\\\\d]`)\r\nexport function parsePath (path) {\r\n  if (bailRE.test(path)) {\r\n    return\r\n  }\r\n  const segments = path.split('.')\r\n  return function (obj) {\r\n    for (let i = 0; i < segments.length; i++) {\r\n      if (!obj) return\r\n      obj = obj[segments[i]]\r\n    }\r\n    return obj\r\n  }\r\n}\r\n\r\n","const oldArrayMethods = Array.prototype;\r\nexport const arrayMethods = Object.create(oldArrayMethods)\r\n\r\nconst methods = ['push', 'shift', 'unshift', 'pop', 'reverse', 'sort', 'splice'];\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[method] = function (...args) {\r\n    const result = oldArrayMethods[method].apply(this, args); // 调用原生数组方法\r\n    let inserted;\r\n    const ob = this.__ob__;\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args;\r\n        break;\r\n      case 'splice':\r\n        inserted = args.slice(2);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (inserted) {\r\n      ob.observeArray(inserted);\r\n    }\r\n    return result;\r\n  }\r\n});\r\n","let uid = 0;\r\n\r\nexport default class Dep {\r\n  constructor() {\r\n    this.id = uid++;\r\n    this.subs = [];\r\n  }\r\n\r\n  addSub (sub) {\r\n    this.subs.push(sub);\r\n  }\r\n\r\n  removeSub (sub) {\r\n    remove(this.subs, sub);\r\n  }\r\n\r\n  depend () {\r\n    if (Dep.target) {\r\n      Dep.target.addDep(this);\r\n    }\r\n  }\r\n\r\n  notify () {\r\n    const subs = this.subs.slice();\r\n    for (let i = 0; i < subs.length; i++) {\r\n      subs[i].update();\r\n    }\r\n  }\r\n}\r\n\r\nDep.target = null\r\nconst targetStack = []\r\n\r\nexport function pushTarget (target) {\r\n  targetStack.push(target);\r\n  Dep.target = target;\r\n}\r\n\r\nexport function popTarget () {\r\n  targetStack.pop();\r\n  Dep.target = targetStack[targetStack.length - 1];\r\n}\r\n","import { isObject, def } from '../util/index';\r\nimport { arrayMethods } from './array';\r\nimport Dep from './dep';\r\n\r\nexport function observe (data) {\r\n  if (!isObject(data)) return;\r\n  return new Observer(data);\r\n}\r\n\r\nexport class Observer {\r\n  constructor(data) {\r\n    // 给 data 挂载 Observer 实例\r\n    // 这里的作用是方便数组操作时调用 Observer 实例的 observeArray 方法\r\n    def(data, '__ob__', this, false);\r\n\r\n    if (Array.isArray(data)) {\r\n      this.observeArray(data);\r\n      data.__proto__ = arrayMethods;\r\n    } else {\r\n      this.walk(data);\r\n    }\r\n  }\r\n  walk (data) {\r\n    Object.keys(data).forEach(key => {\r\n      let value = data[key];\r\n      defineReactive(data, key, value);\r\n    });\r\n  }\r\n  observeArray (data) {\r\n    for (let i = 0; i < data.length; i++) {\r\n      observe(data[i]);\r\n    }\r\n  }\r\n}\r\n\r\nfunction defineReactive (data, key, value) {\r\n  const dep = new Dep();\r\n  observe(value); // 递归调用\r\n  Object.defineProperty(data, key, {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get () {\r\n      if (Dep.target) {\r\n        dep.depend();\r\n      }\r\n      return value;\r\n    },\r\n    set (newVal) {\r\n      if (newVal === value) return;\r\n      value = newVal;\r\n      dep.notify();\r\n    }\r\n  })\r\n}\r\n","import { observe } from '../observer/index'\r\nimport { bind } from '../util/index'\r\n\r\nfunction initState (vm) {\r\n  const options = vm.$options;\r\n  if (options.props) {\r\n    initProps();\r\n  }\r\n  if (options.methods) {\r\n    initMethods(vm);\r\n  }\r\n  if (options.data) {\r\n    initData(vm);\r\n  }\r\n  if (options.computed) {\r\n    initComputed();\r\n  }\r\n  if (options.watch) {\r\n    initWatch();\r\n  }\r\n}\r\n\r\nfunction initProps () { }\r\n\r\nfunction initMethods (vm) {\r\n  const methods = vm.$options.methods;\r\n  if (methods) {\r\n    for (let key in methods) {\r\n      vm[key] = bind(methods[key], vm);\r\n    }\r\n  }\r\n}\r\n\r\nfunction initData (vm) {\r\n  let data = vm.$options.data;\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data || {};\r\n\r\n  Object.keys(data).forEach((key) => {\r\n    proxy(vm, '_data', key);\r\n  });\r\n  observe(data);\r\n}\r\n\r\nfunction proxy (vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    configurable: true,\r\n    enumerable: true,\r\n    get () {\r\n      return vm[source][key];\r\n    },\r\n    set (newValue) {\r\n      vm[source][key] = newValue;\r\n    }\r\n  })\r\n}\r\n\r\n\r\nfunction initComputed () { }\r\n\r\nfunction initWatch () { }\r\n\r\nexport { initState };","export function genAssignmentCode (value, assignment) {\r\n\r\n  return (value + \"=\" + assignment);\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst doctype = /^<!DOCTYPE [^>]+>/i;\r\nconst dirRE = /^v-|^@/;\r\n\r\nimport { genAssignmentCode } from './directives/model.js';\r\n\r\nlet root = null;\r\nlet currentParent = null;\r\nlet stack = [];\r\n\r\nfunction createASTElement (tagName, attrs) {\r\n  return {\r\n    tag: tagName,\r\n    type: 1,\r\n    children: [],\r\n    attrsList: attrs,\r\n    attrsMap: makeAttrsMap(attrs),\r\n    parent: null\r\n  }\r\n}\r\n\r\nfunction makeAttrsMap (attrs) {\r\n  let map = {};\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    map[attrs[i].name] = attrs[i].value;\r\n  }\r\n  return map;\r\n}\r\n\r\nexport function parseHtml (html) {\r\n  while (html) {\r\n    let textEnd = html.indexOf('<');\r\n    if (textEnd === 0) {\r\n      let startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n      } else {\r\n        let endTagMatch = html.match(endTag);\r\n        if (endTagMatch) {\r\n          advance(endTagMatch[0].length);\r\n          end(endTagMatch[1]);\r\n        }\r\n      }\r\n    }\r\n    let text;\r\n    if (textEnd >= 0) {\r\n      text = html.substring(0, textEnd);\r\n    }\r\n    if (text) {\r\n      advance(text.length);\r\n      chars(text);\r\n    }\r\n  }\r\n\r\n  function parseStartTag () {\r\n    let start = html.match(startTagOpen);\r\n    if (start) {\r\n      const match = { tagName: start[1], attrs: [] };\r\n      advance(start[0].length);\r\n\r\n      let end, attr;\r\n      // 获取标签属性\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        advance(attr[0].length);\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5]\r\n        });\r\n      }\r\n      if (end) {\r\n        advance(end[0].length);\r\n      }\r\n\r\n      return match;\r\n    }\r\n  }\r\n\r\n  function advance (n) {\r\n    html = html.substring(n);\r\n  }\r\n\r\n  return root;\r\n}\r\n\r\nfunction processAttrs (el) {\r\n  let list = el.attrsList;\r\n  el.attrs = el.attrs ? el.attrs : [];\r\n  el.directives = el.directives ? el.directives : [];\r\n  el.props = el.props ? el.props : [];\r\n  el.events = el.events ? el.events : {};\r\n\r\n  for (let i = 0; i < list.length; i++) {\r\n    let name = list[i].name;\r\n    let value = list[i].value;\r\n    if (dirRE.test(name)) {\r\n      if (/v-model/.test(name) && el.tag === 'input') {\r\n        el.directives.push({ name: 'model', rawName: 'v-model', value: value });\r\n        el.events['input'] = genAssignmentCode(value, '$event.target.value');\r\n        el.props.push({ name: 'value', value: value });\r\n      }\r\n      if (/@click/.test(name)) {\r\n        el.events['click'] = value;\r\n      }\r\n    } else {\r\n      el.attrs.push({ name: name, value: value });\r\n    }\r\n  }\r\n}\r\n\r\n// 处理开始标签\r\nfunction start (tagName, attrs) {\r\n  let element = createASTElement(tagName, attrs);\r\n  processAttrs(element);\r\n  if (!root) {\r\n    root = element;\r\n  }\r\n  currentParent = element;\r\n  stack.push(element);\r\n  if (tagName === 'input') {\r\n    end(tagName);\r\n  }\r\n}\r\n\r\n// 处理文本\r\nfunction chars (text) {\r\n  text = text.replace(/\\s/g, '');\r\n  if (text) {\r\n    currentParent.children.push({\r\n      text: text,\r\n      type: 3\r\n    });\r\n  }\r\n}\r\n\r\n// 处理结束标签\r\nfunction end (tagName) {\r\n  let element = stack.pop();\r\n  currentParent = stack[stack.length - 1];\r\n  if (currentParent) {\r\n    element.parent = currentParent;\r\n    currentParent.children.push(element);\r\n  }\r\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\nconst fnExpRE = /^([\\w$_]+|\\([^)]*?\\))\\s*=>|^function(?:\\s+[\\w$]+)?\\s*\\(/;\r\nconst fnInvokeRE = /\\([^)]*?\\);*$/;\r\nconst simplePathRE = /^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['[^']*?']|\\[\"[^\"]*?\"]|\\[\\d+]|\\[[A-Za-z_$][\\w$]*])*$/;\r\n\r\nexport function generate (ast) {\r\n  let children = genChildren(ast);\r\n  let code = `_c(\"${ast.tag}\",\r\n  ${ast.attrsList.length ? genData(ast) : 'undefined'}\r\n  ${children ? `,${children}` : ''}\r\n  )`;\r\n\r\n  return code;\r\n}\r\n\r\nfunction genData (ast) {\r\n  let data = '{';\r\n  if (ast.attrs) {\r\n    data += \"attrs:\" + genProps(ast.attrs) + \",\";\r\n  }\r\n  if (ast.events) {\r\n    data += \"on:\" + genHandlers(ast.events) + \",\";\r\n  }\r\n  if (ast.props) {\r\n    data += \"domProps:\" + genDomProps(ast.props) + \",\";\r\n  }\r\n\r\n  data = data.replace(/,$/, '');\r\n  // data += \"attrs:\" + genProps(attrs.filter(item => !item.name.startsWith('@'))) + \",\";\r\n  // let events = attrs.filter(item => item.name.startsWith('@'));\r\n  // if (events && events.length) {\r\n  //   data += \"on:\" + genHandlers(events);\r\n  // }\r\n  data += '}';\r\n  return data;\r\n}\r\n\r\nfunction genHandlers (events) {\r\n  let data = '';\r\n  Object.keys(events).forEach(key => {\r\n\r\n    let isMethodPath = simplePathRE.test(events[key]);\r\n    let isFunctionExpression = fnExpRE.test(events[key]);\r\n    // let isFunctionInvocation = simplePathRE.test(handler.value.replace(fnInvokeRE, ''));\r\n\r\n    if (isMethodPath || isFunctionExpression) {\r\n      data += `\"${key}\":${events[key]},`;\r\n    } else {\r\n      data += `\"${key}\":function ($event){ ${events[key]} },`;\r\n    }\r\n  })\r\n  data = data.replace(/,$/, '');\r\n\r\n  return `{${data}}`;\r\n}\r\n\r\nfunction genDomProps (props) {\r\n  let data = '{';\r\n  for (var i = 0; i < props.length; i++) {\r\n    data += `\"${props[i].name}\":${props[i].value},`;\r\n    // if (ast.elm) {\r\n    //   ast.elm[ast.props[i].name] = ast.props[i].value;\r\n    // }\r\n  }\r\n\r\n  data = data.replace(/,$/, '');\r\n  data += '}';\r\n  return data;\r\n}\r\n\r\nfunction genProps (attrs) {\r\n  let str = '';\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i];\r\n    if (attr.name === \"style\") {\r\n      let obj = {};\r\n      attr.value.split(\";\").forEach(item => {\r\n        let [key, value] = item.split(\":\");\r\n        obj[key] = value;\r\n      });\r\n      attr.value = obj;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\nfunction genChildren (ast) {\r\n  let children = ast.children;\r\n  if (children && children.length > 0) {\r\n    return `${children.map(c => gen(c)).join(',')}`;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction gen (node) {\r\n  if (node.type === 1) {\r\n    return generate(node);\r\n  } else {\r\n    let text = node.text;\r\n    let tokens = [];\r\n    let match, index;\r\n    let lastIndex = defaultTagRE.lastIndex = 0;\r\n    while (match = defaultTagRE.exec(text)) {\r\n      index = match.index;\r\n      if (index > lastIndex) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n      }\r\n      tokens.push(`_s(${match[1].trim()})`);\r\n      lastIndex = index + match[0].length;\r\n    }\r\n    if (lastIndex < text.length) {\r\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n    }\r\n    return `_v(${tokens.join('+')})`;\r\n  }\r\n}","import { parseHtml } from './parser-html';\r\nimport { generate } from './codegen/index';\r\n\r\nexport function compileToFunctions (template) {\r\n  let root = parseHtml(template);\r\n  let code = generate(root);\r\n\r\n  let renderFn = new Function(`with(this){return ${code}}`);\r\n\r\n  return renderFn;\r\n}","let has = {};\r\nlet flushing = false;\r\nlet queue = [];\r\nlet index = 0;\r\nlet waiting = false;\r\n\r\nexport function queueWatcher (watcher) {\r\n  let id = watcher.id;\r\n  if (!has[id]) {\r\n    has[id] = true;\r\n    if (!flushing) {\r\n      queue.push(watcher);\r\n    } else {\r\n      // 执行 flushSchedulerQueue 过程中插入 watcher\r\n      let i = queue.length - 1;\r\n      // 按从小到大排列 插入id\r\n      while (i > index && queue[index].id > id) i--;\r\n      queue.splice(i + 1, 0, watcher);\r\n    }\r\n    if (!waiting) {\r\n      waiting = true;\r\n      setTimeout(flushSchedulerQueue, 0);\r\n    }\r\n  }\r\n}\r\n\r\nfunction flushSchedulerQueue () {\r\n  flushing = true;\r\n  queue.sort((a, b) => a.id - b.id);\r\n  for (index = 0; index < queue.length; index++) {\r\n    let watcher = queue[index];\r\n    has[watcher.id] = null;\r\n    watcher.run();\r\n  }\r\n  index = queue.length = 0;\r\n  has = {};\r\n  flushing = waiting = false;\r\n}\r\n","import Dep, { pushTarget, popTarget } from './dep';\r\nimport { parsePath } from '../util/index'\r\nimport { queueWatcher } from './scheduler'\r\n\r\nlet uid = 0\r\n\r\nclass Watcher {\r\n  constructor(vm, exprOrFn, callback, options) {\r\n    this.vm = vm;\r\n    this.callback = callback;\r\n    this.options = options;\r\n    this.depIds = new Set();\r\n    this.id = ++uid;\r\n\r\n    if (typeof exprOrFn === 'function') {\r\n      this.getter = exprOrFn\r\n    } else {\r\n      this.getter = parsePath(exprOrFn)\r\n    }\r\n\r\n    this.value = this.get();\r\n  }\r\n  get () {\r\n    pushTarget(this);\r\n    let value = '';\r\n    try {\r\n      value = this.getter.call(this.vm, this.vm);\r\n    } catch (e) {\r\n\r\n    } finally {\r\n      popTarget();\r\n    }\r\n    return value;\r\n  }\r\n\r\n  addDep (dep) {\r\n    if (!this.depIds.has(dep.id)) {\r\n      dep.addSub(this);\r\n      this.depIds.add(dep.id);\r\n    }\r\n  }\r\n\r\n  run () {\r\n    let value = this.getter.call(this.vm, this.vm);\r\n    if (value !== this.value) {\r\n      let oldValue = this.value;\r\n      this.value = value;\r\n      this.callback.call(this.vm, this.value, oldValue);\r\n    }\r\n  }\r\n\r\n  update () {\r\n    queueWatcher(this);\r\n  }\r\n}\r\n\r\nexport default Watcher","export function createElement (tag, data = {}, ...children) {\r\n  let key = data.key;\r\n  if (key) {\r\n    delete data.key;\r\n  }\r\n  return VNode(tag, data, key, children, undefined);\r\n}\r\n\r\nexport function createTextNode (text) {\r\n  return VNode(undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\nexport function VNode (tag, data, key, children, text, elm) {\r\n  return {\r\n    tag: tag,\r\n    data: data,\r\n    key: key,\r\n    children: children,\r\n    text: text,\r\n    elm: elm\r\n  };\r\n}","import { VNode } from './create-element'\r\n\r\nexport function createPatchFunction (oldVnode, vnode) {\r\n  const vm = this;\r\n  return patch(oldVnode, vnode);\r\n\r\n  function patch (oldVnode, vnode) {\r\n    const isRealElement = oldVnode.nodeType; // 虚拟dom没有nodeType属性，真实dom才有\r\n    // let parent = vm.$el.parentNode;\r\n    // const oldElm = oldVnode;\r\n    // const parentElm = oldElm.parentNode;\r\n\r\n    // let el = createElm(vnode);\r\n    // parent.appendChild(el);\r\n    // if (isRealElement) {\r\n    //   parentElm.removeChild(oldElm);\r\n    // }\r\n    if (!isRealElement && sameVnode(oldVnode, vnode)) {\r\n      patchVnode(oldVnode, vnode);\r\n    } else {\r\n      if (isRealElement) {\r\n        oldVnode = emptyNodeAt(oldVnode);\r\n      }\r\n      let elm = oldVnode.elm;\r\n      let parent = elm.parentNode;\r\n      createElm(vnode);\r\n      parent.insertBefore(vnode.elm, elm);\r\n      parent.removeChild(elm);\r\n    }\r\n    return vnode.elm;\r\n  }\r\n\r\n  function createElm (vnode) {\r\n    let { tag, data, key, children, text } = vnode;\r\n\r\n    if (typeof tag === 'string') {\r\n      vnode.elm = document.createElement(tag);\r\n      children.forEach(child => {\r\n        return vnode.elm.appendChild(createElm(child));\r\n      })\r\n      updateProperties(vnode);\r\n    } else {\r\n      vnode.elm = document.createTextNode(text);\r\n    }\r\n    return vnode.elm;\r\n  }\r\n\r\n  function patchVnode (oldVnode, vnode) {\r\n    if (oldVnode === vnode) return;\r\n\r\n    const elm = vnode.elm = oldVnode.elm;\r\n    const oldCh = oldVnode.children;\r\n    const ch = vnode.children;\r\n\r\n    if (!vnode.text) { // 判断是否为文本\r\n      if (oldCh && ch) { // 是否有子节点\r\n        updateChildren(elm, oldCh, ch);\r\n      } else if (ch) {\r\n        if (oldCh.text) {\r\n          elm.textContent = '';\r\n        }\r\n        addVnodes(elm, null, ch, 0, ch.length - 1);\r\n      } else if (oldCh) {\r\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\r\n      } else {\r\n        elm.textContent = '';\r\n      }\r\n      updateDOMProps(oldVnode, vnode);\r\n    } else {\r\n      if (oldCh) {\r\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\r\n      }\r\n      elm.textContent = vnode.text;\r\n    }\r\n  }\r\n\r\n  function emptyNodeAt (elm) {\r\n    return new VNode(elm.tagName.toLowerCase(), {}, [], undefined, undefined, elm);\r\n  }\r\n\r\n  function sameVnode (oldVnode, vnode) {\r\n    return oldVnode.key === vnode.key && oldVnode.tag === vnode.tag;\r\n  }\r\n\r\n  function removeVnodes (parent, vnodes, startIdx, endIdx) {\r\n    for (let i = startIdx; i <= endIdx; i++) {\r\n      let vnode = vnodes[i];\r\n      let elm = vnode.elm;\r\n      parent.removeChild(elm);\r\n    }\r\n  }\r\n\r\n  function addVnodes (parent, before, vnodes, startIdx, endIdx) {\r\n    for (; startIdx <= endIdx; ++startIdx) {\r\n      let vnode = vnodes[startIdx];\r\n      if (vnode) {\r\n        parent.insertBefore(createElm(vnode), before);\r\n      }\r\n    }\r\n  }\r\n\r\n  function updateChildren (parentElm, oldCh, newCh) {\r\n    if (oldCh === newCh) return;\r\n    let oldStartIdx = 0,\r\n      oldEndIdx = oldCh.length - 1,\r\n      oldStartVnode = oldCh[0],\r\n      oldEndVnode = oldCh[oldEndIdx],\r\n      newStartIdx = 0,\r\n      newEndIdx = newCh.length - 1,\r\n      newStartVnode = newCh[0],\r\n      newEndVnode = newCh[newEndIdx],\r\n      oldKeyToIdx,\r\n      idxInold;\r\n\r\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\r\n      if (oldStartVnode == null) {\r\n        oldStartVnode = oldCh[++oldStartIdx];\r\n      } else if (oldEndVnode == null) {\r\n        oldEndVnode = oldCh[--oldEndIdx];\r\n      } else if (newStartVnode == null) {\r\n        newStartVnode = newCh[++newStartIdx];\r\n      } else if (newEndVnode == null) {\r\n        newEndVnode = newCh[--newEndIdx];\r\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\r\n        patchVnode(oldStartVnode, newStartVnode);\r\n        oldStartVnode = oldCh[++oldStartIdx];\r\n        newStartVnode = newCh[++newStartIdx];\r\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\r\n        patchVnode(oldEndVnode, newEndVnode);\r\n        oldEndVnode = oldCh[--oldEndIdx];\r\n        newEndVnode = newCh[--newEndIdx];\r\n      } else if (sameVnode(oldStartVnode, newEndVnode)) {\r\n        patchVnode(oldStartVnode, newEndVnode);\r\n        parentElm.insertBefore(oldStartVnode.elm, oldEndVnode.elm.nextSibling);\r\n        oldStartVnode = oldCh[++oldStartIdx];\r\n        newEndVnode = newCh[--newEndIdx];\r\n      } else if (sameVnode(oldEndVnode, newStartVnode)) {\r\n        patchVnode(oldEndVnode, newStartVnode);\r\n        parentElm.insertBefore(oldEndVnode.elm, oldStartVnode.elm);\r\n        oldEndVnode = oldCh[--oldEndIdx];\r\n        newStartVnode = newCh[++newStartIdx];\r\n      } else {\r\n        if (oldKeyToIdx === undefined) {\r\n          oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\r\n        }\r\n        idxInold = oldKeyToIdx[newStartVnode.key];\r\n        if (idxInold === undefined) {\r\n          parentElm.insertBefore(createElm(newStartVnode), oldStartVnode.elm);\r\n        } else {\r\n          let moveVnode = oldCh[idxInold];\r\n          if (!sameVnode(moveVnode, newStartVnode)) {\r\n            parentElm.insertBefore(createElm(newStartVnode), oldStartVnode.elm);\r\n          } else {\r\n            patchVnode(moveVnode, newStartVnode);\r\n            parentElm.insertBefore(moveVnode.elm, oldStartVnode.elm);\r\n            oldCh[idxInold] = null;\r\n          }\r\n        }\r\n        newStartVnode = newCh[++newStartIdx];\r\n      }\r\n    }\r\n\r\n    if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\r\n      if (oldStartIdx > oldEndIdx) {\r\n        // 插入剩余新增的子节点\r\n        let before = newCh[newEndIdx + 1] ? newCh[newEndIdx + 1].elm : null;\r\n        addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx);\r\n      } else {\r\n        // 删除废弃的子节点\r\n        removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\r\n      }\r\n    }\r\n  }\r\n\r\n  function createKeyToOldIdx (children, startIdx, endIdx) {\r\n    let map = {};\r\n    for (let i = startIdx; i <= endIdx; i++) {\r\n      let key = children[i].key;\r\n      if (key) {\r\n        map[key] = i;\r\n      }\r\n    }\r\n    return map;\r\n  }\r\n\r\n  function updateProperties (vnode) {\r\n    let props = vnode.data;\r\n    let elm = vnode.elm;\r\n    if (props) {\r\n      if (props.attrs) {\r\n        for (let attr in props.attrs) {\r\n          if (attr === 'style') {\r\n            for (let styleName in props.attrs.style) {\r\n              elm.style[styleName] = props.attrs.style[styleName];\r\n            }\r\n          } else if (attr === 'class') {\r\n            elm.className = props.attrs[attr];\r\n          } else {\r\n            elm.setAttribute(attr, props.attrs[attr]);\r\n          }\r\n        }\r\n      }\r\n      if (props.on) {\r\n        for (let event in props.on) {\r\n          elm.addEventListener(event, props.on[event].bind(vm));\r\n        }\r\n      }\r\n      if (props.domProps) {\r\n        for (let prop in props.domProps) {\r\n          // elm.prop=props.domProps[prop]\r\n          elm.setAttribute(prop, props.domProps[prop]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function updateDOMProps (oldVnode, vnode) {\r\n    if (!oldVnode.data.domProps && !vnode.data.domProps)\r\n      return;\r\n    const elm = vnode.elm;\r\n    let oldProps = oldVnode.data.domProps || {};\r\n    let props = vnode.data.domProps || {};\r\n\r\n    // 清空不在新 VNode 里在老 VNode 的 domProps\r\n    for (let key in oldProps) {\r\n      if (!props[key]) {\r\n        elm[key] = '';\r\n      }\r\n    }\r\n\r\n    for (let key in props) {\r\n      let cur = props[key];\r\n      if (key === 'value') {\r\n        elm[key] = cur;\r\n      } else {\r\n        elm[key] = cur;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Watcher from '../observer/watcher'\r\nimport { patch } from '../vdom/patch'\r\n\r\nexport function mountComponent (vm, el) {\r\n  // const option=vm.$options;\r\n  vm.$el = el;\r\n\r\n  let updateComponent = () => {\r\n    // _render 创建虚拟dom\r\n    // _update 解析虚拟dom并创建真实dom\r\n    let vnode = vm._render();\r\n    vm._update(vnode);\r\n  }\r\n  new Watcher(vm, updateComponent, () => { }, true);\r\n}\r\n\r\nexport function lifecycleMixin (Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this;\r\n    let prevVnode = vm._vnode;\r\n    vm._vnode = vnode;\r\n    if (!prevVnode) {\r\n      vm.$el = vm.__patch__(vm.$el, vnode);\r\n    } else {\r\n      vm.$el = vm.__patch__(prevVnode, vnode);\r\n    }\r\n  }\r\n}","import { initState } from './state'\r\nimport { compileToFunctions } from '../../compiler/index'\r\nimport { mountComponent } from './lifecycle'\r\nimport { createPatchFunction } from '../vdom/patch'\r\n\r\nexport function initMixin (Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this;\r\n    vm.$options = options;\r\n\r\n    initState(this);\r\n\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  }\r\n\r\n  Vue.prototype.__patch__ = createPatchFunction;\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this;\r\n    const options = vm.$options;\r\n    el = document.querySelector(el);\r\n    // options.el = el;\r\n\r\n    if (!options.render) {\r\n      let template = options.template;\r\n      if (!template && el) {\r\n        template = el.outerHTML;\r\n      }\r\n      options.render = compileToFunctions(template);\r\n    }\r\n    mountComponent(vm, el);\r\n  }\r\n}","import { createElement, createTextNode } from '../vdom/create-element'\r\n\r\nexport function renderMixin (Vue) {\r\n\r\n  // _c 创建元素的虚拟节点\r\n  // _v 创建文本的虚拟节点\r\n  // _s 文本变量\r\n  Vue.prototype._c = function (tag, data = {}, ...children) {\r\n    return createElement(tag, data, ...children);\r\n  }\r\n  Vue.prototype._v = function (text) {\r\n    return createTextNode(text);\r\n  }\r\n  Vue.prototype._s = function (val) {\r\n    return val == null ? '' : (typeof val === \"object\" ? JSON.stringify(val) : val);\r\n  }\r\n\r\n  Vue.prototype._render = function () {\r\n    const vm = this;\r\n    const { render } = vm.$options;\r\n\r\n    let vnode = render.call(vm);\r\n    return vnode;\r\n  }\r\n}","import { initMixin } from './init'\r\nimport { renderMixin } from './render'\r\nimport { lifecycleMixin } from './lifecycle'\r\n\r\nexport default function Vue (options) {\r\n  this._init(options);\r\n}\r\n\r\ninitMixin(Vue);\r\nrenderMixin(Vue);\r\nlifecycleMixin(Vue);"],"names":["isObject","obj","def","data","key","value","enumerable","Object","defineProperty","configurable","bind","fn","ctx","a","l","arguments","length","apply","call","unicodeRegExp","bailRE","RegExp","source","parsePath","path","test","segments","split","i","oldArrayMethods","Array","prototype","arrayMethods","create","methods","forEach","method","args","result","inserted","ob","__ob__","slice","observeArray","uid","Dep","id","subs","sub","push","remove","target","addDep","update","targetStack","pushTarget","popTarget","pop","observe","Observer","isArray","__proto__","walk","keys","defineReactive","dep","get","depend","set","newVal","notify","initState","vm","options","$options","props","initMethods","initData","computed","watch","_data","proxy","newValue","genAssignmentCode","assignment","ncname","qnameCapture","startTagOpen","startTagClose","endTag","attribute","dirRE","root","currentParent","stack","createASTElement","tagName","attrs","tag","type","children","attrsList","attrsMap","makeAttrsMap","parent","map","name","parseHtml","html","textEnd","indexOf","startTagMatch","parseStartTag","start","endTagMatch","match","advance","end","text","substring","chars","attr","n","processAttrs","el","list","directives","events","rawName","element","replace","defaultTagRE","fnExpRE","simplePathRE","generate","ast","genChildren","code","genData","genProps","genHandlers","genDomProps","isMethodPath","isFunctionExpression","str","item","JSON","stringify","c","gen","join","node","tokens","index","lastIndex","exec","trim","compileToFunctions","template","renderFn","Function","has","flushing","queue","waiting","queueWatcher","watcher","splice","setTimeout","flushSchedulerQueue","sort","b","run","Watcher","exprOrFn","callback","depIds","Set","getter","e","addSub","add","oldValue","createElement","VNode","undefined","createTextNode","elm","createPatchFunction","oldVnode","vnode","patch","isRealElement","nodeType","sameVnode","patchVnode","emptyNodeAt","parentNode","createElm","insertBefore","removeChild","document","child","appendChild","updateProperties","oldCh","ch","updateChildren","textContent","addVnodes","removeVnodes","updateDOMProps","toLowerCase","vnodes","startIdx","endIdx","before","parentElm","newCh","oldStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newStartIdx","newEndIdx","newStartVnode","newEndVnode","oldKeyToIdx","idxInold","nextSibling","createKeyToOldIdx","moveVnode","styleName","style","className","setAttribute","on","event","addEventListener","domProps","prop","oldProps","cur","mountComponent","$el","updateComponent","_render","_update","lifecycleMixin","Vue","prevVnode","_vnode","__patch__","initMixin","_init","$mount","querySelector","render","outerHTML","renderMixin","_c","_v","_s","val"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,SAASA,QAAT,CAAmBC,GAAnB,EAAwB;EAC7B,SAAOA,GAAG,KAAK,IAAR,IAAgB,QAAOA,GAAP,MAAe,QAAtC;EACD;EAEM,SAASC,GAAT,CAAcC,IAAd,EAAoBC,GAApB,EAAyBC,KAAzB,EAAgCC,UAAhC,EAA4C;EACjDC,EAAAA,MAAM,CAACC,cAAP,CAAsBL,IAAtB,EAA4BC,GAA5B,EAAiC;EAC/BC,IAAAA,KAAK,EAAEA,KADwB;EAE/BC,IAAAA,UAAU,EAAE,CAAC,CAACA,UAFiB;EAG/BG,IAAAA,YAAY,EAAE;EAHiB,GAAjC;EAKD;EAEM,SAASC,IAAT,CAAeC,EAAf,EAAmBC,GAAnB,EAAwB;EAC7B,SAAO,UAAUC,CAAV,EAAa;EAClB,QAAIC,CAAC,GAAGC,SAAS,CAACC,MAAlB;EACA,WAAOF,CAAC,GACJA,CAAC,GAAG,CAAJ,GACEH,EAAE,CAACM,KAAH,CAASL,GAAT,EAAcG,SAAd,CADF,GAEEJ,EAAE,CAACO,IAAH,CAAQN,GAAR,EAAaC,CAAb,CAHE,GAIJF,EAAE,CAACO,IAAH,CAAQN,GAAR,CAJJ;EAKD,GAPD;EAQD;EAEM,IAAMO,aAAa,GAAG,6JAAtB;EAEP,IAAMC,MAAM,GAAG,IAAIC,MAAJ,aAAgBF,aAAa,CAACG,MAA9B,aAAf;EACO,SAASC,SAAT,CAAoBC,IAApB,EAA0B;EAC/B,MAAIJ,MAAM,CAACK,IAAP,CAAYD,IAAZ,CAAJ,EAAuB;EACrB;EACD;;EACD,MAAME,QAAQ,GAAGF,IAAI,CAACG,KAAL,CAAW,GAAX,CAAjB;EACA,SAAO,UAAU1B,GAAV,EAAe;EACpB,SAAK,IAAI2B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,QAAQ,CAACV,MAA7B,EAAqCY,CAAC,EAAtC,EAA0C;EACxC,UAAI,CAAC3B,GAAL,EAAU;EACVA,MAAAA,GAAG,GAAGA,GAAG,CAACyB,QAAQ,CAACE,CAAD,CAAT,CAAT;EACD;;EACD,WAAO3B,GAAP;EACD,GAND;EAOD;;ECtCD,IAAM4B,eAAe,GAAGC,KAAK,CAACC,SAA9B;EACO,IAAMC,YAAY,GAAGzB,MAAM,CAAC0B,MAAP,CAAcJ,eAAd,CAArB;EAEP,IAAMK,OAAO,GAAG,CAAC,MAAD,EAAS,OAAT,EAAkB,SAAlB,EAA6B,KAA7B,EAAoC,SAApC,EAA+C,MAA/C,EAAuD,QAAvD,CAAhB;EAEAA,OAAO,CAACC,OAAR,CAAgB,UAAAC,MAAM,EAAI;EACxBJ,EAAAA,YAAY,CAACI,MAAD,CAAZ,GAAuB,YAAmB;EAAA,sCAANC,IAAM;EAANA,MAAAA,IAAM;EAAA;;EACxC,QAAMC,MAAM,GAAGT,eAAe,CAACO,MAAD,CAAf,CAAwBnB,KAAxB,CAA8B,IAA9B,EAAoCoB,IAApC,CAAf,CADwC;;EAExC,QAAIE,QAAJ;EACA,QAAMC,EAAE,GAAG,KAAKC,MAAhB;;EACA,YAAQL,MAAR;EACE,WAAK,MAAL;EACA,WAAK,SAAL;EACEG,QAAAA,QAAQ,GAAGF,IAAX;EACA;;EACF,WAAK,QAAL;EACEE,QAAAA,QAAQ,GAAGF,IAAI,CAACK,KAAL,CAAW,CAAX,CAAX;EACA;EAPJ;;EAWA,QAAIH,QAAJ,EAAc;EACZC,MAAAA,EAAE,CAACG,YAAH,CAAgBJ,QAAhB;EACD;;EACD,WAAOD,MAAP;EACD,GAnBD;EAoBD,CArBD;;ECLA,IAAIM,GAAG,GAAG,CAAV;;MAEqBC;EACnB,iBAAc;EAAA;;EACZ,SAAKC,EAAL,GAAUF,GAAG,EAAb;EACA,SAAKG,IAAL,GAAY,EAAZ;EACD;;;;6BAEOC,KAAK;EACX,WAAKD,IAAL,CAAUE,IAAV,CAAeD,GAAf;EACD;;;gCAEUA,KAAK;EACdE,MAAAA,MAAM,CAAC,KAAKH,IAAN,EAAYC,GAAZ,CAAN;EACD;;;+BAES;EACR,UAAIH,GAAG,CAACM,MAAR,EAAgB;EACdN,QAAAA,GAAG,CAACM,MAAJ,CAAWC,MAAX,CAAkB,IAAlB;EACD;EACF;;;+BAES;EACR,UAAML,IAAI,GAAG,KAAKA,IAAL,CAAUL,KAAV,EAAb;;EACA,WAAK,IAAId,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmB,IAAI,CAAC/B,MAAzB,EAAiCY,CAAC,EAAlC,EAAsC;EACpCmB,QAAAA,IAAI,CAACnB,CAAD,CAAJ,CAAQyB,MAAR;EACD;EACF;;;;;EAGHR,GAAG,CAACM,MAAJ,GAAa,IAAb;EACA,IAAMG,WAAW,GAAG,EAApB;EAEO,SAASC,UAAT,CAAqBJ,MAArB,EAA6B;EAClCG,EAAAA,WAAW,CAACL,IAAZ,CAAiBE,MAAjB;EACAN,EAAAA,GAAG,CAACM,MAAJ,GAAaA,MAAb;EACD;EAEM,SAASK,SAAT,GAAsB;EAC3BF,EAAAA,WAAW,CAACG,GAAZ;EACAZ,EAAAA,GAAG,CAACM,MAAJ,GAAaG,WAAW,CAACA,WAAW,CAACtC,MAAZ,GAAqB,CAAtB,CAAxB;EACD;;ECrCM,SAAS0C,OAAT,CAAkBvD,IAAlB,EAAwB;EAC7B,MAAI,CAACH,QAAQ,CAACG,IAAD,CAAb,EAAqB;EACrB,SAAO,IAAIwD,QAAJ,CAAaxD,IAAb,CAAP;EACD;MAEYwD,QAAb;EACE,oBAAYxD,IAAZ,EAAkB;EAAA;;EAChB;EACA;EACAD,IAAAA,GAAG,CAACC,IAAD,EAAO,QAAP,EAAiB,IAAjB,EAAuB,KAAvB,CAAH;;EAEA,QAAI2B,KAAK,CAAC8B,OAAN,CAAczD,IAAd,CAAJ,EAAyB;EACvB,WAAKwC,YAAL,CAAkBxC,IAAlB;EACAA,MAAAA,IAAI,CAAC0D,SAAL,GAAiB7B,YAAjB;EACD,KAHD,MAGO;EACL,WAAK8B,IAAL,CAAU3D,IAAV;EACD;EACF;;EAZH;EAAA;EAAA,yBAaQA,IAbR,EAac;EACVI,MAAAA,MAAM,CAACwD,IAAP,CAAY5D,IAAZ,EAAkBgC,OAAlB,CAA0B,UAAA/B,GAAG,EAAI;EAC/B,YAAIC,KAAK,GAAGF,IAAI,CAACC,GAAD,CAAhB;EACA4D,QAAAA,cAAc,CAAC7D,IAAD,EAAOC,GAAP,EAAYC,KAAZ,CAAd;EACD,OAHD;EAID;EAlBH;EAAA;EAAA,iCAmBgBF,IAnBhB,EAmBsB;EAClB,WAAK,IAAIyB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzB,IAAI,CAACa,MAAzB,EAAiCY,CAAC,EAAlC,EAAsC;EACpC8B,QAAAA,OAAO,CAACvD,IAAI,CAACyB,CAAD,CAAL,CAAP;EACD;EACF;EAvBH;;EAAA;EAAA;;EA0BA,SAASoC,cAAT,CAAyB7D,IAAzB,EAA+BC,GAA/B,EAAoCC,KAApC,EAA2C;EACzC,MAAM4D,GAAG,GAAG,IAAIpB,GAAJ,EAAZ;EACAa,EAAAA,OAAO,CAACrD,KAAD,CAAP,CAFyC;;EAGzCE,EAAAA,MAAM,CAACC,cAAP,CAAsBL,IAAtB,EAA4BC,GAA5B,EAAiC;EAC/BE,IAAAA,UAAU,EAAE,IADmB;EAE/BG,IAAAA,YAAY,EAAE,IAFiB;EAG/ByD,IAAAA,GAH+B,iBAGxB;EACL,UAAIrB,GAAG,CAACM,MAAR,EAAgB;EACdc,QAAAA,GAAG,CAACE,MAAJ;EACD;;EACD,aAAO9D,KAAP;EACD,KAR8B;EAS/B+D,IAAAA,GAT+B,eAS1BC,MAT0B,EASlB;EACX,UAAIA,MAAM,KAAKhE,KAAf,EAAsB;EACtBA,MAAAA,KAAK,GAAGgE,MAAR;EACAJ,MAAAA,GAAG,CAACK,MAAJ;EACD;EAb8B,GAAjC;EAeD;;EClDD,SAASC,SAAT,CAAoBC,EAApB,EAAwB;EACtB,MAAMC,OAAO,GAAGD,EAAE,CAACE,QAAnB;;EACA,MAAID,OAAO,CAACE,KAAZ,EAAmB;;EAGnB,MAAIF,OAAO,CAACvC,OAAZ,EAAqB;EACnB0C,IAAAA,WAAW,CAACJ,EAAD,CAAX;EACD;;EACD,MAAIC,OAAO,CAACtE,IAAZ,EAAkB;EAChB0E,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACD;;EACD,MAAIC,OAAO,CAACK,QAAZ,EAAsB;;EAGtB,MAAIL,OAAO,CAACM,KAAZ,EAAmB;EAGpB;;EAID,SAASH,WAAT,CAAsBJ,EAAtB,EAA0B;EACxB,MAAMtC,OAAO,GAAGsC,EAAE,CAACE,QAAH,CAAYxC,OAA5B;;EACA,MAAIA,OAAJ,EAAa;EACX,SAAK,IAAI9B,GAAT,IAAgB8B,OAAhB,EAAyB;EACvBsC,MAAAA,EAAE,CAACpE,GAAD,CAAF,GAAUM,IAAI,CAACwB,OAAO,CAAC9B,GAAD,CAAR,EAAeoE,EAAf,CAAd;EACD;EACF;EACF;;EAED,SAASK,QAAT,CAAmBL,EAAnB,EAAuB;EACrB,MAAIrE,IAAI,GAAGqE,EAAE,CAACE,QAAH,CAAYvE,IAAvB;EACAA,EAAAA,IAAI,GAAGqE,EAAE,CAACQ,KAAH,GAAW,OAAO7E,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACe,IAAL,CAAUsD,EAAV,CAA7B,GAA6CrE,IAAI,IAAI,EAAvE;EAEAI,EAAAA,MAAM,CAACwD,IAAP,CAAY5D,IAAZ,EAAkBgC,OAAlB,CAA0B,UAAC/B,GAAD,EAAS;EACjC6E,IAAAA,KAAK,CAACT,EAAD,EAAK,OAAL,EAAcpE,GAAd,CAAL;EACD,GAFD;EAGAsD,EAAAA,OAAO,CAACvD,IAAD,CAAP;EACD;;EAED,SAAS8E,KAAT,CAAgBT,EAAhB,EAAoBlD,MAApB,EAA4BlB,GAA5B,EAAiC;EAC/BG,EAAAA,MAAM,CAACC,cAAP,CAAsBgE,EAAtB,EAA0BpE,GAA1B,EAA+B;EAC7BK,IAAAA,YAAY,EAAE,IADe;EAE7BH,IAAAA,UAAU,EAAE,IAFiB;EAG7B4D,IAAAA,GAH6B,iBAGtB;EACL,aAAOM,EAAE,CAAClD,MAAD,CAAF,CAAWlB,GAAX,CAAP;EACD,KAL4B;EAM7BgE,IAAAA,GAN6B,eAMxBc,QANwB,EAMd;EACbV,MAAAA,EAAE,CAAClD,MAAD,CAAF,CAAWlB,GAAX,IAAkB8E,QAAlB;EACD;EAR4B,GAA/B;EAUD;;ECtDM,SAASC,iBAAT,CAA4B9E,KAA5B,EAAmC+E,UAAnC,EAA+C;EAEpD,SAAQ/E,KAAK,GAAG,GAAR,GAAc+E,UAAtB;EACD;;ECHD,IAAMC,MAAM,iCAAZ;EACA,IAAMC,YAAY,iBAAUD,MAAV,kBAAwBA,MAAxB,MAAlB;EACA,IAAME,YAAY,GAAG,IAAIlE,MAAJ,aAAgBiE,YAAhB,EAArB;EACA,IAAME,aAAa,GAAG,YAAtB;EACA,IAAMC,MAAM,GAAG,IAAIpE,MAAJ,gBAAmBiE,YAAnB,YAAf;EACA,IAAMI,SAAS,GAAG,2EAAlB;EAEA,IAAMC,KAAK,GAAG,QAAd;EAIA,IAAIC,IAAI,GAAG,IAAX;EACA,IAAIC,aAAa,GAAG,IAApB;EACA,IAAIC,KAAK,GAAG,EAAZ;;EAEA,SAASC,gBAAT,CAA2BC,OAA3B,EAAoCC,KAApC,EAA2C;EACzC,SAAO;EACLC,IAAAA,GAAG,EAAEF,OADA;EAELG,IAAAA,IAAI,EAAE,CAFD;EAGLC,IAAAA,QAAQ,EAAE,EAHL;EAILC,IAAAA,SAAS,EAAEJ,KAJN;EAKLK,IAAAA,QAAQ,EAAEC,YAAY,CAACN,KAAD,CALjB;EAMLO,IAAAA,MAAM,EAAE;EANH,GAAP;EAQD;;EAED,SAASD,YAAT,CAAuBN,KAAvB,EAA8B;EAC5B,MAAIQ,GAAG,GAAG,EAAV;;EACA,OAAK,IAAI7E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqE,KAAK,CAACjF,MAA1B,EAAkCY,CAAC,EAAnC,EAAuC;EACrC6E,IAAAA,GAAG,CAACR,KAAK,CAACrE,CAAD,CAAL,CAAS8E,IAAV,CAAH,GAAqBT,KAAK,CAACrE,CAAD,CAAL,CAASvB,KAA9B;EACD;;EACD,SAAOoG,GAAP;EACD;;EAEM,SAASE,SAAT,CAAoBC,IAApB,EAA0B;EAC/B,SAAOA,IAAP,EAAa;EACX,QAAIC,OAAO,GAAGD,IAAI,CAACE,OAAL,CAAa,GAAb,CAAd;;EACA,QAAID,OAAO,KAAK,CAAhB,EAAmB;EACjB,UAAIE,aAAa,GAAGC,aAAa,EAAjC;;EACA,UAAID,aAAJ,EAAmB;EACjBE,QAAAA,KAAK,CAACF,aAAa,CAACf,OAAf,EAAwBe,aAAa,CAACd,KAAtC,CAAL;EACD,OAFD,MAEO;EACL,YAAIiB,WAAW,GAAGN,IAAI,CAACO,KAAL,CAAW1B,MAAX,CAAlB;;EACA,YAAIyB,WAAJ,EAAiB;EACfE,UAAAA,OAAO,CAACF,WAAW,CAAC,CAAD,CAAX,CAAelG,MAAhB,CAAP;EACAqG,UAAAA,GAAG,CAACH,WAAW,CAAC,CAAD,CAAZ,CAAH;EACD;EACF;EACF;;EACD,QAAII,IAAI,SAAR;;EACA,QAAIT,OAAO,IAAI,CAAf,EAAkB;EAChBS,MAAAA,IAAI,GAAGV,IAAI,CAACW,SAAL,CAAe,CAAf,EAAkBV,OAAlB,CAAP;EACD;;EACD,QAAIS,IAAJ,EAAU;EACRF,MAAAA,OAAO,CAACE,IAAI,CAACtG,MAAN,CAAP;EACAwG,MAAAA,KAAK,CAACF,IAAD,CAAL;EACD;EACF;;EAED,WAASN,aAAT,GAA0B;EACxB,QAAIC,KAAK,GAAGL,IAAI,CAACO,KAAL,CAAW5B,YAAX,CAAZ;;EACA,QAAI0B,KAAJ,EAAW;EACT,UAAME,KAAK,GAAG;EAAEnB,QAAAA,OAAO,EAAEiB,KAAK,CAAC,CAAD,CAAhB;EAAqBhB,QAAAA,KAAK,EAAE;EAA5B,OAAd;EACAmB,MAAAA,OAAO,CAACH,KAAK,CAAC,CAAD,CAAL,CAASjG,MAAV,CAAP;;EAEA,UAAIqG,IAAJ,EAASI,IAAT,CAJS;;;EAMT,aAAO,EAAEJ,IAAG,GAAGT,IAAI,CAACO,KAAL,CAAW3B,aAAX,CAAR,MAAuCiC,IAAI,GAAGb,IAAI,CAACO,KAAL,CAAWzB,SAAX,CAA9C,CAAP,EAA6E;EAC3E0B,QAAAA,OAAO,CAACK,IAAI,CAAC,CAAD,CAAJ,CAAQzG,MAAT,CAAP;EACAmG,QAAAA,KAAK,CAAClB,KAAN,CAAYhD,IAAZ,CAAiB;EACfyD,UAAAA,IAAI,EAAEe,IAAI,CAAC,CAAD,CADK;EAEfpH,UAAAA,KAAK,EAAEoH,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD;EAFlB,SAAjB;EAID;;EACD,UAAIJ,IAAJ,EAAS;EACPD,QAAAA,OAAO,CAACC,IAAG,CAAC,CAAD,CAAH,CAAOrG,MAAR,CAAP;EACD;;EAED,aAAOmG,KAAP;EACD;EACF;;EAED,WAASC,OAAT,CAAkBM,CAAlB,EAAqB;EACnBd,IAAAA,IAAI,GAAGA,IAAI,CAACW,SAAL,CAAeG,CAAf,CAAP;EACD;;EAED,SAAO9B,IAAP;EACD;;EAED,SAAS+B,YAAT,CAAuBC,EAAvB,EAA2B;EACzB,MAAIC,IAAI,GAAGD,EAAE,CAACvB,SAAd;EACAuB,EAAAA,EAAE,CAAC3B,KAAH,GAAW2B,EAAE,CAAC3B,KAAH,GAAW2B,EAAE,CAAC3B,KAAd,GAAsB,EAAjC;EACA2B,EAAAA,EAAE,CAACE,UAAH,GAAgBF,EAAE,CAACE,UAAH,GAAgBF,EAAE,CAACE,UAAnB,GAAgC,EAAhD;EACAF,EAAAA,EAAE,CAACjD,KAAH,GAAWiD,EAAE,CAACjD,KAAH,GAAWiD,EAAE,CAACjD,KAAd,GAAsB,EAAjC;EACAiD,EAAAA,EAAE,CAACG,MAAH,GAAYH,EAAE,CAACG,MAAH,GAAYH,EAAE,CAACG,MAAf,GAAwB,EAApC;;EAEA,OAAK,IAAInG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiG,IAAI,CAAC7G,MAAzB,EAAiCY,CAAC,EAAlC,EAAsC;EACpC,QAAI8E,IAAI,GAAGmB,IAAI,CAACjG,CAAD,CAAJ,CAAQ8E,IAAnB;EACA,QAAIrG,KAAK,GAAGwH,IAAI,CAACjG,CAAD,CAAJ,CAAQvB,KAApB;;EACA,QAAIsF,KAAK,CAAClE,IAAN,CAAWiF,IAAX,CAAJ,EAAsB;EACpB,UAAI,UAAUjF,IAAV,CAAeiF,IAAf,KAAwBkB,EAAE,CAAC1B,GAAH,KAAW,OAAvC,EAAgD;EAC9C0B,QAAAA,EAAE,CAACE,UAAH,CAAc7E,IAAd,CAAmB;EAAEyD,UAAAA,IAAI,EAAE,OAAR;EAAiBsB,UAAAA,OAAO,EAAE,SAA1B;EAAqC3H,UAAAA,KAAK,EAAEA;EAA5C,SAAnB;EACAuH,QAAAA,EAAE,CAACG,MAAH,CAAU,OAAV,IAAqB5C,iBAAiB,CAAC9E,KAAD,EAAQ,qBAAR,CAAtC;EACAuH,QAAAA,EAAE,CAACjD,KAAH,CAAS1B,IAAT,CAAc;EAAEyD,UAAAA,IAAI,EAAE,OAAR;EAAiBrG,UAAAA,KAAK,EAAEA;EAAxB,SAAd;EACD;;EACD,UAAI,SAASoB,IAAT,CAAciF,IAAd,CAAJ,EAAyB;EACvBkB,QAAAA,EAAE,CAACG,MAAH,CAAU,OAAV,IAAqB1H,KAArB;EACD;EACF,KATD,MASO;EACLuH,MAAAA,EAAE,CAAC3B,KAAH,CAAShD,IAAT,CAAc;EAAEyD,QAAAA,IAAI,EAAEA,IAAR;EAAcrG,QAAAA,KAAK,EAAEA;EAArB,OAAd;EACD;EACF;EACF;;;EAGD,SAAS4G,KAAT,CAAgBjB,OAAhB,EAAyBC,KAAzB,EAAgC;EAC9B,MAAIgC,OAAO,GAAGlC,gBAAgB,CAACC,OAAD,EAAUC,KAAV,CAA9B;EACA0B,EAAAA,YAAY,CAACM,OAAD,CAAZ;;EACA,MAAI,CAACrC,IAAL,EAAW;EACTA,IAAAA,IAAI,GAAGqC,OAAP;EACD;;EACDpC,EAAAA,aAAa,GAAGoC,OAAhB;EACAnC,EAAAA,KAAK,CAAC7C,IAAN,CAAWgF,OAAX;;EACA,MAAIjC,OAAO,KAAK,OAAhB,EAAyB;EACvBqB,IAAAA,GAAG,CAAA,CAAH;EACD;EACF;;;EAGD,SAASG,KAAT,CAAgBF,IAAhB,EAAsB;EACpBA,EAAAA,IAAI,GAAGA,IAAI,CAACY,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP;;EACA,MAAIZ,IAAJ,EAAU;EACRzB,IAAAA,aAAa,CAACO,QAAd,CAAuBnD,IAAvB,CAA4B;EAC1BqE,MAAAA,IAAI,EAAEA,IADoB;EAE1BnB,MAAAA,IAAI,EAAE;EAFoB,KAA5B;EAID;EACF;;;EAGD,SAASkB,GAAT,CAAcrB,OAAd,EAAuB;EACrB,MAAIiC,OAAO,GAAGnC,KAAK,CAACrC,GAAN,EAAd;EACAoC,EAAAA,aAAa,GAAGC,KAAK,CAACA,KAAK,CAAC9E,MAAN,GAAe,CAAhB,CAArB;;EACA,MAAI6E,aAAJ,EAAmB;EACjBoC,IAAAA,OAAO,CAACzB,MAAR,GAAiBX,aAAjB;EACAA,IAAAA,aAAa,CAACO,QAAd,CAAuBnD,IAAvB,CAA4BgF,OAA5B;EACD;EACF;;ECnJD,IAAME,YAAY,GAAG,0BAArB;EACA,IAAMC,OAAO,GAAG,yDAAhB;EAEA,IAAMC,YAAY,GAAG,8FAArB;EAEO,SAASC,QAAT,CAAmBC,GAAnB,EAAwB;EAC7B,MAAInC,QAAQ,GAAGoC,WAAW,CAACD,GAAD,CAA1B;EACA,MAAIE,IAAI,kBAAUF,GAAG,CAACrC,GAAd,oBACNqC,GAAG,CAAClC,SAAJ,CAAcrF,MAAd,GAAuB0H,OAAO,CAACH,GAAD,CAA9B,GAAsC,WADhC,iBAENnC,QAAQ,cAAOA,QAAP,IAAoB,EAFtB,UAAR;EAKA,SAAOqC,IAAP;EACD;;EAED,SAASC,OAAT,CAAkBH,GAAlB,EAAuB;EACrB,MAAIpI,IAAI,GAAG,GAAX;;EACA,MAAIoI,GAAG,CAACtC,KAAR,EAAe;EACb9F,IAAAA,IAAI,IAAI,WAAWwI,QAAQ,CAACJ,GAAG,CAACtC,KAAL,CAAnB,GAAiC,GAAzC;EACD;;EACD,MAAIsC,GAAG,CAACR,MAAR,EAAgB;EACd5H,IAAAA,IAAI,IAAI,QAAQyI,WAAW,CAACL,GAAG,CAACR,MAAL,CAAnB,GAAkC,GAA1C;EACD;;EACD,MAAIQ,GAAG,CAAC5D,KAAR,EAAe;EACbxE,IAAAA,IAAI,IAAI,cAAc0I,WAAW,CAACN,GAAG,CAAC5D,KAAL,CAAzB,GAAuC,GAA/C;EACD;;EAEDxE,EAAAA,IAAI,GAAGA,IAAI,CAAC+H,OAAL,CAAa,IAAb,EAAmB,EAAnB,CAAP,CAZqB;EAcrB;EACA;EACA;EACA;;EACA/H,EAAAA,IAAI,IAAI,GAAR;EACA,SAAOA,IAAP;EACD;;EAED,SAASyI,WAAT,CAAsBb,MAAtB,EAA8B;EAC5B,MAAI5H,IAAI,GAAG,EAAX;EACAI,EAAAA,MAAM,CAACwD,IAAP,CAAYgE,MAAZ,EAAoB5F,OAApB,CAA4B,UAAA/B,GAAG,EAAI;EAEjC,QAAI0I,YAAY,GAAGT,YAAY,CAAC5G,IAAb,CAAkBsG,MAAM,CAAC3H,GAAD,CAAxB,CAAnB;EACA,QAAI2I,oBAAoB,GAAGX,OAAO,CAAC3G,IAAR,CAAasG,MAAM,CAAC3H,GAAD,CAAnB,CAA3B,CAHiC;;EAMjC,QAAI0I,YAAY,IAAIC,oBAApB,EAA0C;EACxC5I,MAAAA,IAAI,gBAAQC,GAAR,gBAAgB2H,MAAM,CAAC3H,GAAD,CAAtB,MAAJ;EACD,KAFD,MAEO;EACLD,MAAAA,IAAI,gBAAQC,GAAR,mCAAmC2H,MAAM,CAAC3H,GAAD,CAAzC,QAAJ;EACD;EACF,GAXD;EAYAD,EAAAA,IAAI,GAAGA,IAAI,CAAC+H,OAAL,CAAa,IAAb,EAAmB,EAAnB,CAAP;EAEA,oBAAW/H,IAAX;EACD;;EAED,SAAS0I,WAAT,CAAsBlE,KAAtB,EAA6B;EAC3B,MAAIxE,IAAI,GAAG,GAAX;;EACA,OAAK,IAAIyB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+C,KAAK,CAAC3D,MAA1B,EAAkCY,CAAC,EAAnC,EAAuC;EACrCzB,IAAAA,IAAI,gBAAQwE,KAAK,CAAC/C,CAAD,CAAL,CAAS8E,IAAjB,gBAA0B/B,KAAK,CAAC/C,CAAD,CAAL,CAASvB,KAAnC,MAAJ,CADqC;EAGrC;EACA;EACD;;EAEDF,EAAAA,IAAI,GAAGA,IAAI,CAAC+H,OAAL,CAAa,IAAb,EAAmB,EAAnB,CAAP;EACA/H,EAAAA,IAAI,IAAI,GAAR;EACA,SAAOA,IAAP;EACD;;EAED,SAASwI,QAAT,CAAmB1C,KAAnB,EAA0B;EACxB,MAAI+C,GAAG,GAAG,EAAV;;EACA,OAAK,IAAIpH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqE,KAAK,CAACjF,MAA1B,EAAkCY,CAAC,EAAnC,EAAuC;EACrC,QAAI6F,IAAI,GAAGxB,KAAK,CAACrE,CAAD,CAAhB;;EACA,QAAI6F,IAAI,CAACf,IAAL,KAAc,OAAlB,EAA2B;EAAA;EACzB,YAAIzG,GAAG,GAAG,EAAV;EACAwH,QAAAA,IAAI,CAACpH,KAAL,CAAWsB,KAAX,CAAiB,GAAjB,EAAsBQ,OAAtB,CAA8B,UAAA8G,IAAI,EAAI;EAAA,4BACjBA,IAAI,CAACtH,KAAL,CAAW,GAAX,CADiB;EAAA;EAAA,cAC/BvB,GAD+B;EAAA,cAC1BC,KAD0B;;EAEpCJ,UAAAA,GAAG,CAACG,GAAD,CAAH,GAAWC,KAAX;EACD,SAHD;EAIAoH,QAAAA,IAAI,CAACpH,KAAL,GAAaJ,GAAb;EANyB;EAO1B;;EACD+I,IAAAA,GAAG,cAAOvB,IAAI,CAACf,IAAZ,cAAoBwC,IAAI,CAACC,SAAL,CAAe1B,IAAI,CAACpH,KAApB,CAApB,MAAH;EACD;;EACD,oBAAW2I,GAAG,CAACtG,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,CAAX;EACD;;EAED,SAAS8F,WAAT,CAAsBD,GAAtB,EAA2B;EACzB,MAAInC,QAAQ,GAAGmC,GAAG,CAACnC,QAAnB;;EACA,MAAIA,QAAQ,IAAIA,QAAQ,CAACpF,MAAT,GAAkB,CAAlC,EAAqC;EACnC,qBAAUoF,QAAQ,CAACK,GAAT,CAAa,UAAA2C,CAAC;EAAA,aAAIC,GAAG,CAACD,CAAD,CAAP;EAAA,KAAd,EAA0BE,IAA1B,CAA+B,GAA/B,CAAV;EACD,GAFD,MAEO;EACL,WAAO,KAAP;EACD;EACF;;EAED,SAASD,GAAT,CAAcE,IAAd,EAAoB;EAClB,MAAIA,IAAI,CAACpD,IAAL,KAAc,CAAlB,EAAqB;EACnB,WAAOmC,QAAQ,CAACiB,IAAD,CAAf;EACD,GAFD,MAEO;EACL,QAAIjC,IAAI,GAAGiC,IAAI,CAACjC,IAAhB;EACA,QAAIkC,MAAM,GAAG,EAAb;EACA,QAAIrC,KAAJ,EAAWsC,KAAX;EACA,QAAIC,SAAS,GAAGvB,YAAY,CAACuB,SAAb,GAAyB,CAAzC;;EACA,WAAOvC,KAAK,GAAGgB,YAAY,CAACwB,IAAb,CAAkBrC,IAAlB,CAAf,EAAwC;EACtCmC,MAAAA,KAAK,GAAGtC,KAAK,CAACsC,KAAd;;EACA,UAAIA,KAAK,GAAGC,SAAZ,EAAuB;EACrBF,QAAAA,MAAM,CAACvG,IAAP,CAAYiG,IAAI,CAACC,SAAL,CAAe7B,IAAI,CAAC5E,KAAL,CAAWgH,SAAX,EAAsBD,KAAtB,CAAf,CAAZ;EACD;;EACDD,MAAAA,MAAM,CAACvG,IAAP,cAAkBkE,KAAK,CAAC,CAAD,CAAL,CAASyC,IAAT,EAAlB;EACAF,MAAAA,SAAS,GAAGD,KAAK,GAAGtC,KAAK,CAAC,CAAD,CAAL,CAASnG,MAA7B;EACD;;EACD,QAAI0I,SAAS,GAAGpC,IAAI,CAACtG,MAArB,EAA6B;EAC3BwI,MAAAA,MAAM,CAACvG,IAAP,CAAYiG,IAAI,CAACC,SAAL,CAAe7B,IAAI,CAAC5E,KAAL,CAAWgH,SAAX,CAAf,CAAZ;EACD;;EACD,wBAAaF,MAAM,CAACF,IAAP,CAAY,GAAZ,CAAb;EACD;EACF;;EClHM,SAASO,kBAAT,CAA6BC,QAA7B,EAAuC;EAC5C,MAAIlE,IAAI,GAAGe,SAAS,CAACmD,QAAD,CAApB;EACA,MAAIrB,IAAI,GAAGH,QAAQ,CAAC1C,IAAD,CAAnB;EAEA,MAAImE,QAAQ,GAAG,IAAIC,QAAJ,6BAAkCvB,IAAlC,OAAf;EAEA,SAAOsB,QAAP;EACD;;ECVD,IAAIE,GAAG,GAAG,EAAV;EACA,IAAIC,QAAQ,GAAG,KAAf;EACA,IAAIC,KAAK,GAAG,EAAZ;EACA,IAAIV,KAAK,GAAG,CAAZ;EACA,IAAIW,OAAO,GAAG,KAAd;EAEO,SAASC,YAAT,CAAuBC,OAAvB,EAAgC;EACrC,MAAIxH,EAAE,GAAGwH,OAAO,CAACxH,EAAjB;;EACA,MAAI,CAACmH,GAAG,CAACnH,EAAD,CAAR,EAAc;EACZmH,IAAAA,GAAG,CAACnH,EAAD,CAAH,GAAU,IAAV;;EACA,QAAI,CAACoH,QAAL,EAAe;EACbC,MAAAA,KAAK,CAAClH,IAAN,CAAWqH,OAAX;EACD,KAFD,MAEO;EACL;EACA,UAAI1I,CAAC,GAAGuI,KAAK,CAACnJ,MAAN,GAAe,CAAvB,CAFK;;EAIL,aAAOY,CAAC,GAAG6H,KAAJ,IAAaU,KAAK,CAACV,KAAD,CAAL,CAAa3G,EAAb,GAAkBA,EAAtC;EAA0ClB,QAAAA,CAAC;EAA3C;;EACAuI,MAAAA,KAAK,CAACI,MAAN,CAAa3I,CAAC,GAAG,CAAjB,EAAoB,CAApB,EAAuB0I,OAAvB;EACD;;EACD,QAAI,CAACF,OAAL,EAAc;EACZA,MAAAA,OAAO,GAAG,IAAV;EACAI,MAAAA,UAAU,CAACC,mBAAD,EAAsB,CAAtB,CAAV;EACD;EACF;EACF;;EAED,SAASA,mBAAT,GAAgC;EAC9BP,EAAAA,QAAQ,GAAG,IAAX;EACAC,EAAAA,KAAK,CAACO,IAAN,CAAW,UAAC7J,CAAD,EAAI8J,CAAJ;EAAA,WAAU9J,CAAC,CAACiC,EAAF,GAAO6H,CAAC,CAAC7H,EAAnB;EAAA,GAAX;;EACA,OAAK2G,KAAK,GAAG,CAAb,EAAgBA,KAAK,GAAGU,KAAK,CAACnJ,MAA9B,EAAsCyI,KAAK,EAA3C,EAA+C;EAC7C,QAAIa,OAAO,GAAGH,KAAK,CAACV,KAAD,CAAnB;EACAQ,IAAAA,GAAG,CAACK,OAAO,CAACxH,EAAT,CAAH,GAAkB,IAAlB;EACAwH,IAAAA,OAAO,CAACM,GAAR;EACD;;EACDnB,EAAAA,KAAK,GAAGU,KAAK,CAACnJ,MAAN,GAAe,CAAvB;EACAiJ,EAAAA,GAAG,GAAG,EAAN;EACAC,EAAAA,QAAQ,GAAGE,OAAO,GAAG,KAArB;EACD;;ECjCD,IAAIxH,KAAG,GAAG,CAAV;;MAEMiI;EACJ,mBAAYrG,EAAZ,EAAgBsG,QAAhB,EAA0BC,QAA1B,EAAoCtG,OAApC,EAA6C;EAAA;;EAC3C,SAAKD,EAAL,GAAUA,EAAV;EACA,SAAKuG,QAAL,GAAgBA,QAAhB;EACA,SAAKtG,OAAL,GAAeA,OAAf;EACA,SAAKuG,MAAL,GAAc,IAAIC,GAAJ,EAAd;EACA,SAAKnI,EAAL,GAAU,EAAEF,KAAZ;;EAEA,QAAI,OAAOkI,QAAP,KAAoB,UAAxB,EAAoC;EAClC,WAAKI,MAAL,GAAcJ,QAAd;EACD,KAFD,MAEO;EACL,WAAKI,MAAL,GAAc3J,SAAS,CAACuJ,QAAD,CAAvB;EACD;;EAED,SAAKzK,KAAL,GAAa,KAAK6D,GAAL,EAAb;EACD;;;;4BACM;EACLX,MAAAA,UAAU,CAAC,IAAD,CAAV;EACA,UAAIlD,KAAK,GAAG,EAAZ;;EACA,UAAI;EACFA,QAAAA,KAAK,GAAG,KAAK6K,MAAL,CAAYhK,IAAZ,CAAiB,KAAKsD,EAAtB,EAA0B,KAAKA,EAA/B,CAAR;EACD,OAFD,CAEE,OAAO2G,CAAP,EAAU,EAFZ,SAIU;EACR3H,QAAAA,SAAS;EACV;;EACD,aAAOnD,KAAP;EACD;;;6BAEO4D,KAAK;EACX,UAAI,CAAC,KAAK+G,MAAL,CAAYf,GAAZ,CAAgBhG,GAAG,CAACnB,EAApB,CAAL,EAA8B;EAC5BmB,QAAAA,GAAG,CAACmH,MAAJ,CAAW,IAAX;EACA,aAAKJ,MAAL,CAAYK,GAAZ,CAAgBpH,GAAG,CAACnB,EAApB;EACD;EACF;;;4BAEM;EACL,UAAIzC,KAAK,GAAG,KAAK6K,MAAL,CAAYhK,IAAZ,CAAiB,KAAKsD,EAAtB,EAA0B,KAAKA,EAA/B,CAAZ;;EACA,UAAInE,KAAK,KAAK,KAAKA,KAAnB,EAA0B;EACxB,YAAIiL,QAAQ,GAAG,KAAKjL,KAApB;EACA,aAAKA,KAAL,GAAaA,KAAb;EACA,aAAK0K,QAAL,CAAc7J,IAAd,CAAmB,KAAKsD,EAAxB,EAA4B,KAAKnE,KAAjC,EAAwCiL,QAAxC;EACD;EACF;;;+BAES;EACRjB,MAAAA,YAAY,CAAC,IAAD,CAAZ;EACD;;;;;;ECrDI,SAASkB,aAAT,CAAwBrF,GAAxB,EAAqD;EAAA,MAAxB/F,IAAwB,uEAAjB,EAAiB;EAC1D,MAAIC,GAAG,GAAGD,IAAI,CAACC,GAAf;;EACA,MAAIA,GAAJ,EAAS;EACP,WAAOD,IAAI,CAACC,GAAZ;EACD;;EAJyD,oCAAVgG,QAAU;EAAVA,IAAAA,QAAU;EAAA;;EAK1D,SAAOoF,KAAK,CAACtF,GAAD,EAAM/F,IAAN,EAAYC,GAAZ,EAAiBgG,QAAjB,EAA2BqF,SAA3B,CAAZ;EACD;EAEM,SAASC,cAAT,CAAyBpE,IAAzB,EAA+B;EACpC,SAAOkE,KAAK,CAACC,SAAD,EAAYA,SAAZ,EAAuBA,SAAvB,EAAkCA,SAAlC,EAA6CnE,IAA7C,CAAZ;EACD;EAEM,SAASkE,KAAT,CAAgBtF,GAAhB,EAAqB/F,IAArB,EAA2BC,GAA3B,EAAgCgG,QAAhC,EAA0CkB,IAA1C,EAAgDqE,GAAhD,EAAqD;EAC1D,SAAO;EACLzF,IAAAA,GAAG,EAAEA,GADA;EAEL/F,IAAAA,IAAI,EAAEA,IAFD;EAGLC,IAAAA,GAAG,EAAEA,GAHA;EAILgG,IAAAA,QAAQ,EAAEA,QAJL;EAKLkB,IAAAA,IAAI,EAAEA,IALD;EAMLqE,IAAAA,GAAG,EAAEA;EANA,GAAP;EAQD;;ECnBM,SAASC,mBAAT,CAA8BC,QAA9B,EAAwCC,KAAxC,EAA+C;EACpD,MAAMtH,EAAE,GAAG,IAAX;EACA,SAAOuH,KAAK,CAACF,QAAD,EAAWC,KAAX,CAAZ;;EAEA,WAASC,KAAT,CAAgBF,QAAhB,EAA0BC,KAA1B,EAAiC;EAC/B,QAAME,aAAa,GAAGH,QAAQ,CAACI,QAA/B,CAD+B;EAE/B;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;;EACA,QAAI,CAACD,aAAD,IAAkBE,SAAS,CAACL,QAAD,EAAWC,KAAX,CAA/B,EAAkD;EAChDK,MAAAA,UAAU,CAACN,QAAD,EAAWC,KAAX,CAAV;EACD,KAFD,MAEO;EACL,UAAIE,aAAJ,EAAmB;EACjBH,QAAAA,QAAQ,GAAGO,WAAW,CAACP,QAAD,CAAtB;EACD;;EACD,UAAIF,GAAG,GAAGE,QAAQ,CAACF,GAAnB;EACA,UAAInF,MAAM,GAAGmF,GAAG,CAACU,UAAjB;EACAC,MAAAA,SAAS,CAACR,KAAD,CAAT;EACAtF,MAAAA,MAAM,CAAC+F,YAAP,CAAoBT,KAAK,CAACH,GAA1B,EAA+BA,GAA/B;EACAnF,MAAAA,MAAM,CAACgG,WAAP,CAAmBb,GAAnB;EACD;;EACD,WAAOG,KAAK,CAACH,GAAb;EACD;;EAED,WAASW,SAAT,CAAoBR,KAApB,EAA2B;EAAA,QACnB5F,GADmB,GACgB4F,KADhB,CACnB5F,GADmB;EAAA,QACd/F,IADc,GACgB2L,KADhB,CACd3L,IADc;EAAA,QACRC,GADQ,GACgB0L,KADhB,CACR1L,GADQ;EAAA,QACHgG,QADG,GACgB0F,KADhB,CACH1F,QADG;EAAA,QACOkB,IADP,GACgBwE,KADhB,CACOxE,IADP;;EAGzB,QAAI,OAAOpB,GAAP,KAAe,QAAnB,EAA6B;EAC3B4F,MAAAA,KAAK,CAACH,GAAN,GAAYc,QAAQ,CAAClB,aAAT,CAAuBrF,GAAvB,CAAZ;EACAE,MAAAA,QAAQ,CAACjE,OAAT,CAAiB,UAAAuK,KAAK,EAAI;EACxB,eAAOZ,KAAK,CAACH,GAAN,CAAUgB,WAAV,CAAsBL,SAAS,CAACI,KAAD,CAA/B,CAAP;EACD,OAFD;EAGAE,MAAAA,gBAAgB,CAACd,KAAD,CAAhB;EACD,KAND,MAMO;EACLA,MAAAA,KAAK,CAACH,GAAN,GAAYc,QAAQ,CAACf,cAAT,CAAwBpE,IAAxB,CAAZ;EACD;;EACD,WAAOwE,KAAK,CAACH,GAAb;EACD;;EAED,WAASQ,UAAT,CAAqBN,QAArB,EAA+BC,KAA/B,EAAsC;EACpC,QAAID,QAAQ,KAAKC,KAAjB,EAAwB;EAExB,QAAMH,GAAG,GAAGG,KAAK,CAACH,GAAN,GAAYE,QAAQ,CAACF,GAAjC;EACA,QAAMkB,KAAK,GAAGhB,QAAQ,CAACzF,QAAvB;EACA,QAAM0G,EAAE,GAAGhB,KAAK,CAAC1F,QAAjB;;EAEA,QAAI,CAAC0F,KAAK,CAACxE,IAAX,EAAiB;EAAE;EACjB,UAAIuF,KAAK,IAAIC,EAAb,EAAiB;EAAE;EACjBC,QAAAA,cAAc,CAACpB,GAAD,EAAMkB,KAAN,EAAaC,EAAb,CAAd;EACD,OAFD,MAEO,IAAIA,EAAJ,EAAQ;EACb,YAAID,KAAK,CAACvF,IAAV,EAAgB;EACdqE,UAAAA,GAAG,CAACqB,WAAJ,GAAkB,EAAlB;EACD;;EACDC,QAAAA,SAAS,CAACtB,GAAD,EAAM,IAAN,EAAYmB,EAAZ,EAAgB,CAAhB,EAAmBA,EAAE,CAAC9L,MAAH,GAAY,CAA/B,CAAT;EACD,OALM,MAKA,IAAI6L,KAAJ,EAAW;EAChBK,QAAAA,YAAY,CAACvB,GAAD,EAAMkB,KAAN,EAAa,CAAb,EAAgBA,KAAK,CAAC7L,MAAN,GAAe,CAA/B,CAAZ;EACD,OAFM,MAEA;EACL2K,QAAAA,GAAG,CAACqB,WAAJ,GAAkB,EAAlB;EACD;;EACDG,MAAAA,cAAc,CAACtB,QAAD,EAAWC,KAAX,CAAd;EACD,KAdD,MAcO;EACL,UAAIe,KAAJ,EAAW;EACTK,QAAAA,YAAY,CAACvB,GAAD,EAAMkB,KAAN,EAAa,CAAb,EAAgBA,KAAK,CAAC7L,MAAN,GAAe,CAA/B,CAAZ;EACD;;EACD2K,MAAAA,GAAG,CAACqB,WAAJ,GAAkBlB,KAAK,CAACxE,IAAxB;EACD;EACF;;EAED,WAAS8E,WAAT,CAAsBT,GAAtB,EAA2B;EACzB,WAAO,IAAIH,KAAJ,CAAUG,GAAG,CAAC3F,OAAJ,CAAYoH,WAAZ,EAAV,EAAqC,EAArC,EAAyC,EAAzC,EAA6C3B,SAA7C,EAAwDA,SAAxD,EAAmEE,GAAnE,CAAP;EACD;;EAED,WAASO,SAAT,CAAoBL,QAApB,EAA8BC,KAA9B,EAAqC;EACnC,WAAOD,QAAQ,CAACzL,GAAT,KAAiB0L,KAAK,CAAC1L,GAAvB,IAA8ByL,QAAQ,CAAC3F,GAAT,KAAiB4F,KAAK,CAAC5F,GAA5D;EACD;;EAED,WAASgH,YAAT,CAAuB1G,MAAvB,EAA+B6G,MAA/B,EAAuCC,QAAvC,EAAiDC,MAAjD,EAAyD;EACvD,SAAK,IAAI3L,CAAC,GAAG0L,QAAb,EAAuB1L,CAAC,IAAI2L,MAA5B,EAAoC3L,CAAC,EAArC,EAAyC;EACvC,UAAIkK,MAAK,GAAGuB,MAAM,CAACzL,CAAD,CAAlB;EACA,UAAI+J,GAAG,GAAGG,MAAK,CAACH,GAAhB;EACAnF,MAAAA,MAAM,CAACgG,WAAP,CAAmBb,GAAnB;EACD;EACF;;EAED,WAASsB,SAAT,CAAoBzG,MAApB,EAA4BgH,MAA5B,EAAoCH,MAApC,EAA4CC,QAA5C,EAAsDC,MAAtD,EAA8D;EAC5D,WAAOD,QAAQ,IAAIC,MAAnB,EAA2B,EAAED,QAA7B,EAAuC;EACrC,UAAIxB,OAAK,GAAGuB,MAAM,CAACC,QAAD,CAAlB;;EACA,UAAIxB,OAAJ,EAAW;EACTtF,QAAAA,MAAM,CAAC+F,YAAP,CAAoBD,SAAS,CAACR,OAAD,CAA7B,EAAsC0B,MAAtC;EACD;EACF;EACF;;EAED,WAAST,cAAT,CAAyBU,SAAzB,EAAoCZ,KAApC,EAA2Ca,KAA3C,EAAkD;EAChD,QAAIb,KAAK,KAAKa,KAAd,EAAqB;EACrB,QAAIC,WAAW,GAAG,CAAlB;EAAA,QACEC,SAAS,GAAGf,KAAK,CAAC7L,MAAN,GAAe,CAD7B;EAAA,QAEE6M,aAAa,GAAGhB,KAAK,CAAC,CAAD,CAFvB;EAAA,QAGEiB,WAAW,GAAGjB,KAAK,CAACe,SAAD,CAHrB;EAAA,QAIEG,WAAW,GAAG,CAJhB;EAAA,QAKEC,SAAS,GAAGN,KAAK,CAAC1M,MAAN,GAAe,CAL7B;EAAA,QAMEiN,aAAa,GAAGP,KAAK,CAAC,CAAD,CANvB;EAAA,QAOEQ,WAAW,GAAGR,KAAK,CAACM,SAAD,CAPrB;EAAA,QAQEG,WARF;EAAA,QASEC,QATF;;EAWA,WAAOT,WAAW,IAAIC,SAAf,IAA4BG,WAAW,IAAIC,SAAlD,EAA6D;EAC3D,UAAIH,aAAa,IAAI,IAArB,EAA2B;EACzBA,QAAAA,aAAa,GAAGhB,KAAK,CAAC,EAAEc,WAAH,CAArB;EACD,OAFD,MAEO,IAAIG,WAAW,IAAI,IAAnB,EAAyB;EAC9BA,QAAAA,WAAW,GAAGjB,KAAK,CAAC,EAAEe,SAAH,CAAnB;EACD,OAFM,MAEA,IAAIK,aAAa,IAAI,IAArB,EAA2B;EAChCA,QAAAA,aAAa,GAAGP,KAAK,CAAC,EAAEK,WAAH,CAArB;EACD,OAFM,MAEA,IAAIG,WAAW,IAAI,IAAnB,EAAyB;EAC9BA,QAAAA,WAAW,GAAGR,KAAK,CAAC,EAAEM,SAAH,CAAnB;EACD,OAFM,MAEA,IAAI9B,SAAS,CAAC2B,aAAD,EAAgBI,aAAhB,CAAb,EAA6C;EAClD9B,QAAAA,UAAU,CAAC0B,aAAD,EAAgBI,aAAhB,CAAV;EACAJ,QAAAA,aAAa,GAAGhB,KAAK,CAAC,EAAEc,WAAH,CAArB;EACAM,QAAAA,aAAa,GAAGP,KAAK,CAAC,EAAEK,WAAH,CAArB;EACD,OAJM,MAIA,IAAI7B,SAAS,CAAC4B,WAAD,EAAcI,WAAd,CAAb,EAAyC;EAC9C/B,QAAAA,UAAU,CAAC2B,WAAD,EAAcI,WAAd,CAAV;EACAJ,QAAAA,WAAW,GAAGjB,KAAK,CAAC,EAAEe,SAAH,CAAnB;EACAM,QAAAA,WAAW,GAAGR,KAAK,CAAC,EAAEM,SAAH,CAAnB;EACD,OAJM,MAIA,IAAI9B,SAAS,CAAC2B,aAAD,EAAgBK,WAAhB,CAAb,EAA2C;EAChD/B,QAAAA,UAAU,CAAC0B,aAAD,EAAgBK,WAAhB,CAAV;EACAT,QAAAA,SAAS,CAAClB,YAAV,CAAuBsB,aAAa,CAAClC,GAArC,EAA0CmC,WAAW,CAACnC,GAAZ,CAAgB0C,WAA1D;EACAR,QAAAA,aAAa,GAAGhB,KAAK,CAAC,EAAEc,WAAH,CAArB;EACAO,QAAAA,WAAW,GAAGR,KAAK,CAAC,EAAEM,SAAH,CAAnB;EACD,OALM,MAKA,IAAI9B,SAAS,CAAC4B,WAAD,EAAcG,aAAd,CAAb,EAA2C;EAChD9B,QAAAA,UAAU,CAAC2B,WAAD,EAAcG,aAAd,CAAV;EACAR,QAAAA,SAAS,CAAClB,YAAV,CAAuBuB,WAAW,CAACnC,GAAnC,EAAwCkC,aAAa,CAAClC,GAAtD;EACAmC,QAAAA,WAAW,GAAGjB,KAAK,CAAC,EAAEe,SAAH,CAAnB;EACAK,QAAAA,aAAa,GAAGP,KAAK,CAAC,EAAEK,WAAH,CAArB;EACD,OALM,MAKA;EACL,YAAII,WAAW,KAAK1C,SAApB,EAA+B;EAC7B0C,UAAAA,WAAW,GAAGG,iBAAiB,CAACzB,KAAD,EAAQc,WAAR,EAAqBC,SAArB,CAA/B;EACD;;EACDQ,QAAAA,QAAQ,GAAGD,WAAW,CAACF,aAAa,CAAC7N,GAAf,CAAtB;;EACA,YAAIgO,QAAQ,KAAK3C,SAAjB,EAA4B;EAC1BgC,UAAAA,SAAS,CAAClB,YAAV,CAAuBD,SAAS,CAAC2B,aAAD,CAAhC,EAAiDJ,aAAa,CAAClC,GAA/D;EACD,SAFD,MAEO;EACL,cAAI4C,SAAS,GAAG1B,KAAK,CAACuB,QAAD,CAArB;;EACA,cAAI,CAAClC,SAAS,CAACqC,SAAD,EAAYN,aAAZ,CAAd,EAA0C;EACxCR,YAAAA,SAAS,CAAClB,YAAV,CAAuBD,SAAS,CAAC2B,aAAD,CAAhC,EAAiDJ,aAAa,CAAClC,GAA/D;EACD,WAFD,MAEO;EACLQ,YAAAA,UAAU,CAACoC,SAAD,EAAYN,aAAZ,CAAV;EACAR,YAAAA,SAAS,CAAClB,YAAV,CAAuBgC,SAAS,CAAC5C,GAAjC,EAAsCkC,aAAa,CAAClC,GAApD;EACAkB,YAAAA,KAAK,CAACuB,QAAD,CAAL,GAAkB,IAAlB;EACD;EACF;;EACDH,QAAAA,aAAa,GAAGP,KAAK,CAAC,EAAEK,WAAH,CAArB;EACD;EACF;;EAED,QAAIJ,WAAW,IAAIC,SAAf,IAA4BG,WAAW,IAAIC,SAA/C,EAA0D;EACxD,UAAIL,WAAW,GAAGC,SAAlB,EAA6B;EAC3B;EACA,YAAIJ,MAAM,GAAGE,KAAK,CAACM,SAAS,GAAG,CAAb,CAAL,GAAuBN,KAAK,CAACM,SAAS,GAAG,CAAb,CAAL,CAAqBrC,GAA5C,GAAkD,IAA/D;EACAsB,QAAAA,SAAS,CAACQ,SAAD,EAAYD,MAAZ,EAAoBE,KAApB,EAA2BK,WAA3B,EAAwCC,SAAxC,CAAT;EACD,OAJD,MAIO;EACL;EACAd,QAAAA,YAAY,CAACO,SAAD,EAAYZ,KAAZ,EAAmBc,WAAnB,EAAgCC,SAAhC,CAAZ;EACD;EACF;EACF;;EAED,WAASU,iBAAT,CAA4BlI,QAA5B,EAAsCkH,QAAtC,EAAgDC,MAAhD,EAAwD;EACtD,QAAI9G,GAAG,GAAG,EAAV;;EACA,SAAK,IAAI7E,CAAC,GAAG0L,QAAb,EAAuB1L,CAAC,IAAI2L,MAA5B,EAAoC3L,CAAC,EAArC,EAAyC;EACvC,UAAIxB,GAAG,GAAGgG,QAAQ,CAACxE,CAAD,CAAR,CAAYxB,GAAtB;;EACA,UAAIA,GAAJ,EAAS;EACPqG,QAAAA,GAAG,CAACrG,GAAD,CAAH,GAAWwB,CAAX;EACD;EACF;;EACD,WAAO6E,GAAP;EACD;;EAED,WAASmG,gBAAT,CAA2Bd,KAA3B,EAAkC;EAChC,QAAInH,KAAK,GAAGmH,KAAK,CAAC3L,IAAlB;EACA,QAAIwL,GAAG,GAAGG,KAAK,CAACH,GAAhB;;EACA,QAAIhH,KAAJ,EAAW;EACT,UAAIA,KAAK,CAACsB,KAAV,EAAiB;EACf,aAAK,IAAIwB,IAAT,IAAiB9C,KAAK,CAACsB,KAAvB,EAA8B;EAC5B,cAAIwB,IAAI,KAAK,OAAb,EAAsB;EACpB,iBAAK,IAAI+G,SAAT,IAAsB7J,KAAK,CAACsB,KAAN,CAAYwI,KAAlC,EAAyC;EACvC9C,cAAAA,GAAG,CAAC8C,KAAJ,CAAUD,SAAV,IAAuB7J,KAAK,CAACsB,KAAN,CAAYwI,KAAZ,CAAkBD,SAAlB,CAAvB;EACD;EACF,WAJD,MAIO,IAAI/G,IAAI,KAAK,OAAb,EAAsB;EAC3BkE,YAAAA,GAAG,CAAC+C,SAAJ,GAAgB/J,KAAK,CAACsB,KAAN,CAAYwB,IAAZ,CAAhB;EACD,WAFM,MAEA;EACLkE,YAAAA,GAAG,CAACgD,YAAJ,CAAiBlH,IAAjB,EAAuB9C,KAAK,CAACsB,KAAN,CAAYwB,IAAZ,CAAvB;EACD;EACF;EACF;;EACD,UAAI9C,KAAK,CAACiK,EAAV,EAAc;EACZ,aAAK,IAAIC,KAAT,IAAkBlK,KAAK,CAACiK,EAAxB,EAA4B;EAC1BjD,UAAAA,GAAG,CAACmD,gBAAJ,CAAqBD,KAArB,EAA4BlK,KAAK,CAACiK,EAAN,CAASC,KAAT,EAAgBnO,IAAhB,CAAqB8D,EAArB,CAA5B;EACD;EACF;;EACD,UAAIG,KAAK,CAACoK,QAAV,EAAoB;EAClB,aAAK,IAAIC,IAAT,IAAiBrK,KAAK,CAACoK,QAAvB,EAAiC;EAC/B;EACApD,UAAAA,GAAG,CAACgD,YAAJ,CAAiBK,IAAjB,EAAuBrK,KAAK,CAACoK,QAAN,CAAeC,IAAf,CAAvB;EACD;EACF;EACF;EACF;;EAED,WAAS7B,cAAT,CAAyBtB,QAAzB,EAAmCC,KAAnC,EAA0C;EACxC,QAAI,CAACD,QAAQ,CAAC1L,IAAT,CAAc4O,QAAf,IAA2B,CAACjD,KAAK,CAAC3L,IAAN,CAAW4O,QAA3C,EACE;EACF,QAAMpD,GAAG,GAAGG,KAAK,CAACH,GAAlB;EACA,QAAIsD,QAAQ,GAAGpD,QAAQ,CAAC1L,IAAT,CAAc4O,QAAd,IAA0B,EAAzC;EACA,QAAIpK,KAAK,GAAGmH,KAAK,CAAC3L,IAAN,CAAW4O,QAAX,IAAuB,EAAnC,CALwC;;EAQxC,SAAK,IAAI3O,GAAT,IAAgB6O,QAAhB,EAA0B;EACxB,UAAI,CAACtK,KAAK,CAACvE,GAAD,CAAV,EAAiB;EACfuL,QAAAA,GAAG,CAACvL,GAAD,CAAH,GAAW,EAAX;EACD;EACF;;EAED,SAAK,IAAIA,IAAT,IAAgBuE,KAAhB,EAAuB;EACrB,UAAIuK,GAAG,GAAGvK,KAAK,CAACvE,IAAD,CAAf;;EACA,UAAIA,IAAG,KAAK,OAAZ,EAAqB;EACnBuL,QAAAA,GAAG,CAACvL,IAAD,CAAH,GAAW8O,GAAX;EACD,OAFD,MAEO;EACLvD,QAAAA,GAAG,CAACvL,IAAD,CAAH,GAAW8O,GAAX;EACD;EACF;EACF;EACF;;EC5OM,SAASC,cAAT,CAAyB3K,EAAzB,EAA6BoD,EAA7B,EAAiC;EACtC;EACApD,EAAAA,EAAE,CAAC4K,GAAH,GAASxH,EAAT;;EAEA,MAAIyH,eAAe,GAAG,SAAlBA,eAAkB,GAAM;EAC1B;EACA;EACA,QAAIvD,KAAK,GAAGtH,EAAE,CAAC8K,OAAH,EAAZ;;EACA9K,IAAAA,EAAE,CAAC+K,OAAH,CAAWzD,KAAX;EACD,GALD;;EAMA,MAAIjB,OAAJ,CAAYrG,EAAZ,EAAgB6K,eAAhB,EAAiC,YAAM,EAAvC,EAA4C,IAA5C;EACD;EAEM,SAASG,cAAT,CAAyBC,GAAzB,EAA8B;EACnCA,EAAAA,GAAG,CAAC1N,SAAJ,CAAcwN,OAAd,GAAwB,UAAUzD,KAAV,EAAiB;EACvC,QAAMtH,EAAE,GAAG,IAAX;EACA,QAAIkL,SAAS,GAAGlL,EAAE,CAACmL,MAAnB;EACAnL,IAAAA,EAAE,CAACmL,MAAH,GAAY7D,KAAZ;;EACA,QAAI,CAAC4D,SAAL,EAAgB;EACdlL,MAAAA,EAAE,CAAC4K,GAAH,GAAS5K,EAAE,CAACoL,SAAH,CAAapL,EAAE,CAAC4K,GAAhB,EAAqBtD,KAArB,CAAT;EACD,KAFD,MAEO;EACLtH,MAAAA,EAAE,CAAC4K,GAAH,GAAS5K,EAAE,CAACoL,SAAH,CAAaF,SAAb,EAAwB5D,KAAxB,CAAT;EACD;EACF,GATD;EAUD;;ECtBM,SAAS+D,SAAT,CAAoBJ,GAApB,EAAyB;EAC9BA,EAAAA,GAAG,CAAC1N,SAAJ,CAAc+N,KAAd,GAAsB,UAAUrL,OAAV,EAAmB;EACvC,QAAMD,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcD,OAAd;EAEAF,IAAAA,SAAS,CAAC,IAAD,CAAT;;EAEA,QAAIC,EAAE,CAACE,QAAH,CAAYkD,EAAhB,EAAoB;EAClBpD,MAAAA,EAAE,CAACuL,MAAH,CAAUvL,EAAE,CAACE,QAAH,CAAYkD,EAAtB;EACD;EACF,GATD;;EAWA6H,EAAAA,GAAG,CAAC1N,SAAJ,CAAc6N,SAAd,GAA0BhE,mBAA1B;;EAEA6D,EAAAA,GAAG,CAAC1N,SAAJ,CAAcgO,MAAd,GAAuB,UAAUnI,EAAV,EAAc;EACnC,QAAMpD,EAAE,GAAG,IAAX;EACA,QAAMC,OAAO,GAAGD,EAAE,CAACE,QAAnB;EACAkD,IAAAA,EAAE,GAAG6E,QAAQ,CAACuD,aAAT,CAAuBpI,EAAvB,CAAL,CAHmC;;EAMnC,QAAI,CAACnD,OAAO,CAACwL,MAAb,EAAqB;EACnB,UAAInG,QAAQ,GAAGrF,OAAO,CAACqF,QAAvB;;EACA,UAAI,CAACA,QAAD,IAAalC,EAAjB,EAAqB;EACnBkC,QAAAA,QAAQ,GAAGlC,EAAE,CAACsI,SAAd;EACD;;EACDzL,MAAAA,OAAO,CAACwL,MAAR,GAAiBpG,kBAAkB,CAACC,QAAD,CAAnC;EACD;;EACDqF,IAAAA,cAAc,CAAC3K,EAAD,EAAKoD,EAAL,CAAd;EACD,GAdD;EAeD;;EChCM,SAASuI,WAAT,CAAsBV,GAAtB,EAA2B;EAEhC;EACA;EACA;EACAA,EAAAA,GAAG,CAAC1N,SAAJ,CAAcqO,EAAd,GAAmB,UAAUlK,GAAV,EAAuC;EAAA,QAAxB/F,IAAwB,uEAAjB,EAAiB;;EAAA,sCAAViG,QAAU;EAAVA,MAAAA,QAAU;EAAA;;EACxD,WAAOmF,aAAa,MAAb,UAAcrF,GAAd,EAAmB/F,IAAnB,SAA4BiG,QAA5B,EAAP;EACD,GAFD;;EAGAqJ,EAAAA,GAAG,CAAC1N,SAAJ,CAAcsO,EAAd,GAAmB,UAAU/I,IAAV,EAAgB;EACjC,WAAOoE,cAAc,CAACpE,IAAD,CAArB;EACD,GAFD;;EAGAmI,EAAAA,GAAG,CAAC1N,SAAJ,CAAcuO,EAAd,GAAmB,UAAUC,GAAV,EAAe;EAChC,WAAOA,GAAG,IAAI,IAAP,GAAc,EAAd,GAAoB,QAAOA,GAAP,MAAe,QAAf,GAA0BrH,IAAI,CAACC,SAAL,CAAeoH,GAAf,CAA1B,GAAgDA,GAA3E;EACD,GAFD;;EAIAd,EAAAA,GAAG,CAAC1N,SAAJ,CAAcuN,OAAd,GAAwB,YAAY;EAClC,QAAM9K,EAAE,GAAG,IAAX;EADkC,QAE1ByL,MAF0B,GAEfzL,EAAE,CAACE,QAFY,CAE1BuL,MAF0B;EAIlC,QAAInE,KAAK,GAAGmE,MAAM,CAAC/O,IAAP,CAAYsD,EAAZ,CAAZ;EACA,WAAOsH,KAAP;EACD,GAND;EAOD;;ECpBc,SAAS2D,GAAT,CAAchL,OAAd,EAAuB;EACpC,OAAKqL,KAAL,CAAWrL,OAAX;EACD;EAEDoL,SAAS,CAACJ,GAAD,CAAT;EACAU,WAAW,CAACV,GAAD,CAAX;EACAD,cAAc,CAACC,GAAD,CAAd;;;;;;;;"}
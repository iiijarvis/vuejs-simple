{"version":3,"file":"vue.js","sources":["../../src/core/util/index.js","../../src/core/observer/array.js","../../src/core/observer/index.js","../../src/core/instance/state.js","../../src/compiler/parser-html.js","../../src/compiler/codegen/index.js","../../src/compiler/index.js","../../src/core/instance/init.js","../../src/core/instance/index.js"],"sourcesContent":["export function isObject (obj) {\r\n  return obj !== null && typeof obj === 'object';\r\n}\r\n\r\nexport function def (data, key, value, enumerable) {\r\n  Object.defineProperty(data, key, {\r\n    value: value,\r\n    enumerable: !!enumerable,\r\n    configurable: true\r\n  })\r\n}","const oldArrayMethods = Array.prototype;\r\nexport const arrayMethods = Object.create(oldArrayMethods)\r\n\r\nconst methods = ['push', 'shift', 'unshift', 'pop', 'reverse', 'sort', 'splice'];\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[method] = function (...args) {\r\n    const result = oldArrayMethods[method].apply(this, args); // 调用原生数组方法\r\n    let inserted;\r\n    const ob = this.__ob__;\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args;\r\n        break;\r\n      case 'splice':\r\n        inserted = args.slice(2);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (inserted) {\r\n      ob.observeArray(inserted);\r\n    }\r\n    return result;\r\n  }\r\n});\r\n","import { isObject, def } from '../util/index';\r\nimport { arrayMethods } from './array';\r\n\r\nexport function observe (data) {\r\n  if (!isObject(data)) return;\r\n  return new Observer(data);\r\n}\r\n\r\nexport class Observer {\r\n  constructor(data) {\r\n    // 给 data 挂载 Observer 实例\r\n    // 这里的作用是方便数组操作时调用 Observer 实例的 observeArray 方法\r\n    def(data, '__ob__', this, false);\r\n\r\n    if (Array.isArray(data)) {\r\n      this.observeArray(data);\r\n      data.__proto__ = arrayMethods;\r\n    } else {\r\n      this.walk(data);\r\n    }\r\n  }\r\n  walk (data) {\r\n    Object.keys(data).forEach(key => {\r\n      let value = data[key];\r\n      defineReactive(data, key, value);\r\n    });\r\n  }\r\n  observeArray (data) {\r\n    for (let i = 0; i < data.length; i++) {\r\n      observe(data[i]);\r\n    }\r\n  }\r\n}\r\n\r\nfunction defineReactive (data, key, value) {\r\n  observe(value); // 递归调用\r\n  Object.defineProperty(data, key, {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get () {\r\n      return value;\r\n    },\r\n    set (newVal) {\r\n      if (newVal === value) return;\r\n      value = newVal;\r\n    }\r\n  })\r\n}","import { observe } from '../observer/index'\r\n\r\nfunction initState (vm) {\r\n  const options = vm.$options;\r\n  if (options.props) {\r\n    initProps();\r\n  }\r\n  if (options.methods) {\r\n    initMethods();\r\n  }\r\n  if (options.data) {\r\n    initData(vm);\r\n  }\r\n  if (options.computed) {\r\n    initComputed();\r\n  }\r\n  if (options.watch) {\r\n    initWatch();\r\n  }\r\n}\r\n\r\nfunction initProps () { }\r\n\r\nfunction initMethods () { }\r\n\r\nfunction initData (vm) {\r\n  let data = vm.$options.data;\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data || {};\r\n\r\n  Object.keys(data).forEach((key) => {\r\n    proxy(vm, '_data', key);\r\n  });\r\n  observe(data);\r\n}\r\n\r\nfunction proxy (vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    configurable: true,\r\n    enumerable: true,\r\n    get () {\r\n      return vm[source][key];\r\n    },\r\n    set (newValue) {\r\n      vm[source][key] = newValue;\r\n    }\r\n  })\r\n}\r\n\r\n\r\nfunction initComputed () { }\r\n\r\nfunction initWatch () { }\r\n\r\nexport { initState };","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst doctype = /^<!DOCTYPE [^>]+>/i;\r\n\r\nlet root = null;\r\nlet currentParent = null;\r\nlet stack = [];\r\n\r\nfunction createASTElement (tagName, attrs) {\r\n  return {\r\n    tag: tagName,\r\n    type: 1,\r\n    children: [],\r\n    attrs: attrs,\r\n    parent: null\r\n  }\r\n}\r\n\r\nexport function parseHtml (html) {\r\n  while (html) {\r\n    let textEnd = html.indexOf('<');\r\n    if (textEnd === 0) {\r\n      let startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n      } else {\r\n        let endTagMatch = html.match(endTag);\r\n        if (endTagMatch) {\r\n          advance(endTagMatch[0].length);\r\n          end(endTagMatch[1]);\r\n        }\r\n      }\r\n    }\r\n    let text;\r\n    if (textEnd >= 0) {\r\n      text = html.substring(0, textEnd);\r\n    }\r\n    if (text) {\r\n      advance(text.length);\r\n      chars(text);\r\n    }\r\n  }\r\n\r\n  function parseStartTag () {\r\n    let start = html.match(startTagOpen);\r\n    if (start) {\r\n      const match = { tagName: start[1], attrs: [] };\r\n      advance(start[0].length);\r\n\r\n      let end, attr;\r\n      // 获取标签属性\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        advance(attr[0].length);\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5]\r\n        });\r\n      }\r\n      if (end) {\r\n        advance(end[0].length);\r\n      }\r\n\r\n      return match;\r\n    }\r\n  }\r\n\r\n  function advance (n) {\r\n    html = html.substring(n);\r\n  }\r\n\r\n  return root;\r\n}\r\n\r\n// 处理开始标签\r\nfunction start (tagName, attrs) {\r\n  let element = createASTElement(tagName, attrs);\r\n  if (!root) {\r\n    root = element;\r\n  }\r\n  currentParent = element;\r\n  stack.push(element);\r\n}\r\n\r\n// 处理文本\r\nfunction chars (text) {\r\n  text = text.replace(/\\s/g, '');\r\n  if (text) {\r\n    currentParent.children.push({\r\n      text: text,\r\n      type: 3\r\n    });\r\n  }\r\n}\r\n\r\n// 处理结束标签\r\nfunction end (tagName) {\r\n  let element = stack.pop();\r\n  currentParent = stack[stack.length - 1];\r\n  if (currentParent) {\r\n    element.parent = currentParent;\r\n    currentParent.children.push(element);\r\n  }\r\n}","let defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\n\r\nexport function generate (ast) {\r\n  let children = genChildren(ast);\r\n  let code = `_c(\"${ast.tag}\",\r\n  ${ast.attrs.length ? genProps(ast.attrs) : 'undefined'}\r\n  ${children ? `,${children}` : ''}\r\n  )`;\r\n\r\n  return code;\r\n}\r\n\r\nfunction genProps (attrs) {\r\n  let str = '';\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i];\r\n    if (attr.name === \"style\") {\r\n      let obj = {};\r\n      attr.value.split(\";\").forEach(item => {\r\n        let [key, value] = item.split(\":\");\r\n        obj[key] = value;\r\n      });\r\n      attr.value = obj;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\nfunction genChildren (ast) {\r\n  let children = ast.children;\r\n  if (children && children.length > 0) {\r\n    return `${children.map(c => gen(c)).join(',')}`;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction gen (node) {\r\n  if (node.type === 1) {\r\n    return generate(node);\r\n  } else {\r\n    let text = node.text;\r\n    let tokens = [];\r\n    let match, index;\r\n    let lastIndex = defaultTagRE.lastIndex = 0;\r\n    while (match = defaultTagRE.exec(text)) {\r\n      index = match.index;\r\n      if (index > lastIndex) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n      }\r\n      tokens.push(`_s(${match[1].trim()})`);\r\n      lastIndex = index + match[0].length;\r\n    }\r\n    if (lastIndex < text.length) {\r\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n    }\r\n    return `_v(${tokens.join('+')})`;\r\n  }\r\n}","import { parseHtml } from './parser-html';\r\nimport { generate } from './codegen/index';\r\n\r\nexport function compileToFunctions (template) {\r\n  let root = parseHtml(template);\r\n  let code = generate(root);\r\n}","import { initState } from './state'\r\nimport { compileToFunctions } from '../../compiler/index'\r\n\r\nexport function initMixin (Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this;\r\n    vm.$options = options;\r\n\r\n    initState(this);\r\n\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this;\r\n    const options = vm.$options;\r\n    el = document.querySelector(el);\r\n\r\n    if (!options.render) {\r\n      let template = options.template;\r\n      if (!template && el) {\r\n        template = el.outerHTML;\r\n      }\r\n      options.render = compileToFunctions(template);\r\n    }\r\n  }\r\n}","import { initMixin } from './init'\r\n\r\nexport default function Vue (options) {\r\n  this._init(options);\r\n}\r\n\r\ninitMixin(Vue);"],"names":["isObject","obj","def","data","key","value","enumerable","Object","defineProperty","configurable","oldArrayMethods","Array","prototype","arrayMethods","create","methods","forEach","method","args","result","apply","inserted","ob","__ob__","slice","observeArray","observe","Observer","isArray","__proto__","walk","keys","defineReactive","i","length","get","set","newVal","initState","vm","options","$options","props","initData","computed","watch","_data","call","proxy","source","newValue","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","root","currentParent","stack","createASTElement","tagName","attrs","tag","type","children","parent","parseHtml","html","textEnd","indexOf","startTagMatch","parseStartTag","start","endTagMatch","match","advance","end","text","substring","chars","attr","push","name","n","element","replace","pop","defaultTagRE","generate","ast","genChildren","code","genProps","str","split","item","JSON","stringify","map","c","gen","join","node","tokens","index","lastIndex","exec","trim","compileToFunctions","template","initMixin","Vue","_init","el","$mount","document","querySelector","render","outerHTML"],"mappings":"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"}
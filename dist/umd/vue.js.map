{"version":3,"file":"vue.js","sources":["../../src/core/util/index.js","../../src/core/observer/array.js","../../src/core/observer/dep.js","../../src/core/observer/index.js","../../src/core/observer/scheduler.js","../../src/core/observer/watcher.js","../../src/core/instance/state.js","../../src/compiler/directives/model.js","../../src/compiler/parser-html.js","../../src/compiler/codegen/index.js","../../src/compiler/index.js","../../src/core/vdom/vnode.js","../../src/core/vdom/create-component.js","../../src/core/vdom/patch.js","../../src/core/instance/lifecycle.js","../../src/core/instance/init.js","../../src/core/vdom/create-element.js","../../src/core/instance/render.js","../../src/core/instance/index.js","../../src/core/shared/constants.js","../../src/core/global-api/extend.js","../../src/core/global-api/assets.js","../../src/core/global-api/index.js","../../src/core/index.js"],"sourcesContent":["export function isObject (obj) {\r\n  return obj !== null && typeof obj === 'object';\r\n}\r\n\r\nexport function isPlainObject (obj) {\r\n  return Object.prototype.toString.call(obj) === '[object Object]';\r\n}\r\n\r\nexport function extend (to, _from) {\r\n  for (let key in _from) {\r\n    to[key] = _from[key];\r\n  }\r\n  return to;\r\n}\r\n\r\nexport function def (data, key, value, enumerable) {\r\n  Object.defineProperty(data, key, {\r\n    value: value,\r\n    enumerable: !!enumerable,\r\n    configurable: true\r\n  })\r\n}\r\n\r\nexport function bind (fn, ctx) {\r\n  return function (a) {\r\n    var l = arguments.length\r\n    return l\r\n      ? l > 1\r\n        ? fn.apply(ctx, arguments)\r\n        : fn.call(ctx, a)\r\n      : fn.call(ctx)\r\n  }\r\n}\r\n\r\nexport const unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/\r\n\r\nconst bailRE = new RegExp(`[^${unicodeRegExp.source}.$_\\\\d]`)\r\nexport function parsePath (path) {\r\n  if (bailRE.test(path)) {\r\n    return\r\n  }\r\n  const segments = path.split('.')\r\n  return function (obj) {\r\n    for (let i = 0; i < segments.length; i++) {\r\n      if (!obj) return\r\n      obj = obj[segments[i]]\r\n    }\r\n    return obj\r\n  }\r\n}\r\n\r\nexport function remove (arr, item) {\r\n  if (arr.length) {\r\n    const index = arr.indexOf(item);\r\n    if (index > -1) {\r\n      return arr.splice(index, 1);\r\n    }\r\n  }\r\n}\r\n\r\nexport function isReservedTag (tag) {\r\n  return isHTMLTag(tag) || isSVG(tag)\r\n}\r\n\r\nexport const isHTMLTag = makeMap(\r\n  'html,body,base,head,link,meta,style,title,' +\r\n  'address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,' +\r\n  'div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,' +\r\n  'a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,' +\r\n  's,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,' +\r\n  'embed,object,param,source,canvas,script,noscript,del,ins,' +\r\n  'caption,col,colgroup,table,thead,tbody,td,th,tr,' +\r\n  'button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,' +\r\n  'output,progress,select,textarea,' +\r\n  'details,dialog,menu,menuitem,summary,' +\r\n  'content,element,shadow,template,blockquote,iframe,tfoot'\r\n)\r\n\r\nexport const isSVG = makeMap(\r\n  'svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,' +\r\n  'foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,' +\r\n  'polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view',\r\n  true\r\n)\r\n\r\nexport function makeMap (str, expectsLowerCase) {\r\n  const map = Object.create(null);\r\n  const list = str.split(',');\r\n  for (let i = 0; i < list.length; i++) {\r\n    map[list[i]] = true\r\n  }\r\n  return expectsLowerCase\r\n    ? val => map[val.toLowerCase()]\r\n    : val => map[val]\r\n}\r\n","const oldArrayMethods = Array.prototype;\r\nexport const arrayMethods = Object.create(oldArrayMethods)\r\n\r\nconst methods = ['push', 'shift', 'unshift', 'pop', 'reverse', 'sort', 'splice'];\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[method] = function (...args) {\r\n    const result = oldArrayMethods[method].apply(this, args); // 调用原生数组方法\r\n    let inserted;\r\n    const ob = this.__ob__;\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args;\r\n        break;\r\n      case 'splice':\r\n        inserted = args.slice(2);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (inserted) {\r\n      ob.observeArray(inserted);\r\n    }\r\n    return result;\r\n  }\r\n});\r\n","import { remove } from '../util/index'\r\n\r\nlet uid = 0;\r\n\r\nexport default class Dep {\r\n  constructor() {\r\n    this.id = uid++;\r\n    this.subs = [];\r\n  }\r\n\r\n  addSub (sub) {\r\n    this.subs.push(sub);\r\n  }\r\n\r\n  removeSub (sub) {\r\n    remove(this.subs, sub);\r\n  }\r\n\r\n  depend () {\r\n    if (Dep.target) {\r\n      Dep.target.addDep(this);\r\n    }\r\n  }\r\n\r\n  notify () {\r\n    const subs = this.subs.slice();\r\n    for (let i = 0; i < subs.length; i++) {\r\n      subs[i].update();\r\n    }\r\n  }\r\n}\r\n\r\nDep.target = null\r\nconst targetStack = []\r\n\r\nexport function pushTarget (target) {\r\n  targetStack.push(target);\r\n  Dep.target = target;\r\n}\r\n\r\nexport function popTarget () {\r\n  targetStack.pop();\r\n  Dep.target = targetStack[targetStack.length - 1];\r\n}\r\n","import { isObject, def } from '../util/index';\r\nimport { arrayMethods } from './array';\r\nimport Dep from './dep';\r\n\r\nexport function observe (data) {\r\n  if (!isObject(data)) return;\r\n  return new Observer(data);\r\n}\r\n\r\nexport class Observer {\r\n  constructor(data) {\r\n    // 给 data 挂载 Observer 实例\r\n    // 这里的作用是方便数组操作时调用 Observer 实例的 observeArray 方法\r\n    def(data, '__ob__', this, false);\r\n\r\n    if (Array.isArray(data)) {\r\n      this.observeArray(data);\r\n      data.__proto__ = arrayMethods;\r\n    } else {\r\n      this.walk(data);\r\n    }\r\n  }\r\n  walk (data) {\r\n    Object.keys(data).forEach(key => {\r\n      let value = data[key];\r\n      defineReactive(data, key, value);\r\n    });\r\n  }\r\n  observeArray (data) {\r\n    for (let i = 0; i < data.length; i++) {\r\n      observe(data[i]);\r\n    }\r\n  }\r\n}\r\n\r\nfunction defineReactive (data, key, value) {\r\n  const dep = new Dep();\r\n  observe(value); // 递归调用\r\n  Object.defineProperty(data, key, {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get () {\r\n      if (Dep.target) {\r\n        dep.depend();\r\n      }\r\n      return value;\r\n    },\r\n    set (newVal) {\r\n      if (newVal === value) return;\r\n      value = newVal;\r\n      dep.notify();\r\n    }\r\n  })\r\n}\r\n","let has = {};\r\nlet flushing = false;\r\nlet queue = [];\r\nlet index = 0;\r\nlet waiting = false;\r\n\r\nexport function queueWatcher (watcher) {\r\n  let id = watcher.id;\r\n  if (!has[id]) {\r\n    has[id] = true;\r\n    if (!flushing) {\r\n      queue.push(watcher);\r\n    } else {\r\n      // 执行 flushSchedulerQueue 过程中插入 watcher\r\n      let i = queue.length - 1;\r\n      // 按从小到大排列 插入id\r\n      while (i > index && queue[index].id > id) i--;\r\n      queue.splice(i + 1, 0, watcher);\r\n    }\r\n    if (!waiting) {\r\n      waiting = true;\r\n      setTimeout(flushSchedulerQueue, 0);\r\n    }\r\n  }\r\n}\r\n\r\nfunction flushSchedulerQueue () {\r\n  flushing = true;\r\n  queue.sort((a, b) => a.id - b.id);\r\n  for (index = 0; index < queue.length; index++) {\r\n    let watcher = queue[index];\r\n    has[watcher.id] = null;\r\n    watcher.run();\r\n  }\r\n  index = queue.length = 0;\r\n  has = {};\r\n  flushing = waiting = false;\r\n}\r\n","import Dep, { pushTarget, popTarget } from './dep';\r\nimport { parsePath } from '../util/index'\r\nimport { queueWatcher } from './scheduler'\r\n\r\nlet uid = 0\r\n\r\nclass Watcher {\r\n  constructor(vm, exprOrFn, callback, options) {\r\n    this.vm = vm;\r\n    this.callback = callback;\r\n    this.options = options;\r\n    this.deps = [];\r\n    this.depIds = new Set();\r\n    this.id = ++uid;\r\n\r\n    if (typeof exprOrFn === 'function') {\r\n      this.getter = exprOrFn\r\n    } else {\r\n      this.getter = parsePath(exprOrFn)\r\n    }\r\n\r\n    this.value = this.get();\r\n  }\r\n  get () {\r\n    Dep.target = this;\r\n    let value = '';\r\n    try {\r\n      value = this.getter.call(this.vm, this.vm);\r\n    } catch (e) {\r\n\r\n    } finally {\r\n      Dep.target = null;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  addDep (dep) {\r\n    if (!this.depIds.has(dep.id)) {\r\n      dep.addSub(this);\r\n      this.depIds.add(dep.id);\r\n      this.deps.push(dep);\r\n    }\r\n  }\r\n\r\n  run () {\r\n    let value = this.get();\r\n    if (value !== this.value) {\r\n      let oldValue = this.value;\r\n      this.value = value;\r\n      this.callback.call(this.vm, this.value, oldValue);\r\n    }\r\n  }\r\n\r\n  update () {\r\n    queueWatcher(this);\r\n  }\r\n\r\n  teardown () {\r\n    let i = this.deps.length;\r\n    while (i--) {\r\n      this.deps[i].removeSub(this);\r\n    }\r\n  }\r\n}\r\n\r\nexport default Watcher","import { observe } from '../observer/index'\r\nimport { bind } from '../util/index'\r\nimport Watcher from '../observer/watcher'\r\nimport Dep from '../observer/dep';\r\n\r\nconst sharedPropertyDefinition = {\r\n  enumerable: true,\r\n  configurable: true,\r\n  get: () => { },\r\n  set: () => { }\r\n}\r\n\r\nfunction initState (vm) {\r\n  const options = vm.$options;\r\n  if (options.props) {\r\n    initProps();\r\n  }\r\n  if (options.methods) {\r\n    initMethods(vm);\r\n  }\r\n  if (options.data) {\r\n    initData(vm);\r\n  }\r\n  if (options.computed) {\r\n    initComputed(vm, options.computed);\r\n  }\r\n  if (options.watch) {\r\n    initWatch(vm, options.watch);\r\n  }\r\n}\r\n\r\nfunction initProps () { }\r\n\r\nfunction initMethods (vm) {\r\n  const methods = vm.$options.methods;\r\n  if (methods) {\r\n    for (let key in methods) {\r\n      vm[key] = bind(methods[key], vm);\r\n    }\r\n  }\r\n}\r\n\r\nfunction initData (vm) {\r\n  let data = vm.$options.data;\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data || {};\r\n\r\n  Object.keys(data).forEach((key) => {\r\n    proxy(vm, '_data', key);\r\n  });\r\n  observe(data);\r\n}\r\n\r\nfunction proxy (vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    configurable: true,\r\n    enumerable: true,\r\n    get () {\r\n      return vm[source][key];\r\n    },\r\n    set (newValue) {\r\n      vm[source][key] = newValue;\r\n    }\r\n  })\r\n}\r\n\r\nfunction initComputed (vm, computed) {\r\n  const watchers = vm._computedWatchers = Object.create(null);\r\n\r\n  for (let key in computed) {\r\n    const userDef = computed[key];\r\n    let getter = typeof userDef === 'function' ? userDef : userDef.get;\r\n    watchers[key] = new Watcher(vm, getter, () => { });\r\n\r\n    if (!(key in vm)) { // computed 定义的变量一般不在 vm 上\r\n      defineComputed(vm, key, userDef);\r\n    }\r\n  }\r\n}\r\n\r\nfunction defineComputed (target, key, userDef) {\r\n  if (typeof userDef === 'function') {\r\n    sharedPropertyDefinition.get = createComputedGetter(key);\r\n    sharedPropertyDefinition.set = () => { };\r\n  }\r\n  Object.defineProperty(target, key, sharedPropertyDefinition);\r\n}\r\n\r\nfunction createComputedGetter (key) {\r\n  return function computedGetter () {\r\n    const watcher = this._computedWatchers && this._computedWatchers[key];\r\n\r\n    if (watcher) {\r\n      return watcher.value;\r\n    }\r\n  }\r\n}\r\n\r\nfunction initWatch (vm, watch) {\r\n  for (let key in watch) {\r\n    const handler = watch[key];\r\n\r\n    createWatcher(vm, key, handler);\r\n  }\r\n}\r\n\r\nfunction createWatcher (vm, expOrFn, handler, options) {\r\n  if (typeof handler === 'string') {\r\n    handler = vm[handler];\r\n  }\r\n  return vm.$watch(expOrFn, handler, options);\r\n}\r\n\r\nexport function stateMixin (Vue) {\r\n  Vue.prototype.$watch = function (expOrFn, cb, options) {\r\n    const vm = this;\r\n    options = options || {};\r\n    const watcher = new Watcher(vm, expOrFn, cb);\r\n    if (options.immediate) {\r\n      cb.call(vm, watcher.value);\r\n    }\r\n    return function unwatchFn () {\r\n      watcher.teardown();\r\n    }\r\n  }\r\n}\r\n\r\nexport { initState };","export function genAssignmentCode (value, assignment) {\r\n\r\n  return (value + \"=\" + assignment);\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst doctype = /^<!DOCTYPE [^>]+>/i;\r\nconst dirRE = /^v-|^@/;\r\n\r\nimport { genAssignmentCode } from './directives/model.js';\r\n\r\n\r\nlet root = null;\r\nlet currentParent = null;\r\nlet stack = [];\r\n\r\nfunction createASTElement (tagName, attrs) {\r\n  return {\r\n    tag: tagName,\r\n    type: 1,\r\n    children: [],\r\n    attrsList: attrs,\r\n    attrsMap: makeAttrsMap(attrs),\r\n    parent: null\r\n  }\r\n}\r\n\r\nfunction makeAttrsMap (attrs) {\r\n  let map = {};\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    map[attrs[i].name] = attrs[i].value;\r\n  }\r\n  return map;\r\n}\r\n\r\nexport function parseHtml (html) {\r\n\r\n  root = null;\r\n  currentParent = null;\r\n  stack = [];\r\n\r\n  while (html) {\r\n    let textEnd = html.indexOf('<');\r\n    if (textEnd === 0) {\r\n      let startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n      } else {\r\n        let endTagMatch = html.match(endTag);\r\n        if (endTagMatch) {\r\n          advance(endTagMatch[0].length);\r\n          end(endTagMatch[1]);\r\n        }\r\n      }\r\n    }\r\n    let text;\r\n    if (textEnd >= 0) {\r\n      text = html.substring(0, textEnd);\r\n    }\r\n    if (text) {\r\n      advance(text.length);\r\n      chars(text);\r\n    }\r\n  }\r\n\r\n  function parseStartTag () {\r\n    let start = html.match(startTagOpen);\r\n    if (start) {\r\n      const match = { tagName: start[1], attrs: [] };\r\n      advance(start[0].length);\r\n\r\n      let end, attr;\r\n      // 获取标签属性\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        advance(attr[0].length);\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5]\r\n        });\r\n      }\r\n      if (end) {\r\n        advance(end[0].length);\r\n      }\r\n\r\n      return match;\r\n    }\r\n  }\r\n\r\n  function advance (n) {\r\n    html = html.substring(n);\r\n  }\r\n\r\n  return root;\r\n}\r\n\r\nfunction processAttrs (el) {\r\n  let list = el.attrsList;\r\n  el.attrs = el.attrs ? el.attrs : [];\r\n  el.directives = el.directives ? el.directives : [];\r\n  el.props = el.props ? el.props : [];\r\n  el.events = el.events ? el.events : {};\r\n\r\n  for (let i = 0; i < list.length; i++) {\r\n    let name = list[i].name;\r\n    let value = list[i].value;\r\n    if (dirRE.test(name)) {\r\n      if (/v-model/.test(name) && el.tag === 'input') {\r\n        el.directives.push({ name: 'model', rawName: 'v-model', value: value });\r\n        el.events['input'] = genAssignmentCode(value, '$event.target.value');\r\n        el.props.push({ name: 'value', value: value });\r\n      }\r\n      if (/@click/.test(name)) {\r\n        el.events['click'] = value;\r\n      }\r\n    } else {\r\n      el.attrs.push({ name: name, value: value });\r\n    }\r\n  }\r\n}\r\n\r\n// 处理开始标签\r\nfunction start (tagName, attrs) {\r\n  let element = createASTElement(tagName, attrs);\r\n  processAttrs(element);\r\n  if (!root) {\r\n    root = element;\r\n  }\r\n  currentParent = element;\r\n  stack.push(element);\r\n  if (tagName === 'input') {\r\n    end(tagName);\r\n  }\r\n}\r\n\r\n// 处理文本\r\nfunction chars (text) {\r\n  text = text.replace(/\\s/g, '');\r\n  if (text) {\r\n    currentParent.children.push({\r\n      text: text,\r\n      type: 3\r\n    });\r\n  }\r\n}\r\n\r\n// 处理结束标签\r\nfunction end (tagName) {\r\n  let element = stack.pop();\r\n  currentParent = stack[stack.length - 1];\r\n  if (currentParent) {\r\n    element.parent = currentParent;\r\n    currentParent.children.push(element);\r\n  }\r\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\nconst fnExpRE = /^([\\w$_]+|\\([^)]*?\\))\\s*=>|^function(?:\\s+[\\w$]+)?\\s*\\(/;\r\nconst fnInvokeRE = /\\([^)]*?\\);*$/;\r\nconst simplePathRE = /^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['[^']*?']|\\[\"[^\"]*?\"]|\\[\\d+]|\\[[A-Za-z_$][\\w$]*])*$/;\r\n\r\nexport function generate (ast) {\r\n  let children = genChildren(ast);\r\n  let code = `_c(\"${ast.tag}\",\r\n  ${ast.attrsList.length ? genData(ast) : 'undefined'}\r\n  ${children ? `,${children}` : ''}\r\n  )`;\r\n\r\n  return code;\r\n}\r\n\r\nfunction genData (ast) {\r\n  let data = '{';\r\n  if (ast.attrs) {\r\n    data += \"attrs:\" + genProps(ast.attrs) + \",\";\r\n  }\r\n  if (ast.events) {\r\n    data += \"on:\" + genHandlers(ast.events) + \",\";\r\n  }\r\n  if (ast.props) {\r\n    data += \"domProps:\" + genDomProps(ast.props) + \",\";\r\n  }\r\n\r\n  data = data.replace(/,$/, '');\r\n  // data += \"attrs:\" + genProps(attrs.filter(item => !item.name.startsWith('@'))) + \",\";\r\n  // let events = attrs.filter(item => item.name.startsWith('@'));\r\n  // if (events && events.length) {\r\n  //   data += \"on:\" + genHandlers(events);\r\n  // }\r\n  data += '}';\r\n  return data;\r\n}\r\n\r\nfunction genHandlers (events) {\r\n  let data = '';\r\n  Object.keys(events).forEach(key => {\r\n\r\n    let isMethodPath = simplePathRE.test(events[key]);\r\n    let isFunctionExpression = fnExpRE.test(events[key]);\r\n    // let isFunctionInvocation = simplePathRE.test(handler.value.replace(fnInvokeRE, ''));\r\n\r\n    if (isMethodPath || isFunctionExpression) {\r\n      data += `\"${key}\":${events[key]},`;\r\n    } else {\r\n      data += `\"${key}\":function ($event){ ${events[key]} },`;\r\n    }\r\n  })\r\n  data = data.replace(/,$/, '');\r\n\r\n  return `{${data}}`;\r\n}\r\n\r\nfunction genDomProps (props) {\r\n  let data = '{';\r\n  for (var i = 0; i < props.length; i++) {\r\n    data += `\"${props[i].name}\":${props[i].value},`;\r\n    // if (ast.elm) {\r\n    //   ast.elm[ast.props[i].name] = ast.props[i].value;\r\n    // }\r\n  }\r\n\r\n  data = data.replace(/,$/, '');\r\n  data += '}';\r\n  return data;\r\n}\r\n\r\nfunction genProps (attrs) {\r\n  let str = '';\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i];\r\n    if (attr.name === \"style\") {\r\n      let obj = {};\r\n      attr.value.split(\";\").forEach(item => {\r\n        let [key, value] = item.split(\":\");\r\n        obj[key] = value;\r\n      });\r\n      attr.value = obj;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\nfunction genChildren (ast) {\r\n  let children = ast.children;\r\n  if (children && children.length > 0) {\r\n    return `${children.map(c => gen(c)).join(',')}`;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction gen (node) {\r\n  if (node.type === 1) {\r\n    return generate(node);\r\n  } else {\r\n    let text = node.text;\r\n    let tokens = [];\r\n    let match, index;\r\n    let lastIndex = defaultTagRE.lastIndex = 0;\r\n    while (match = defaultTagRE.exec(text)) {\r\n      index = match.index;\r\n      if (index > lastIndex) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n      }\r\n      tokens.push(`_s(${match[1].trim()})`);\r\n      lastIndex = index + match[0].length;\r\n    }\r\n    if (lastIndex < text.length) {\r\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n    }\r\n    return `_v(${tokens.join('+')})`;\r\n  }\r\n}","import { parseHtml } from './parser-html';\r\nimport { generate } from './codegen/index';\r\n\r\nexport function compileToFunctions (template) {\r\n  let root = parseHtml(template);\r\n  let code = generate(root);\r\n\r\n  let renderFn = new Function(`with(this){return ${code}}`);\r\n\r\n  return renderFn;\r\n}","\r\nexport class VNode {\r\n  constructor(tag, data, key, children = [], text, elm, context, componentOptions) {\r\n    this.tag = tag;\r\n    this.data = data;\r\n    this.key = key;\r\n    this.children = children;\r\n    this.text = text;\r\n    this.elm = elm;\r\n    this.context = context;\r\n    this.componentOptions = componentOptions;\r\n  }\r\n}\r\n","import { VNode } from './vnode'\r\n\r\nexport function createComponent (Ctor, data, context, children, tag) {\r\n  if (!Ctor) return;\r\n  const baseCtor = context.$options._base\r\n\r\n  // 针对局部组件注册场景\r\n  if (typeof Ctor === 'object') {\r\n    Ctor = baseCtor.extend(Ctor)\r\n  }\r\n\r\n  data = data || {}\r\n\r\n  const name = Ctor.options.name || tag\r\n\r\n  const vnode = new VNode(\r\n    `vue-component-${Ctor.cid}${name ? `-${name}` : ''}`,\r\n    data, undefined, undefined, undefined, undefined, context,\r\n    { Ctor: Ctor, tag: tag, children: children }\r\n  )\r\n\r\n  return vnode;\r\n}\r\n\r\nexport function createComponentInstanceForVnode (vnode, parent) {\r\n  let options = {\r\n    _isComponent: true,\r\n    _parentVnode: vnode,\r\n    parent: parent\r\n  };\r\n\r\n  return new vnode.componentOptions.Ctor(options);\r\n}","import { VNode } from './vnode'\r\nimport { createComponentInstanceForVnode } from './create-component'\r\n\r\nexport function createPatchFunction (oldVnode, vnode) {\r\n  const vm = this;\r\n  return patch(oldVnode, vnode);\r\n\r\n  function patch (oldVnode, vnode) {\r\n    // let parent = vm.$el.parentNode;\r\n    // const oldElm = oldVnode;\r\n    // const parentElm = oldElm.parentNode;\r\n\r\n    // let el = createElm(vnode);\r\n    // parent.appendChild(el);\r\n    // if (isRealElement) {\r\n    //   parentElm.removeChild(oldElm);\r\n    // }\r\n    if (!oldVnode) {\r\n      createElm(vnode);\r\n    } else {\r\n      const isRealElement = oldVnode.nodeType; // 虚拟dom没有nodeType属性，真实dom才有\r\n\r\n      if (!isRealElement && sameVnode(oldVnode, vnode)) {\r\n        patchVnode(oldVnode, vnode);\r\n      } else {\r\n        if (isRealElement) {\r\n          oldVnode = emptyNodeAt(oldVnode);\r\n        }\r\n        let elm = oldVnode.elm;\r\n        let parent = elm.parentNode;\r\n        createElm(vnode, [], parent);\r\n        parent.insertBefore(vnode.elm, elm);\r\n        parent.removeChild(elm);\r\n      }\r\n    }\r\n    return vnode.elm;\r\n  }\r\n\r\n  function createElm (vnode, insertedVnodeQueue, parentElm, refElm) {\r\n    let { tag, data, key, children, text } = vnode;\r\n\r\n    if (createComponent(vnode, [], parentElm, undefined)) {\r\n      return\r\n    }\r\n\r\n    if (typeof tag === 'string') {\r\n      vnode.elm = document.createElement(tag);\r\n      children.forEach(child => {\r\n        try {\r\n          return vnode.elm.appendChild(createElm(child, [], vnode.elm));\r\n        } catch (e) {\r\n          console.log(e);\r\n        }\r\n      })\r\n      updateProperties(vnode);\r\n    } else {\r\n      vnode.elm = document.createTextNode(text);\r\n    }\r\n    return vnode.elm;\r\n  }\r\n\r\n  function createComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\r\n    if (vnode.tag && vnode.tag.indexOf('vue-component') > -1) {\r\n      let child = createComponentInstanceForVnode(vnode, parentElm);\r\n      child.$mount();\r\n      parentElm.appendChild(child.$el)\r\n      return true;\r\n    }\r\n  }\r\n\r\n  function patchVnode (oldVnode, vnode) {\r\n    if (oldVnode === vnode) return;\r\n\r\n    const elm = vnode.elm = oldVnode.elm;\r\n    const oldCh = oldVnode.children;\r\n    const ch = vnode.children;\r\n\r\n    if (!vnode.text) { // 判断是否为文本\r\n      if (oldCh && ch) { // 是否有子节点\r\n        updateChildren(elm, oldCh, ch);\r\n      } else if (ch) {\r\n        if (oldCh.text) {\r\n          elm.textContent = '';\r\n        }\r\n        addVnodes(elm, null, ch, 0, ch.length - 1);\r\n      } else if (oldCh) {\r\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\r\n      } else {\r\n        elm.textContent = '';\r\n      }\r\n      updateDOMProps(oldVnode, vnode);\r\n    } else {\r\n      if (oldCh) {\r\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\r\n      }\r\n      elm.textContent = vnode.text;\r\n    }\r\n  }\r\n\r\n  function emptyNodeAt (elm) {\r\n    return new VNode(elm.tagName.toLowerCase(), {}, [], undefined, undefined, elm);\r\n  }\r\n\r\n  function sameVnode (oldVnode, vnode) {\r\n    return oldVnode.key === vnode.key && oldVnode.tag === vnode.tag;\r\n  }\r\n\r\n  function removeVnodes (parent, vnodes, startIdx, endIdx) {\r\n    for (let i = startIdx; i <= endIdx; i++) {\r\n      let vnode = vnodes[i];\r\n      let elm = vnode.elm;\r\n      parent.removeChild(elm);\r\n    }\r\n  }\r\n\r\n  function addVnodes (parent, before, vnodes, startIdx, endIdx) {\r\n    for (; startIdx <= endIdx; ++startIdx) {\r\n      let vnode = vnodes[startIdx];\r\n      if (vnode) {\r\n        parent.insertBefore(createElm(vnode, [], parent), before);\r\n      }\r\n    }\r\n  }\r\n\r\n  function updateChildren (parentElm, oldCh, newCh) {\r\n    if (oldCh === newCh) return;\r\n    let oldStartIdx = 0,\r\n      oldEndIdx = oldCh.length - 1,\r\n      oldStartVnode = oldCh[0],\r\n      oldEndVnode = oldCh[oldEndIdx],\r\n      newStartIdx = 0,\r\n      newEndIdx = newCh.length - 1,\r\n      newStartVnode = newCh[0],\r\n      newEndVnode = newCh[newEndIdx],\r\n      oldKeyToIdx,\r\n      idxInold;\r\n\r\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\r\n      if (oldStartVnode == null) {\r\n        oldStartVnode = oldCh[++oldStartIdx];\r\n      } else if (oldEndVnode == null) {\r\n        oldEndVnode = oldCh[--oldEndIdx];\r\n      } else if (newStartVnode == null) {\r\n        newStartVnode = newCh[++newStartIdx];\r\n      } else if (newEndVnode == null) {\r\n        newEndVnode = newCh[--newEndIdx];\r\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\r\n        patchVnode(oldStartVnode, newStartVnode);\r\n        oldStartVnode = oldCh[++oldStartIdx];\r\n        newStartVnode = newCh[++newStartIdx];\r\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\r\n        patchVnode(oldEndVnode, newEndVnode);\r\n        oldEndVnode = oldCh[--oldEndIdx];\r\n        newEndVnode = newCh[--newEndIdx];\r\n      } else if (sameVnode(oldStartVnode, newEndVnode)) {\r\n        patchVnode(oldStartVnode, newEndVnode);\r\n        parentElm.insertBefore(oldStartVnode.elm, oldEndVnode.elm.nextSibling);\r\n        oldStartVnode = oldCh[++oldStartIdx];\r\n        newEndVnode = newCh[--newEndIdx];\r\n      } else if (sameVnode(oldEndVnode, newStartVnode)) {\r\n        patchVnode(oldEndVnode, newStartVnode);\r\n        parentElm.insertBefore(oldEndVnode.elm, oldStartVnode.elm);\r\n        oldEndVnode = oldCh[--oldEndIdx];\r\n        newStartVnode = newCh[++newStartIdx];\r\n      } else {\r\n        if (oldKeyToIdx === undefined) {\r\n          oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\r\n        }\r\n        idxInold = oldKeyToIdx[newStartVnode.key];\r\n        if (idxInold === undefined) {\r\n          parentElm.insertBefore(createElm(newStartVnode, [], parentElm), oldStartVnode.elm);\r\n        } else {\r\n          let moveVnode = oldCh[idxInold];\r\n          if (!sameVnode(moveVnode, newStartVnode)) {\r\n            parentElm.insertBefore(createElm(newStartVnode, [], parentElm), oldStartVnode.elm);\r\n          } else {\r\n            patchVnode(moveVnode, newStartVnode);\r\n            parentElm.insertBefore(moveVnode.elm, oldStartVnode.elm);\r\n            oldCh[idxInold] = null;\r\n          }\r\n        }\r\n        newStartVnode = newCh[++newStartIdx];\r\n      }\r\n    }\r\n\r\n    if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\r\n      if (oldStartIdx > oldEndIdx) {\r\n        // 插入剩余新增的子节点\r\n        let before = newCh[newEndIdx + 1] ? newCh[newEndIdx + 1].elm : null;\r\n        addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx);\r\n      } else {\r\n        // 删除废弃的子节点\r\n        removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\r\n      }\r\n    }\r\n  }\r\n\r\n  function createKeyToOldIdx (children, startIdx, endIdx) {\r\n    let map = {};\r\n    for (let i = startIdx; i <= endIdx; i++) {\r\n      let key = children[i].key;\r\n      if (key) {\r\n        map[key] = i;\r\n      }\r\n    }\r\n    return map;\r\n  }\r\n\r\n  function updateProperties (vnode) {\r\n    let props = vnode.data;\r\n    let elm = vnode.elm;\r\n    if (props) {\r\n      if (props.attrs) {\r\n        for (let attr in props.attrs) {\r\n          if (attr === 'style') {\r\n            for (let styleName in props.attrs.style) {\r\n              elm.style[styleName] = props.attrs.style[styleName];\r\n            }\r\n          } else if (attr === 'class') {\r\n            elm.className = props.attrs[attr];\r\n          } else {\r\n            elm.setAttribute(attr, props.attrs[attr]);\r\n          }\r\n        }\r\n      }\r\n      if (props.on) {\r\n        for (let event in props.on) {\r\n          elm.addEventListener(event, props.on[event].bind(vm));\r\n        }\r\n      }\r\n      if (props.domProps) {\r\n        for (let prop in props.domProps) {\r\n          // elm.prop=props.domProps[prop]\r\n          elm.setAttribute(prop, props.domProps[prop]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function updateDOMProps (oldVnode, vnode) {\r\n    if (!oldVnode.data.domProps && !vnode.data.domProps)\r\n      return;\r\n    const elm = vnode.elm;\r\n    let oldProps = oldVnode.data.domProps || {};\r\n    let props = vnode.data.domProps || {};\r\n\r\n    // 清空不在新 VNode 里在老 VNode 的 domProps\r\n    for (let key in oldProps) {\r\n      if (!props[key]) {\r\n        elm[key] = '';\r\n      }\r\n    }\r\n\r\n    for (let key in props) {\r\n      let cur = props[key];\r\n      if (key === 'value') {\r\n        elm[key] = cur;\r\n      } else {\r\n        elm[key] = cur;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Watcher from '../observer/watcher'\r\nimport { patch } from '../vdom/patch'\r\n\r\nexport function mountComponent (vm, el) {\r\n  // const option=vm.$options;\r\n  vm.$el = el;\r\n\r\n  let updateComponent = () => {\r\n    // _render 创建虚拟dom\r\n    // _update 解析虚拟dom并创建真实dom\r\n    let vnode = vm._render();\r\n    vm._update(vnode);\r\n  }\r\n  new Watcher(vm, updateComponent, () => { }, true);\r\n}\r\n\r\nexport function lifecycleMixin (Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this;\r\n    let prevVnode = vm._vnode;\r\n    vm._vnode = vnode;\r\n    if (!prevVnode) {\r\n      vm.$el = vm.__patch__(vm.$el, vnode);\r\n    } else {\r\n      vm.$el = vm.__patch__(prevVnode, vnode);\r\n    }\r\n  }\r\n}","import { initState } from './state'\r\nimport { compileToFunctions } from '../../compiler/index'\r\nimport { mountComponent } from './lifecycle'\r\nimport { createPatchFunction } from '../vdom/patch'\r\n// import { initRender } from './render'\r\n\r\nexport function initMixin (Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this;\r\n    vm.$options = options;\r\n\r\n    if (options && options._isComponent) {\r\n      initInternalComponent(vm, options);\r\n    } else {\r\n      vm.$options = Object.assign({}, vm.constructor.options, options || {})\r\n    }\r\n\r\n    // initRender(vm);\r\n    initState(vm);\r\n\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  }\r\n\r\n  Vue.prototype.__patch__ = createPatchFunction;\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this;\r\n    const options = vm.$options;\r\n    el = el ? document.querySelector(el) : undefined;\r\n    // options.el = el;\r\n\r\n    if (!options.render) {\r\n      let template = options.template;\r\n      if (!template && el) {\r\n        template = el.outerHTML;\r\n      }\r\n      options.render = compileToFunctions(template);\r\n    }\r\n    mountComponent(vm, el);\r\n  }\r\n}\r\n\r\nexport function initInternalComponent (vm, options) {\r\n  const opts = vm.$options = Object.assign({}, vm.constructor.options, options)\r\n\r\n  // const parentVnode = options._parentVnode\r\n  // opts.parent = options.parent\r\n  // opts._parentVnode = parentVnode\r\n  // if (options.render) {\r\n  //   opts.render = options.render\r\n  // }\r\n}\r\n","import { isReservedTag } from '../util/index'\r\nimport { createComponent } from './create-component'\r\nimport { VNode } from './vnode'\r\n\r\nexport function createElement (context, tag, data = {}, ...children) {\r\n  let key = data.key;\r\n  let vnode;\r\n  if (key) {\r\n    delete data.key;\r\n  }\r\n  if (typeof tag === 'string') {\r\n    let Ctor;\r\n    if (isReservedTag(tag)) {\r\n      vnode = new VNode(tag, data, key, children, undefined);\r\n    } else if (Ctor = resolveAsset(context.$options, 'components', tag)) {\r\n      vnode = createComponent(Ctor, data, context, children, tag)\r\n    } else {\r\n      vnode = new VNode(tag, data, key, children, undefined);\r\n    }\r\n  }\r\n  return vnode;\r\n}\r\n\r\nexport function createTextNode (text) {\r\n  return new VNode(undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\nfunction resolveAsset (options, type, id) {\r\n  const assets = options[type];\r\n  return assets[id];\r\n}\r\n","import { createElement, createTextNode } from '../vdom/create-element'\r\n\r\nlet cacheComponent = {};\r\n\r\nexport function initRender (vm) {\r\n  vm._c = (tag, options) => {\r\n    let Ctor = vm.constructor.options['component'][tag];\r\n    let sub;\r\n    if (cacheComponent[tag]) {\r\n      sub = cacheComponent[tag];\r\n    } else {\r\n      sub = cacheComponent[tag] = new Ctor(Ctor.options);\r\n    }\r\n\r\n    return Ctor.options.render.call(sub);\r\n  }\r\n}\r\n\r\nexport function renderMixin (Vue) {\r\n\r\n  // _c 创建元素的虚拟节点\r\n  // _v 创建文本的虚拟节点\r\n  // _s 文本变量\r\n  Vue.prototype._c = function (tag, data = {}, ...children) {\r\n    return createElement(this, tag, data, ...children);\r\n  }\r\n  Vue.prototype._v = function (text) {\r\n    return createTextNode(text);\r\n  }\r\n  Vue.prototype._s = function (val) {\r\n    return val == null ? '' : (typeof val === \"object\" ? JSON.stringify(val) : val);\r\n  }\r\n\r\n  Vue.prototype._render = function () {\r\n    const vm = this;\r\n    const { render } = vm.$options;\r\n\r\n    let vnode = render.call(vm);\r\n    return vnode;\r\n  }\r\n}","import { initMixin } from './init'\r\nimport { renderMixin } from './render'\r\nimport { lifecycleMixin } from './lifecycle'\r\nimport { stateMixin } from './state'\r\n\r\nexport default function Vue (options) {\r\n  this._init(options);\r\n}\r\n\r\ninitMixin(Vue);\r\nstateMixin(Vue);\r\nrenderMixin(Vue);\r\nlifecycleMixin(Vue);","\r\nexport const ASSET_TYPES = [\r\n  'component'\r\n]\r\n","\r\nimport { ASSET_TYPES } from '../shared/constants'\r\nimport { extend } from '../util/index'\r\n\r\nexport function initExtend (Vue) {\r\n  Vue.cid = 0;\r\n  let cid = 1;\r\n\r\n  Vue.extend = function (extendOptions) {\r\n    extendOptions = extendOptions || {};\r\n    const Super = this;\r\n    const SuperId = Super.cid;\r\n    const cachedCtors = extendOptions._Ctor || (extendOptions._Ctor = {})\r\n    if (cachedCtors[SuperId]) {\r\n      return cachedCtors[SuperId];\r\n    }\r\n\r\n    const name = extendOptions.name || Super.options.name;\r\n\r\n    const Sub = function VueComponent (options) {\r\n      this._init(options)\r\n    }\r\n    Sub.prototype = Object.create(Super.prototype);\r\n    Sub.prototype.constructor = Sub;\r\n    Sub.cid = cid++;\r\n    // 简易形式， vue 使用 mergeOptions 合并\r\n    Sub.options = Object.assign({}, Super.options, extendOptions);\r\n    Sub['super'] = Super;\r\n    Sub.extend = Super.extend;\r\n    if (name) {\r\n      Sub.options.components[name] = Sub;\r\n    }\r\n\r\n    return Sub;\r\n  }\r\n}\r\n","\r\nimport { ASSET_TYPES } from '../shared/constants'\r\nimport { isPlainObject } from '../util/index'\r\n\r\nexport function initAssetRegisters (Vue) {\r\n  ASSET_TYPES.forEach(type => {\r\n    Vue[type] = function (id, definition) {\r\n      if (!definition) {\r\n        return this.options[type + 's'][id];\r\n      } else {\r\n        if (type === 'component' && isPlainObject(definition)) {\r\n          definition.name = definition.name || id;\r\n        }\r\n        definition = this.options._base.extend(definition);  // 继承全局 vue 的 options\r\n        this.options[type + 's'][id] = definition;\r\n\r\n        return definition;\r\n      }\r\n    }\r\n  })\r\n}\r\n","\r\nimport { ASSET_TYPES } from '../shared/constants'\r\nimport { initExtend } from './extend'\r\nimport { initAssetRegisters } from './assets'\r\n\r\nexport function initGlobalAPI (Vue) {\r\n  Vue.options = Object.create(null);\r\n  ASSET_TYPES.forEach(type => {\r\n    Vue.options[type + 's'] = Object.create(null);\r\n  });\r\n  Vue.options._base = Vue;\r\n\r\n  initExtend(Vue);\r\n  initAssetRegisters(Vue);\r\n}\r\n","import Vue from './instance/index';\r\nimport { initGlobalAPI } from './global-api/index'\r\n\r\ninitGlobalAPI(Vue);\r\nexport default Vue;\r\n"],"names":["isObject","obj","isPlainObject","Object","prototype","toString","call","def","data","key","value","enumerable","defineProperty","configurable","bind","fn","ctx","a","l","arguments","length","apply","unicodeRegExp","bailRE","RegExp","source","parsePath","path","test","segments","split","i","remove","arr","item","index","indexOf","splice","isReservedTag","tag","isHTMLTag","isSVG","makeMap","str","expectsLowerCase","map","create","list","val","toLowerCase","oldArrayMethods","Array","arrayMethods","methods","forEach","method","args","result","inserted","ob","__ob__","slice","observeArray","uid","Dep","id","subs","sub","push","target","addDep","update","observe","Observer","isArray","__proto__","walk","keys","defineReactive","dep","get","depend","set","newVal","notify","has","flushing","queue","waiting","queueWatcher","watcher","setTimeout","flushSchedulerQueue","sort","b","run","Watcher","vm","exprOrFn","callback","options","deps","depIds","Set","getter","e","addSub","add","oldValue","removeSub","sharedPropertyDefinition","initState","$options","props","initMethods","initData","computed","initComputed","watch","initWatch","_data","proxy","newValue","watchers","_computedWatchers","userDef","defineComputed","createComputedGetter","computedGetter","handler","createWatcher","expOrFn","$watch","stateMixin","Vue","cb","immediate","unwatchFn","teardown","genAssignmentCode","assignment","ncname","qnameCapture","startTagOpen","startTagClose","endTag","attribute","dirRE","root","currentParent","stack","createASTElement","tagName","attrs","type","children","attrsList","attrsMap","makeAttrsMap","parent","name","parseHtml","html","textEnd","startTagMatch","parseStartTag","start","endTagMatch","match","advance","end","text","substring","chars","attr","n","processAttrs","el","directives","events","rawName","element","replace","pop","defaultTagRE","fnExpRE","simplePathRE","generate","ast","genChildren","code","genData","genProps","genHandlers","genDomProps","isMethodPath","isFunctionExpression","JSON","stringify","c","gen","join","node","tokens","lastIndex","exec","trim","compileToFunctions","template","renderFn","Function","VNode","elm","context","componentOptions","createComponent","Ctor","baseCtor","_base","extend","vnode","cid","undefined","createComponentInstanceForVnode","_isComponent","_parentVnode","createPatchFunction","oldVnode","patch","createElm","isRealElement","nodeType","sameVnode","patchVnode","emptyNodeAt","parentNode","insertBefore","removeChild","insertedVnodeQueue","parentElm","refElm","document","createElement","child","appendChild","console","log","updateProperties","createTextNode","$mount","$el","oldCh","ch","updateChildren","textContent","addVnodes","removeVnodes","updateDOMProps","vnodes","startIdx","endIdx","before","newCh","oldStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newStartIdx","newEndIdx","newStartVnode","newEndVnode","oldKeyToIdx","idxInold","nextSibling","createKeyToOldIdx","moveVnode","styleName","style","className","setAttribute","on","event","addEventListener","domProps","prop","oldProps","cur","mountComponent","updateComponent","_render","_update","lifecycleMixin","prevVnode","_vnode","__patch__","initMixin","_init","initInternalComponent","assign","constructor","querySelector","render","outerHTML","opts","resolveAsset","assets","renderMixin","_c","_v","_s","ASSET_TYPES","initExtend","extendOptions","Super","SuperId","cachedCtors","_Ctor","Sub","VueComponent","components","initAssetRegisters","definition","initGlobalAPI"],"mappings":"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"}
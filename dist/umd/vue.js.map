{"version":3,"file":"vue.js","sources":["../../src/core/util/index.js","../../src/core/observer/array.js","../../src/core/observer/dep.js","../../src/core/observer/index.js","../../src/core/instance/state.js","../../src/compiler/directives/model.js","../../src/compiler/parser-html.js","../../src/compiler/codegen/index.js","../../src/compiler/index.js","../../src/core/observer/watcher.js","../../src/core/vdom/create-element.js","../../src/core/vdom/patch.js","../../src/core/instance/lifecycle.js","../../src/core/instance/init.js","../../src/core/instance/render.js","../../src/core/instance/index.js"],"sourcesContent":["export function isObject (obj) {\r\n  return obj !== null && typeof obj === 'object';\r\n}\r\n\r\nexport function def (data, key, value, enumerable) {\r\n  Object.defineProperty(data, key, {\r\n    value: value,\r\n    enumerable: !!enumerable,\r\n    configurable: true\r\n  })\r\n}\r\n\r\nexport function bind (fn, ctx) {\r\n  return function (a) {\r\n    var l = arguments.length\r\n    return l\r\n      ? l > 1\r\n        ? fn.apply(ctx, arguments)\r\n        : fn.call(ctx, a)\r\n      : fn.call(ctx)\r\n  }\r\n}\r\n","const oldArrayMethods = Array.prototype;\r\nexport const arrayMethods = Object.create(oldArrayMethods)\r\n\r\nconst methods = ['push', 'shift', 'unshift', 'pop', 'reverse', 'sort', 'splice'];\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[method] = function (...args) {\r\n    const result = oldArrayMethods[method].apply(this, args); // 调用原生数组方法\r\n    let inserted;\r\n    const ob = this.__ob__;\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args;\r\n        break;\r\n      case 'splice':\r\n        inserted = args.slice(2);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (inserted) {\r\n      ob.observeArray(inserted);\r\n    }\r\n    return result;\r\n  }\r\n});\r\n","let uid = 0;\r\n\r\nexport default class Dep {\r\n  constructor() {\r\n    this.id = uid++;\r\n    this.subs = [];\r\n  }\r\n\r\n  addSub (sub) {\r\n    this.subs.push(sub);\r\n  }\r\n\r\n  removeSub (sub) {\r\n    remove(this.subs, sub);\r\n  }\r\n\r\n  depend () {\r\n    if (Dep.target) {\r\n      Dep.target.addDep(this);\r\n    }\r\n  }\r\n\r\n  notify () {\r\n    const subs = this.subs.slice();\r\n    for (let i = 0; i < subs.length; i++) {\r\n      subs[i].update();\r\n    }\r\n  }\r\n}\r\n\r\nDep.target = null\r\n","import { isObject, def } from '../util/index';\r\nimport { arrayMethods } from './array';\r\nimport Dep from './dep';\r\n\r\nexport function observe (data) {\r\n  if (!isObject(data)) return;\r\n  return new Observer(data);\r\n}\r\n\r\nexport class Observer {\r\n  constructor(data) {\r\n    // 给 data 挂载 Observer 实例\r\n    // 这里的作用是方便数组操作时调用 Observer 实例的 observeArray 方法\r\n    def(data, '__ob__', this, false);\r\n\r\n    if (Array.isArray(data)) {\r\n      this.observeArray(data);\r\n      data.__proto__ = arrayMethods;\r\n    } else {\r\n      this.walk(data);\r\n    }\r\n  }\r\n  walk (data) {\r\n    Object.keys(data).forEach(key => {\r\n      let value = data[key];\r\n      defineReactive(data, key, value);\r\n    });\r\n  }\r\n  observeArray (data) {\r\n    for (let i = 0; i < data.length; i++) {\r\n      observe(data[i]);\r\n    }\r\n  }\r\n}\r\n\r\nfunction defineReactive (data, key, value) {\r\n  const dep = new Dep();\r\n  observe(value); // 递归调用\r\n  Object.defineProperty(data, key, {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get () {\r\n      if (Dep.target) {\r\n        dep.depend();\r\n      }\r\n      return value;\r\n    },\r\n    set (newVal) {\r\n      if (newVal === value) return;\r\n      value = newVal;\r\n      dep.notify();\r\n    }\r\n  })\r\n}\r\n","import { observe } from '../observer/index'\r\nimport { bind } from '../util/index'\r\n\r\nfunction initState (vm) {\r\n  const options = vm.$options;\r\n  if (options.props) {\r\n    initProps();\r\n  }\r\n  if (options.methods) {\r\n    initMethods(vm);\r\n  }\r\n  if (options.data) {\r\n    initData(vm);\r\n  }\r\n  if (options.computed) {\r\n    initComputed();\r\n  }\r\n  if (options.watch) {\r\n    initWatch();\r\n  }\r\n}\r\n\r\nfunction initProps () { }\r\n\r\nfunction initMethods (vm) {\r\n  const methods = vm.$options.methods;\r\n  if (methods) {\r\n    for (let key in methods) {\r\n      vm[key] = bind(methods[key], vm);\r\n    }\r\n  }\r\n}\r\n\r\nfunction initData (vm) {\r\n  let data = vm.$options.data;\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data || {};\r\n\r\n  Object.keys(data).forEach((key) => {\r\n    proxy(vm, '_data', key);\r\n  });\r\n  observe(data);\r\n}\r\n\r\nfunction proxy (vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    configurable: true,\r\n    enumerable: true,\r\n    get () {\r\n      return vm[source][key];\r\n    },\r\n    set (newValue) {\r\n      vm[source][key] = newValue;\r\n    }\r\n  })\r\n}\r\n\r\n\r\nfunction initComputed () { }\r\n\r\nfunction initWatch () { }\r\n\r\nexport { initState };","export function genAssignmentCode (value, assignment) {\r\n\r\n  return (value + \"=\" + assignment);\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst doctype = /^<!DOCTYPE [^>]+>/i;\r\nconst dirRE = /^v-|^@/;\r\n\r\nimport { genAssignmentCode } from './directives/model.js';\r\n\r\nlet root = null;\r\nlet currentParent = null;\r\nlet stack = [];\r\n\r\nfunction createASTElement (tagName, attrs) {\r\n  return {\r\n    tag: tagName,\r\n    type: 1,\r\n    children: [],\r\n    attrsList: attrs,\r\n    attrsMap: makeAttrsMap(attrs),\r\n    parent: null\r\n  }\r\n}\r\n\r\nfunction makeAttrsMap (attrs) {\r\n  let map = {};\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    map[attrs[i].name] = attrs[i].value;\r\n  }\r\n  return map;\r\n}\r\n\r\nexport function parseHtml (html) {\r\n  while (html) {\r\n    let textEnd = html.indexOf('<');\r\n    if (textEnd === 0) {\r\n      let startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n      } else {\r\n        let endTagMatch = html.match(endTag);\r\n        if (endTagMatch) {\r\n          advance(endTagMatch[0].length);\r\n          end(endTagMatch[1]);\r\n        }\r\n      }\r\n    }\r\n    let text;\r\n    if (textEnd >= 0) {\r\n      text = html.substring(0, textEnd);\r\n    }\r\n    if (text) {\r\n      advance(text.length);\r\n      chars(text);\r\n    }\r\n  }\r\n\r\n  function parseStartTag () {\r\n    let start = html.match(startTagOpen);\r\n    if (start) {\r\n      const match = { tagName: start[1], attrs: [] };\r\n      advance(start[0].length);\r\n\r\n      let end, attr;\r\n      // 获取标签属性\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        advance(attr[0].length);\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5]\r\n        });\r\n      }\r\n      if (end) {\r\n        advance(end[0].length);\r\n      }\r\n\r\n      return match;\r\n    }\r\n  }\r\n\r\n  function advance (n) {\r\n    html = html.substring(n);\r\n  }\r\n\r\n  return root;\r\n}\r\n\r\nfunction processAttrs (el) {\r\n  let list = el.attrsList;\r\n  el.attrs = el.attrs ? el.attrs : [];\r\n  el.directives = el.directives ? el.directives : [];\r\n  el.props = el.props ? el.props : [];\r\n  el.events = el.events ? el.events : {};\r\n\r\n  for (let i = 0; i < list.length; i++) {\r\n    let name = list[i].name;\r\n    let value = list[i].value;\r\n    if (dirRE.test(name)) {\r\n      if (/v-model/.test(name) && el.tag === 'input') {\r\n        el.directives.push({ name: 'model', rawName: 'v-model', value: value });\r\n        el.events['input'] = genAssignmentCode(value, '$event.target.value');\r\n        el.props.push({ name: 'value', value: value });\r\n      }\r\n      if (/@click/.test(name)) {\r\n        el.events['click'] = value;\r\n      }\r\n    } else {\r\n      el.attrs.push({ name: name, value: value });\r\n    }\r\n  }\r\n}\r\n\r\n// 处理开始标签\r\nfunction start (tagName, attrs) {\r\n  let element = createASTElement(tagName, attrs);\r\n  processAttrs(element);\r\n  if (!root) {\r\n    root = element;\r\n  }\r\n  currentParent = element;\r\n  stack.push(element);\r\n  if (tagName === 'input') {\r\n    end(tagName);\r\n  }\r\n}\r\n\r\n// 处理文本\r\nfunction chars (text) {\r\n  text = text.replace(/\\s/g, '');\r\n  if (text) {\r\n    currentParent.children.push({\r\n      text: text,\r\n      type: 3\r\n    });\r\n  }\r\n}\r\n\r\n// 处理结束标签\r\nfunction end (tagName) {\r\n  let element = stack.pop();\r\n  currentParent = stack[stack.length - 1];\r\n  if (currentParent) {\r\n    element.parent = currentParent;\r\n    currentParent.children.push(element);\r\n  }\r\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\nconst fnExpRE = /^([\\w$_]+|\\([^)]*?\\))\\s*=>|^function(?:\\s+[\\w$]+)?\\s*\\(/;\r\nconst fnInvokeRE = /\\([^)]*?\\);*$/;\r\nconst simplePathRE = /^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['[^']*?']|\\[\"[^\"]*?\"]|\\[\\d+]|\\[[A-Za-z_$][\\w$]*])*$/;\r\n\r\nexport function generate (ast) {\r\n  let children = genChildren(ast);\r\n  let code = `_c(\"${ast.tag}\",\r\n  ${ast.attrsList.length ? genData(ast) : 'undefined'}\r\n  ${children ? `,${children}` : ''}\r\n  )`;\r\n\r\n  return code;\r\n}\r\n\r\nfunction genData (ast) {\r\n  let data = '{';\r\n  if (ast.attrs) {\r\n    data += \"attrs:\" + genProps(ast.attrs) + \",\";\r\n  }\r\n  if (ast.events) {\r\n    data += \"on:\" + genHandlers(ast.events) + \",\";\r\n  }\r\n  if (ast.props) {\r\n    data += \"domProps:\" + genDomProps(ast.props) + \",\";\r\n  }\r\n\r\n  data = data.replace(/,$/, '');\r\n  // data += \"attrs:\" + genProps(attrs.filter(item => !item.name.startsWith('@'))) + \",\";\r\n  // let events = attrs.filter(item => item.name.startsWith('@'));\r\n  // if (events && events.length) {\r\n  //   data += \"on:\" + genHandlers(events);\r\n  // }\r\n  data += '}';\r\n  return data;\r\n}\r\n\r\nfunction genHandlers (events) {\r\n  let data = '';\r\n  Object.keys(events).forEach(key => {\r\n\r\n    let isMethodPath = simplePathRE.test(events[key]);\r\n    let isFunctionExpression = fnExpRE.test(events[key]);\r\n    // let isFunctionInvocation = simplePathRE.test(handler.value.replace(fnInvokeRE, ''));\r\n\r\n    if (isMethodPath || isFunctionExpression) {\r\n      data += `\"${key}\":${events[key]},`;\r\n    } else {\r\n      data += `\"${key}\":function ($event){ ${events[key]} },`;\r\n    }\r\n  })\r\n  data = data.replace(/,$/, '');\r\n\r\n  return `{${data}}`;\r\n}\r\n\r\nfunction genDomProps (props) {\r\n  let data = '{';\r\n  for (var i = 0; i < props.length; i++) {\r\n    data += `\"${props[i].name}\":${props[i].value},`;\r\n    // if (ast.elm) {\r\n    //   ast.elm[ast.props[i].name] = ast.props[i].value;\r\n    // }\r\n  }\r\n\r\n  data = data.replace(/,$/, '');\r\n  data += '}';\r\n  return data;\r\n}\r\n\r\nfunction genProps (attrs) {\r\n  let str = '';\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i];\r\n    if (attr.name === \"style\") {\r\n      let obj = {};\r\n      attr.value.split(\";\").forEach(item => {\r\n        let [key, value] = item.split(\":\");\r\n        obj[key] = value;\r\n      });\r\n      attr.value = obj;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\nfunction genChildren (ast) {\r\n  let children = ast.children;\r\n  if (children && children.length > 0) {\r\n    return `${children.map(c => gen(c)).join(',')}`;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction gen (node) {\r\n  if (node.type === 1) {\r\n    return generate(node);\r\n  } else {\r\n    let text = node.text;\r\n    let tokens = [];\r\n    let match, index;\r\n    let lastIndex = defaultTagRE.lastIndex = 0;\r\n    while (match = defaultTagRE.exec(text)) {\r\n      index = match.index;\r\n      if (index > lastIndex) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n      }\r\n      tokens.push(`_s(${match[1].trim()})`);\r\n      lastIndex = index + match[0].length;\r\n    }\r\n    if (lastIndex < text.length) {\r\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n    }\r\n    return `_v(${tokens.join('+')})`;\r\n  }\r\n}","import { parseHtml } from './parser-html';\r\nimport { generate } from './codegen/index';\r\n\r\nexport function compileToFunctions (template) {\r\n  let root = parseHtml(template);\r\n  let code = generate(root);\r\n\r\n  let renderFn = new Function(`with(this){return ${code}}`);\r\n\r\n  return renderFn;\r\n}","import Dep from './dep';\r\n\r\nclass Watcher {\r\n  constructor(vm, exprOrFn, callback, options) {\r\n    this.vm = vm;\r\n    this.callback = callback;\r\n    this.options = options;\r\n    this.depIds = new Set();\r\n\r\n    this.getter = exprOrFn;\r\n    this.get();\r\n  }\r\n  get () {\r\n    Dep.target = this;\r\n    this.getter();\r\n    Dep.target = null;\r\n  }\r\n\r\n  addDep (dep) {\r\n    if (!this.depIds.has(dep.id)) {\r\n      dep.addSub(this);\r\n      this.depIds.add(dep.id);\r\n    }\r\n  }\r\n\r\n  update () {\r\n    this.getter.call(vm);\r\n    // this.vm._update();\r\n  }\r\n}\r\n\r\nexport default Watcher","export function createElement (tag, data = {}, ...children) {\r\n  let key = data.key;\r\n  if (key) {\r\n    delete data.key;\r\n  }\r\n  return VNode(tag, data, key, children, undefined);\r\n}\r\n\r\nexport function createTextNode (text) {\r\n  return VNode(undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\nexport function VNode (tag, data, key, children, text, elm) {\r\n  return {\r\n    tag: tag,\r\n    data: data,\r\n    key: key,\r\n    children: children,\r\n    text: text,\r\n    elm: elm\r\n  };\r\n}","import { VNode } from './create-element'\r\n\r\nexport function createPatchFunction (oldVnode, vnode) {\r\n  const vm = this;\r\n  return patch(oldVnode, vnode);\r\n\r\n  function patch (oldVnode, vnode) {\r\n    const isRealElement = oldVnode.nodeType; // 虚拟dom没有nodeType属性，真实dom才有\r\n    // let parent = vm.$el.parentNode;\r\n    // const oldElm = oldVnode;\r\n    // const parentElm = oldElm.parentNode;\r\n\r\n    // let el = createElm(vnode);\r\n    // parent.appendChild(el);\r\n    // if (isRealElement) {\r\n    //   parentElm.removeChild(oldElm);\r\n    // }\r\n    if (!isRealElement && sameVnode(oldVnode, vnode)) {\r\n      patchVnode(oldVnode, vnode);\r\n    } else {\r\n      if (isRealElement) {\r\n        oldVnode = emptyNodeAt(oldVnode);\r\n      }\r\n      let elm = oldVnode.elm;\r\n      let parent = elm.parentNode;\r\n      createElm(vnode);\r\n      parent.insertBefore(vnode.elm, elm);\r\n      parent.removeChild(elm);\r\n    }\r\n    return vnode.elm;\r\n  }\r\n\r\n  function createElm (vnode) {\r\n    let { tag, data, key, children, text } = vnode;\r\n\r\n    if (typeof tag === 'string') {\r\n      vnode.elm = document.createElement(tag);\r\n      children.forEach(child => {\r\n        return vnode.elm.appendChild(createElm(child));\r\n      })\r\n      updateProperties(vnode);\r\n    } else {\r\n      vnode.elm = document.createTextNode(text);\r\n    }\r\n    return vnode.elm;\r\n  }\r\n\r\n  function patchVnode (oldVnode, vnode) {\r\n    if (oldVnode === vnode) return;\r\n\r\n    const elm = vnode.elm = oldVnode.elm;\r\n    const oldCh = oldVnode.children;\r\n    const ch = vnode.children;\r\n\r\n    if (!vnode.text) { // 判断是否为文本\r\n      if (oldCh && ch) { // 是否有子节点\r\n        updateChildren(elm, oldCh, ch);\r\n      } else if (ch) {\r\n        if (oldCh.text) {\r\n          elm.textContent = '';\r\n        }\r\n        addVnodes(elm, null, ch, 0, ch.length - 1);\r\n      } else if (oldCh) {\r\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\r\n      } else {\r\n        elm.textContent = '';\r\n      }\r\n      updateDOMProps(oldVnode, vnode);\r\n    } else {\r\n      if (oldCh) {\r\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\r\n      }\r\n      elm.textContent = vnode.text;\r\n    }\r\n  }\r\n\r\n  function emptyNodeAt (elm) {\r\n    return new VNode(elm.tagName.toLowerCase(), {}, [], undefined, undefined, elm);\r\n  }\r\n\r\n  function sameVnode (oldVnode, vnode) {\r\n    return oldVnode.key === vnode.key && oldVnode.tag === vnode.tag;\r\n  }\r\n\r\n  function removeVnodes (parent, vnodes, startIdx, endIdx) {\r\n    for (let i = startIdx; i <= endIdx; i++) {\r\n      let vnode = vnodes[i];\r\n      let elm = vnode.elm;\r\n      parent.removeChild(elm);\r\n    }\r\n  }\r\n\r\n  function addVnodes (parent, before, vnodes, startIdx, endIdx) {\r\n    for (; startIdx <= endIdx; ++startIdx) {\r\n      let vnode = vnodes[startIdx];\r\n      if (vnode) {\r\n        parent.insertBefore(createElm(vnode), before);\r\n      }\r\n    }\r\n  }\r\n\r\n  function updateChildren (parentElm, oldCh, newCh) {\r\n    if (oldCh === newCh) return;\r\n    let oldStartIdx = 0,\r\n      oldEndIdx = oldCh.length - 1,\r\n      oldStartVnode = oldCh[0],\r\n      oldEndVnode = oldCh[oldEndIdx],\r\n      newStartIdx = 0,\r\n      newEndIdx = newCh.length - 1,\r\n      newStartVnode = newCh[0],\r\n      newEndVnode = newCh[newEndIdx],\r\n      oldKeyToIdx,\r\n      idxInold;\r\n\r\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\r\n      if (oldStartVnode == null) {\r\n        oldStartVnode = oldCh[++oldStartIdx];\r\n      } else if (oldEndVnode == null) {\r\n        oldEndVnode = oldCh[--oldEndIdx];\r\n      } else if (newStartVnode == null) {\r\n        newStartVnode = newCh[++newStartIdx];\r\n      } else if (newEndVnode == null) {\r\n        newEndVnode = newCh[--newEndIdx];\r\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\r\n        patchVnode(oldStartVnode, newStartVnode);\r\n        oldStartVnode = oldCh[++oldStartIdx];\r\n        newStartVnode = newCh[++newStartIdx];\r\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\r\n        patchVnode(oldEndVnode, newEndVnode);\r\n        oldEndVnode = oldCh[--oldEndIdx];\r\n        newEndVnode = newCh[--newEndIdx];\r\n      } else if (sameVnode(oldStartVnode, newEndVnode)) {\r\n        patchVnode(oldStartVnode, newEndVnode);\r\n        parentElm.insertBefore(oldStartVnode.elm, oldEndVnode.elm.nextSibling);\r\n        oldStartVnode = oldCh[++oldStartIdx];\r\n        newEndVnode = newCh[--newEndIdx];\r\n      } else if (sameVnode(oldEndVnode, newStartVnode)) {\r\n        patchVnode(oldEndVnode, newStartVnode);\r\n        parentElm.insertBefore(oldEndVnode.elm, oldStartVnode.elm);\r\n        oldEndVnode = oldCh[--oldEndIdx];\r\n        newStartVnode = newCh[++newStartIdx];\r\n      } else {\r\n        if (oldKeyToIdx === undefined) {\r\n          oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\r\n        }\r\n        idxInold = oldKeyToIdx[newStartVnode.key];\r\n        if (idxInold === undefined) {\r\n          parentElm.insertBefore(createElm(newStartVnode), oldStartVnode.elm);\r\n        } else {\r\n          let moveVnode = oldCh[idxInold];\r\n          if (!sameVnode(moveVnode, newStartVnode)) {\r\n            parentElm.insertBefore(createElm(newStartVnode), oldStartVnode.elm);\r\n          } else {\r\n            patchVnode(moveVnode, newStartVnode);\r\n            parentElm.insertBefore(moveVnode.elm, oldStartVnode.elm);\r\n            oldCh[idxInold] = null;\r\n          }\r\n        }\r\n        newStartVnode = newCh[++newStartIdx];\r\n      }\r\n    }\r\n\r\n    if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\r\n      if (oldStartIdx > oldEndIdx) {\r\n        // 插入剩余新增的子节点\r\n        let before = newCh[newEndIdx + 1] ? newCh[newEndIdx + 1].elm : null;\r\n        addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx);\r\n      } else {\r\n        // 删除废弃的子节点\r\n        removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\r\n      }\r\n    }\r\n  }\r\n\r\n  function createKeyToOldIdx (children, startIdx, endIdx) {\r\n    let map = {};\r\n    for (let i = startIdx; i <= endIdx; i++) {\r\n      let key = children[i].key;\r\n      if (key) {\r\n        map[key] = i;\r\n      }\r\n    }\r\n    return map;\r\n  }\r\n\r\n  function updateProperties (vnode) {\r\n    let props = vnode.data;\r\n    let elm = vnode.elm;\r\n    if (props) {\r\n      if (props.attrs) {\r\n        for (let attr in props.attrs) {\r\n          if (attr === 'style') {\r\n            for (let styleName in props.attrs.style) {\r\n              elm.style[styleName] = props.attrs.style[styleName];\r\n            }\r\n          } else if (attr === 'class') {\r\n            elm.className = props.attrs[attr];\r\n          } else {\r\n            elm.setAttribute(attr, props.attrs[attr]);\r\n          }\r\n        }\r\n      }\r\n      if (props.on) {\r\n        for (let event in props.on) {\r\n          elm.addEventListener(event, props.on[event].bind(vm));\r\n        }\r\n      }\r\n      if (props.domProps) {\r\n        for (let prop in props.domProps) {\r\n          // elm.prop=props.domProps[prop]\r\n          elm.setAttribute(prop, props.domProps[prop]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function updateDOMProps (oldVnode, vnode) {\r\n    if (!oldVnode.data.domProps && !vnode.data.domProps)\r\n      return;\r\n    const elm = vnode.elm;\r\n    let oldProps = oldVnode.data.domProps || {};\r\n    let props = vnode.data.domProps || {};\r\n\r\n    // 清空不在新 VNode 里在老 VNode 的 domProps\r\n    for (let key in oldProps) {\r\n      if (!props[key]) {\r\n        elm[key] = '';\r\n      }\r\n    }\r\n\r\n    for (let key in props) {\r\n      let cur = props[key];\r\n      if (key === 'value') {\r\n        elm[key] = cur;\r\n      } else {\r\n        elm[key] = cur;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Watcher from '../observer/watcher'\r\nimport { patch } from '../vdom/patch'\r\n\r\nexport function mountComponent (vm, el) {\r\n  // const option=vm.$options;\r\n  vm.$el = el;\r\n\r\n  let updateComponent = () => {\r\n    // _render 创建虚拟dom\r\n    // _update 解析虚拟dom并创建真实dom\r\n    let vnode = vm._render();\r\n    vm._update(vnode);\r\n  }\r\n  new Watcher(vm, updateComponent, () => { }, true);\r\n}\r\n\r\nexport function lifecycleMixin (Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this;\r\n    let prevVnode = vm._vnode;\r\n    vm._vnode = vnode;\r\n    if (!prevVnode) {\r\n      vm.$el = vm.__patch__(vm.$el, vnode);\r\n    } else {\r\n      vm.$el = vm.__patch__(prevVnode, vnode);\r\n    }\r\n  }\r\n}","import { initState } from './state'\r\nimport { compileToFunctions } from '../../compiler/index'\r\nimport { mountComponent } from './lifecycle'\r\nimport { createPatchFunction } from '../vdom/patch'\r\n\r\nexport function initMixin (Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this;\r\n    vm.$options = options;\r\n\r\n    initState(this);\r\n\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  }\r\n\r\n  Vue.prototype.__patch__ = createPatchFunction;\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this;\r\n    const options = vm.$options;\r\n    el = document.querySelector(el);\r\n    // options.el = el;\r\n\r\n    if (!options.render) {\r\n      let template = options.template;\r\n      if (!template && el) {\r\n        template = el.outerHTML;\r\n      }\r\n      options.render = compileToFunctions(template);\r\n    }\r\n    mountComponent(vm, el);\r\n  }\r\n}","import { createElement, createTextNode } from '../vdom/create-element'\r\n\r\nexport function renderMixin (Vue) {\r\n\r\n  // _c 创建元素的虚拟节点\r\n  // _v 创建文本的虚拟节点\r\n  // _s 文本变量\r\n  Vue.prototype._c = function (tag, data = {}, ...children) {\r\n    return createElement(tag, data, ...children);\r\n  }\r\n  Vue.prototype._v = function (text) {\r\n    return createTextNode(text);\r\n  }\r\n  Vue.prototype._s = function (val) {\r\n    return val == null ? '' : (typeof val === \"object\" ? JSON.stringify(val) : val);\r\n  }\r\n\r\n  Vue.prototype._render = function () {\r\n    const vm = this;\r\n    const { render } = vm.$options;\r\n\r\n    let vnode = render.call(vm);\r\n    return vnode;\r\n  }\r\n}","import { initMixin } from './init'\r\nimport { renderMixin } from './render'\r\nimport { lifecycleMixin } from './lifecycle'\r\n\r\nexport default function Vue (options) {\r\n  this._init(options);\r\n}\r\n\r\ninitMixin(Vue);\r\nrenderMixin(Vue);\r\nlifecycleMixin(Vue);"],"names":["isObject","obj","def","data","key","value","enumerable","Object","defineProperty","configurable","bind","fn","ctx","a","l","arguments","length","apply","call","oldArrayMethods","Array","prototype","arrayMethods","create","methods","forEach","method","args","result","inserted","ob","__ob__","slice","observeArray","uid","Dep","id","subs","sub","push","remove","target","addDep","i","update","observe","Observer","isArray","__proto__","walk","keys","defineReactive","dep","get","depend","set","newVal","notify","initState","vm","options","$options","props","initMethods","initData","computed","watch","_data","proxy","source","newValue","genAssignmentCode","assignment","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","dirRE","root","currentParent","stack","createASTElement","tagName","attrs","tag","type","children","attrsList","attrsMap","makeAttrsMap","parent","map","name","parseHtml","html","textEnd","indexOf","startTagMatch","parseStartTag","start","endTagMatch","match","advance","end","text","substring","chars","attr","n","processAttrs","el","list","directives","events","test","rawName","element","replace","pop","defaultTagRE","fnExpRE","simplePathRE","generate","ast","genChildren","code","genData","genProps","genHandlers","genDomProps","isMethodPath","isFunctionExpression","str","split","item","JSON","stringify","c","gen","join","node","tokens","index","lastIndex","exec","trim","compileToFunctions","template","renderFn","Function","Watcher","exprOrFn","callback","depIds","Set","getter","has","addSub","add","createElement","VNode","undefined","createTextNode","elm","createPatchFunction","oldVnode","vnode","patch","isRealElement","nodeType","sameVnode","patchVnode","emptyNodeAt","parentNode","createElm","insertBefore","removeChild","document","child","appendChild","updateProperties","oldCh","ch","updateChildren","textContent","addVnodes","removeVnodes","updateDOMProps","toLowerCase","vnodes","startIdx","endIdx","before","parentElm","newCh","oldStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newStartIdx","newEndIdx","newStartVnode","newEndVnode","oldKeyToIdx","idxInold","nextSibling","createKeyToOldIdx","moveVnode","styleName","style","className","setAttribute","on","event","addEventListener","domProps","prop","oldProps","cur","mountComponent","$el","updateComponent","_render","_update","lifecycleMixin","Vue","prevVnode","_vnode","__patch__","initMixin","_init","$mount","querySelector","render","outerHTML","renderMixin","_c","_v","_s","val"],"mappings":"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"}